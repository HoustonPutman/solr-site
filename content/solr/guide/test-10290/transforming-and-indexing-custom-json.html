<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Transforming and Indexing Custom JSON | Apache Solr Reference Guide</title>

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-solr.css">
<link rel="stylesheet" href="css/ref-guide.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="Apache Solr Reference Guide" href="https://home.apache.org/~ctargett/RefGuidePOC/jekyll-full/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // we do *NOT* want cookies used to save the current stage of the sidebar
                             // instead the code in sidebar.html will ensure that the current page
                             // (and it's ancestors) are "active" on page load
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="apache-solr-reference-guide.html">&nbsp;<span class="projectTitle"> Solr Ref Guide 7.0</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- Link to Solr website -->
                <li><a href="https://lucene.apache.org/solr/news" target="_blank">Solr News</a></li>
                <!-- Solr Resources dropdown -->
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Solr Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                       <li><a href="https://lucene.apache.org/solr/7_0_0//solr-core/index.html" target="_blank">Solr Javadocs</a></li>
                       <li><a href="https://git1-us-west.apache.org/repos/asf?p=lucene-solr.git" target="_blank">Lucene/Solr Source Code</a></li>
                       <li><a href="https://lucene.apache.org/solr/resources.html#community" target="_blank">Solr Community Links</a></li>
                    </ul>
                </li>
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Transforming and Indexing Custom JSON">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div class="col-lg-12">&nbsp;</div>
  <!-- Content Row -->
  <div class="row">
    <!-- Sidebar Column -->
    <div class="col-md-3">
      

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">Apache Solr Reference Guide <!-- TODO: version from site.data --></li>
  
  <li class="sb-level1">
    <a href="about-this-guide.html">About This Guide</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="getting-started.html">Getting Started</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="installing-solr.html">Installing Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="running-solr.html">Running Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="a-quick-overview.html">A Quick Overview</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="a-step-closer.html">A Step Closer</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-control-script-reference.html">Solr Control Script Reference</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="upgrading-solr.html">Upgrading Solr</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="using-the-solr-administration-user-interface.html">Using the Solr Administration User Interface</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="overview-of-the-solr-admin-ui.html">Overview of the Solr Admin UI</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="getting-assistance.html">Getting Assistance</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="logging.html">Logging</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="cloud-screens.html">Cloud Screens</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="collections-core-admin.html">Collections / Core Admin</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="java-properties.html">Java Properties</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="thread-dump.html">Thread Dump</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="collection-specific-tools.html">Collection-Specific Tools</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="analysis-screen.html">Analysis Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="dataimport-screen.html">Dataimport Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="documents-screen.html">Documents Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="files-screen.html">Files Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="query-screen.html">Query Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="stream-screen.html">Stream Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="schema-browser-screen.html">Schema Browser Screen</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="core-specific-tools.html">Core-Specific Tools</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="ping.html">Ping</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="plugins-stats-screen.html">Plugins &amp; Stats Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="replication-screen.html">Replication Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="segments-info.html">Segments Info</a>
            
          </li>
          
        </ul>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="documents-fields-and-schema-design.html">Documents, Fields, and Schema Design</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="overview-of-documents-fields-and-schema-design.html">Overview of Documents, Fields, and Schema Design</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-field-types.html">Solr Field Types</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="field-type-definitions-and-properties.html">Field Type Definitions and Properties</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="field-types-included-with-solr.html">Field Types Included with Solr</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-currencies-and-exchange-rates.html">Working with Currencies and Exchange Rates</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-dates.html">Working with Dates</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-enum-fields.html">Working with Enum Fields</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-external-files-and-processes.html">Working with External Files and Processes</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="field-properties-by-use-case.html">Field Properties by Use Case</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="defining-fields.html">Defining Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="copying-fields.html">Copying Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="dynamic-fields.html">Dynamic Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="other-schema-elements.html">Other Schema Elements</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="schema-api.html">Schema API</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="putting-the-pieces-together.html">Putting the Pieces Together</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="docvalues.html">DocValues</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="schemaless-mode.html">Schemaless Mode</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="understanding-analyzers-tokenizers-and-filters.html">Understanding Analyzers, Tokenizers, and Filters</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="analyzers.html">Analyzers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="about-tokenizers.html">About Tokenizers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="about-filters.html">About Filters</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="tokenizers.html">Tokenizers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="filter-descriptions.html">Filter Descriptions</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="charfilterfactories.html">CharFilterFactories</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="language-analysis.html">Language Analysis</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="phonetic-matching.html">Phonetic Matching</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="running-your-analyzer.html">Running Your Analyzer</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="indexing-and-basic-data-operations.html">Indexing and Basic Data Operations</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="introduction-to-solr-indexing.html">Introduction to Solr Indexing</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="post-tool.html">Post Tool</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="uploading-data-with-index-handlers.html">Uploading Data with Index Handlers</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="transforming-and-indexing-custom-json.html">Transforming and Indexing Custom JSON</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="uploading-data-with-solr-cell-using-apache-tika.html">Uploading Data with Solr Cell using Apache Tika</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="uploading-structured-data-store-data-with-the-data-import-handler.html">Uploading Structured Data Store Data with the Data Import Handler</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="updating-parts-of-documents.html">Updating Parts of Documents</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="detecting-languages-during-indexing.html">Detecting Languages During Indexing</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="de-duplication.html">De-Duplication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="content-streams.html">Content Streams</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="uima-integration.html">UIMA Integration</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="searching.html">Searching</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="overview-of-searching-in-solr.html">Overview of Searching in Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="velocity-search-ui.html">Velocity Search UI</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="relevance.html">Relevance</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="query-syntax-and-parsing.html">Query Syntax and Parsing</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="common-query-parameters.html">Common Query Parameters</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="the-standard-query-parser.html">The Standard Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="the-dismax-query-parser.html">The DisMax Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="the-extended-dismax-query-parser.html">The Extended DisMax Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="function-queries.html">Function Queries</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="local-parameters-in-queries.html">Local Parameters in Queries</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="other-parsers.html">Other Parsers</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="faceting.html">Faceting</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="blockjoin-faceting.html">BlockJoin Faceting</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="highlighting.html">Highlighting</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="spell-checking.html">Spell Checking</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="query-re-ranking.html">Query Re-Ranking</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="learning-to-rank.html">Learning To Rank</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="transforming-result-documents.html">Transforming Result Documents</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="suggester.html">Suggester</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="morelikethis.html">MoreLikeThis</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="pagination-of-results.html">Pagination of Results</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="collapse-and-expand-results.html">Collapse and Expand Results</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="result-grouping.html">Result Grouping</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="result-clustering.html">Result Clustering</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="spatial-search.html">Spatial Search</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-terms-component.html">The Terms Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-term-vector-component.html">The Term Vector Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-stats-component.html">The Stats Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-query-elevation-component.html">The Query Elevation Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="response-writers.html">Response Writers</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="velocity-response-writer.html">Velocity Response Writer</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="near-real-time-searching.html">Near Real Time Searching</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="realtime-get.html">RealTime Get</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="exporting-result-sets.html">Exporting Result Sets</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="streaming-expressions.html">Streaming Expressions</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="graph-traversal.html">Graph Traversal</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="parallel-sql-interface.html">Parallel SQL Interface</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="solr-jdbc-dbvisualizer.html">Solr JDBC - DbVisualizer</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-squirrel-sql.html">Solr JDBC - SQuirreL SQL</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-apache-zeppelin.html">Solr JDBC - Apache Zeppelin</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-python-jython.html">Solr JDBC - Python/Jython</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-r.html">Solr JDBC - R</a>
            
          </li>
          
        </ul>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="the-well-configured-solr-instance.html">The Well-Configured Solr Instance</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="configuring-solrconfig-xml.html">Configuring solrconfig.xml</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="datadir-and-directoryfactory-in-solrconfig.html">DataDir and DirectoryFactory in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="lib-directives-in-solrconfig.html">Lib Directives in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="schema-factory-definition-in-solrconfig.html">Schema Factory Definition in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="indexconfig-in-solrconfig.html">IndexConfig in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="requesthandlers-and-searchcomponents-in-solrconfig.html">RequestHandlers and SearchComponents in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="initparams-in-solrconfig.html">InitParams in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="updatehandlers-in-solrconfig.html">UpdateHandlers in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="query-settings-in-solrconfig.html">Query Settings in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="requestdispatcher-in-solrconfig.html">RequestDispatcher in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="update-request-processors.html">Update Request Processors</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="codec-factory.html">Codec Factory</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-cores-and-solr-xml.html">Solr Cores and solr.xml</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="format-of-solr-xml.html">Format of solr.xml</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="defining-core-properties.html">Defining core.properties</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="coreadmin-api.html">CoreAdmin API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="config-sets.html">Config Sets</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="configuration-apis.html">Configuration APIs</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="blob-store-api.html">Blob Store API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="config-api.html">Config API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="request-parameters-api.html">Request Parameters API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="managed-resources.html">Managed Resources</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="implicit-requesthandlers.html">Implicit RequestHandlers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-plugins.html">Solr Plugins</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="adding-custom-plugins-in-solrcloud-mode.html">Adding Custom Plugins in SolrCloud Mode</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="jvm-settings.html">JVM Settings</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="managing-solr.html">Managing Solr</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="taking-solr-to-production.html">Taking Solr to Production</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="securing-solr.html">Securing Solr</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="authentication-and-authorization-plugins.html">Authentication and Authorization Plugins</a>
            
            <ul>
              
              <li class="sb-level4">
                <a href="basic-authentication-plugin.html">Basic Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="hadoop-authentication-plugin.html">Hadoop Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="kerberos-authentication-plugin.html">Kerberos Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="rule-based-authorization-plugin.html">Rule-Based Authorization Plugin</a>
                
              </li>
              
            </ul>
            
          </li>
          
          <li class="sb-level3">
            <a href="enabling-ssl.html">Enabling SSL</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="running-solr-on-hdfs.html">Running Solr on HDFS</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="making-and-restoring-backups.html">Making and Restoring Backups</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="configuring-logging.html">Configuring Logging</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-jmx-with-solr.html">Using JMX with Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="mbean-request-handler.html">MBean Request Handler</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="performance-statistics-reference.html">Performance Statistics Reference</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="metrics-reporting.html">Metrics Reporting</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="v2-api.html">v2 API</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="solrcloud.html">SolrCloud</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="getting-started-with-solrcloud.html">Getting Started with SolrCloud</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="how-solrcloud-works.html">How SolrCloud Works</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="shards-and-indexing-data-in-solrcloud.html">Shards and Indexing Data in SolrCloud</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="distributed-requests.html">Distributed Requests</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="read-and-write-side-fault-tolerance.html">Read and Write Side Fault Tolerance</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="solrcloud-configuration-and-parameters.html">SolrCloud Configuration and Parameters</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="setting-up-an-external-zookeeper-ensemble.html">Setting Up an External ZooKeeper Ensemble</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="using-zookeeper-to-manage-configuration-files.html">Using ZooKeeper to Manage Configuration Files</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="zookeeper-access-control.html">ZooKeeper Access Control</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="collections-api.html">Collections API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="parameter-reference.html">Parameter Reference</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="command-line-utilities.html">Command Line Utilities</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solrcloud-with-legacy-configuration-files.html">SolrCloud with Legacy Configuration Files</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="configsets-api.html">ConfigSets API</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="rule-based-replica-placement.html">Rule-based Replica Placement</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="cross-data-center-replication-cdcr-.html">Cross Data Center Replication (CDCR)</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="legacy-scaling-and-distribution.html">Legacy Scaling and Distribution</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="introduction-to-scaling-and-distribution.html">Introduction to Scaling and Distribution</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="distributed-search-with-index-sharding.html">Distributed Search with Index Sharding</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="index-replication.html">Index Replication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="combining-distribution-and-replication.html">Combining Distribution and Replication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="merging-indexes.html">Merging Indexes</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="client-apis.html">Client APIs</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="introduction-to-client-apis.html">Introduction to Client APIs</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="choosing-an-output-format.html">Choosing an Output Format</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="client-api-lineup.html">Client API Lineup</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-javascript.html">Using JavaScript</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-python.html">Using Python</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-solrj.html">Using SolrJ</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-solr-from-ruby.html">Using Solr From Ruby</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="major-changes-from-solr-5-to-solr-6.html">Major Changes from Solr 5 to Solr 6</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="upgrading-a-solr-cluster.html">Upgrading a Solr Cluster</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="indexupgrader-tool.html">IndexUpgrader Tool</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="further-assistance.html">Further Assistance</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="solr-glossary.html">Solr Glossary</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="errata.html">Errata</a>
    
  </li>
  
</ul>


<!-- set the 'active' class on the current page and ancestors -->
<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("#mysidebar a[href='transforming-and-indexing-custom-json.html']").parents('li').toggleClass("active", true);</script>
<!-- set the 'current' class on the current page and 'current-tree' on the current page + it's ancestors -->
<!-- this can let us do css highlighting of the current page in the sidebar even if/when the user clicks around in the sidebar causing other sidebar elements to be 'active' -->
<script>
  $("#mysidebar a[href='transforming-and-indexing-custom-json.html']").parent('li').toggleClass("current", true);
  $("#mysidebar a[href='transforming-and-indexing-custom-json.html']").parents('li').toggleClass("current-tree", true);
</script>

    </div>
    <!-- Content Column -->
    <div class="col-md-9">
      <div class="post-header">
   <h1 class="post-title-main">Transforming and Indexing Custom JSON</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 2, listType: 'ul', showSpeed: 0, headers: 'h2,h3' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    

<div id="main-content">
  <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>If you have JSON documents that you would like to index without transforming them into Solr&#8217;s structure, you can add them to Solr by including some parameters with the update request. These parameters provide information on how to split a single JSON file into multiple Solr documents and how to map fields to Solr&#8217;s schema. One or more valid JSON documents can be sent to the <code>/update/json/docs</code> path with the configuration params.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="TransformingandIndexingCustomJSON-MappingParameters">Mapping Parameters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These parameters allow you to define how a JSON file should be read for multiple Solr documents.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>split</strong>: Defines the path at which to split the input JSON into multiple Solr documents and is required if you have multiple documents in a single JSON file. If the entire JSON makes a single solr document, the path must be “<code>/</code>”. It is possible to pass multiple split paths by separating them with a pipe <code>(|)</code> example : <code>split=/|/foo|/foo/bar</code> . If one path is a child of another, they automatically become a child document <strong>f</strong>: This is a multivalued mapping parameter. The format of the parameter is` target-field-name:json-path`. The <code>json-path</code> is required. The <code>target-field-name</code> is the Solr document field name, and is optional. If not specified, it is automatically derived from the input JSON.The default target field name is the fully qualified name of the field. Wildcards can be used here, see the section <a href="https://cwiki.apache.org/confluence/display/solr/Uploading+Data+with+Index+Handlers#UploadingDatawithIndexHandlers-Wildcards">Wildcards</a> below for more information.</p>
</li>
<li>
<p><strong>mapUniqueKeyOnly</strong> (boolean): This parameter is particularly convenient when the fields in the input JSON are not available in the schema and <a href="https://cwiki.apache.org/confluence/display/solr/Schemaless+Mode">schemaless mode</a> is not enabled. This will index all the fields into the default search field (using the <code>df</code> parameter, below) and only the <code>uniqueKey</code> field is mapped to the corresponding field in the schema. If the input JSON does not have a value for the <code>uniqueKey</code> field then a UUID is generated for the same.</p>
</li>
<li>
<p><strong>df</strong>: If the <code>mapUniqueKeyOnly</code> flag is used, the update handler needs a field where the data should be indexed to. This is the same field that other handlers use as a default search field.</p>
</li>
<li>
<p><strong>srcField</strong>: This is the name of the field to which the JSON source will be stored into. This can only be used if <code>split=/</code> (i.e., you want your JSON input file to be indexed as a single Solr document). Note that atomic updates will cause the field to be out-of-sync with the document.</p>
</li>
<li>
<p><strong>echo</strong>: This is for debugging purpose only. Set it to true if you want the docs to be returned as a response. Nothing will be indexed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, if we have a JSON file that includes two documents, we could define an update request like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl <span style="color: #BA2121">&#39;http://localhost:8983/solr/my_collection/update/json/docs&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
<span style="color: #BA2121">&#39;?split=/exams&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
<span style="color: #BA2121">&#39;&amp;f=first:/first&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
<span style="color: #BA2121">&#39;&amp;f=last:/last&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
<span style="color: #BA2121">&#39;&amp;f=grade:/grade&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
<span style="color: #BA2121">&#39;&amp;f=subject:/exams/subject&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
<span style="color: #BA2121">&#39;&amp;f=test:/exams/test&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
<span style="color: #BA2121">&#39;&amp;f=marks:/exams/marks&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
 -H <span style="color: #BA2121">&#39;Content-type:application/json&#39;</span> -d <span style="color: #BA2121">&#39;</span>
<span style="color: #BA2121">{</span>
<span style="color: #BA2121">  &quot;first&quot;: &quot;John&quot;,</span>
<span style="color: #BA2121">  &quot;last&quot;: &quot;Doe&quot;,</span>
<span style="color: #BA2121">  &quot;grade&quot;: 8,</span>
<span style="color: #BA2121">  &quot;exams&quot;: [</span>
<span style="color: #BA2121">    {</span>
<span style="color: #BA2121">      &quot;subject&quot;: &quot;Maths&quot;,</span>
<span style="color: #BA2121">      &quot;test&quot;   : &quot;term1&quot;,</span>
<span style="color: #BA2121">      &quot;marks&quot;  : 90},</span>
<span style="color: #BA2121">    {</span>
<span style="color: #BA2121">      &quot;subject&quot;: &quot;Biology&quot;,</span>
<span style="color: #BA2121">      &quot;test&quot;   : &quot;term1&quot;,</span>
<span style="color: #BA2121">      &quot;marks&quot;  : 86}</span>
<span style="color: #BA2121">  ]</span>
<span style="color: #BA2121">}&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can store and reuse the params by using <a href="request-parameters-api.html#request-parameters-api">Request Parameters</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"> curl http://localhost:8983/solr/my_collection/config/params -H <span style="color: #BA2121">&#39;Content-type:application/json&#39;</span> -d <span style="color: #BA2121">&#39;{</span>
<span style="color: #BA2121"> &quot;set&quot;: {</span>
<span style="color: #BA2121"> &quot;my_params&quot;: {</span>
<span style="color: #BA2121"> &quot;split&quot;: &quot;/exams&quot;,</span>
<span style="color: #BA2121"> &quot;f&quot;: [&quot;first:/first&quot;,&quot;last:/last&quot;,&quot;grade:/grade&quot;,&quot;subject:/exams/subject&quot;,&quot;test:/exams/test&quot;]</span>
<span style="color: #BA2121"> }}}&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>and use it as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl <span style="color: #BA2121">&#39;http://localhost:8983/solr/my_collection/update/json/docs?useParams=my_params&#39;</span> -H <span style="color: #BA2121">&#39;Content-type:application/json&#39;</span> -d <span style="color: #BA2121">&#39;{</span>
<span style="color: #BA2121">&quot;first&quot;: &quot;John&quot;,</span>
<span style="color: #BA2121">&quot;last&quot;: &quot;Doe&quot;,</span>
<span style="color: #BA2121">&quot;grade&quot;: 8,</span>
<span style="color: #BA2121">&quot;exams&quot;: [</span>
<span style="color: #BA2121">{</span>
<span style="color: #BA2121">&quot;subject&quot;: &quot;Maths&quot;,</span>
<span style="color: #BA2121">&quot;test&quot; : &quot;term1&quot;,</span>
<span style="color: #BA2121">&quot;marks&quot; : 90},</span>
<span style="color: #BA2121">{</span>
<span style="color: #BA2121">&quot;subject&quot;: &quot;Biology&quot;,</span>
<span style="color: #BA2121">&quot;test&quot; : &quot;term1&quot;,</span>
<span style="color: #BA2121">&quot;marks&quot; : 86}</span>
<span style="color: #BA2121">]</span>
<span style="color: #BA2121">}&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With this request, we have defined that "exams" contains multiple documents. In addition, we have mapped several fields from the input document to Solr fields.</p>
</div>
<div class="paragraph">
<p>When the update request is complete, the following two documents will be added to the index:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  <span style="color: #008000; font-weight: bold">&quot;first&quot;</span>:<span style="color: #BA2121">&quot;John&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;last&quot;</span>:<span style="color: #BA2121">&quot;Doe&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;marks&quot;</span>:<span style="color: #666666">90</span>,
  <span style="color: #008000; font-weight: bold">&quot;test&quot;</span>:<span style="color: #BA2121">&quot;term1&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;subject&quot;</span>:<span style="color: #BA2121">&quot;Maths&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;grade&quot;</span>:<span style="color: #666666">8</span>
}
{
  <span style="color: #008000; font-weight: bold">&quot;first&quot;</span>:<span style="color: #BA2121">&quot;John&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;last&quot;</span>:<span style="color: #BA2121">&quot;Doe&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;marks&quot;</span>:<span style="color: #666666">86</span>,
  <span style="color: #008000; font-weight: bold">&quot;test&quot;</span>:<span style="color: #BA2121">&quot;term1&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;subject&quot;</span>:<span style="color: #BA2121">&quot;Biology&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;grade&quot;</span>:<span style="color: #666666">8</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the prior example, all of the fields we wanted to use in Solr had the same names as they did in the input JSON. When that is the case, we can simplify the request as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl <span style="color: #BA2121">&#39;http://localhost:8983/solr/my_collection/update/json/docs&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
<span style="color: #BA2121">&#39;?split=/exams&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
<span style="color: #BA2121">&#39;&amp;f=/first&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
<span style="color: #BA2121">&#39;&amp;f=/last&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
<span style="color: #BA2121">&#39;&amp;f=/grade&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
<span style="color: #BA2121">&#39;&amp;f=/exams/subject&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
<span style="color: #BA2121">&#39;&amp;f=/exams/test&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
<span style="color: #BA2121">&#39;&amp;f=/exams/marks&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
 -H <span style="color: #BA2121">&#39;Content-type:application/json&#39;</span> -d <span style="color: #BA2121">&#39;</span>
<span style="color: #BA2121">{</span>
<span style="color: #BA2121">  &quot;first&quot;: &quot;John&quot;,</span>
<span style="color: #BA2121">  &quot;last&quot;: &quot;Doe&quot;,</span>
<span style="color: #BA2121">  &quot;grade&quot;: 8,</span>
<span style="color: #BA2121">  &quot;exams&quot;: [</span>
<span style="color: #BA2121">    {</span>
<span style="color: #BA2121">      &quot;subject&quot;: &quot;Maths&quot;,</span>
<span style="color: #BA2121">      &quot;test&quot;   : &quot;term1&quot;,</span>
<span style="color: #BA2121">      &quot;marks&quot;  : 90},</span>
<span style="color: #BA2121">    {</span>
<span style="color: #BA2121">      &quot;subject&quot;: &quot;Biology&quot;,</span>
<span style="color: #BA2121">      &quot;test&quot;   : &quot;term1&quot;,</span>
<span style="color: #BA2121">      &quot;marks&quot;  : 86}</span>
<span style="color: #BA2121">  ]</span>
<span style="color: #BA2121">}&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, we simply named the field paths (such as <code>/exams/test</code>). Solr will automatically attempt to add the content of the field from the JSON input to the index in a field with the same name.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you are working in <a href="schemaless-mode.html#schemaless-mode">Schemaless Mode</a>, fields that don&#8217;t exist will be created on the fly with Solr&#8217;s best guess for the field type. Documents WILL get rejected if the fields do not exist in the schema before indexing. So, if you are NOT using schemaless mode, pre-create those fields.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="TransformingandIndexingCustomJSON-Wildcards">Wildcards</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Instead of specifying all the field names explicitly, it is possible to specify wildcards to map fields automatically. There are two restrictions: wildcards can only be used at the end of the <code>json-path</code>, and the split path cannot use wildcards. A single asterisk "<strong>" maps only to direct children, and a double asterisk "</strong>*" maps recursively to all descendants. The following are example wildcard path mappings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>f=$FQN:/**</code>: maps all fields to the fully qualified name (<code>$FQN</code>) of the JSON field. The fully qualified name is obtained by concatenating all the keys in the hierarchy with a period (<code>.</code>) as a delimiter. This is the default behavior if no <code>f</code> path mappings are specified.</p>
</li>
<li>
<p><code>f=/docs/*</code>: maps all the fields under docs and in the name as given in json</p>
</li>
<li>
<p><code>f=/docs/**</code>: maps all the fields under docs and its children in the name as given in json</p>
</li>
<li>
<p><a href="http://searchField/docs/" class="bare">http://searchField/docs/</a><strong>[<code>f=searchField:/docs/</strong></code>] : maps all fields under /docs to a single field called ‘searchField’</p>
</li>
<li>
<p><a href="http://searchField/docs/" class="bare">http://searchField/docs/</a><strong>[<code>f=searchField:/docs/</strong></code>] : maps all fields under /docs and its children to searchField</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>With wildcards we can further simplify our previous example as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl <span style="color: #BA2121">&#39;http://localhost:8983/solr/my_collection/update/json/docs&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
<span style="color: #BA2121">&#39;?split=/exams&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
<span style="color: #BA2121">&#39;&amp;f=/**&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
 -H <span style="color: #BA2121">&#39;Content-type:application/json&#39;</span> -d <span style="color: #BA2121">&#39;</span>
<span style="color: #BA2121">{</span>
<span style="color: #BA2121">  &quot;first&quot;: &quot;John&quot;,</span>
<span style="color: #BA2121">  &quot;last&quot;: &quot;Doe&quot;,</span>
<span style="color: #BA2121">  &quot;grade&quot;: 8,</span>
<span style="color: #BA2121">  &quot;exams&quot;: [</span>
<span style="color: #BA2121">    {</span>
<span style="color: #BA2121">      &quot;subject&quot;: &quot;Maths&quot;,</span>
<span style="color: #BA2121">      &quot;test&quot;   : &quot;term1&quot;,</span>
<span style="color: #BA2121">      &quot;marks&quot;  : 90},</span>
<span style="color: #BA2121">    {</span>
<span style="color: #BA2121">      &quot;subject&quot;: &quot;Biology&quot;,</span>
<span style="color: #BA2121">      &quot;test&quot;   : &quot;term1&quot;,</span>
<span style="color: #BA2121">      &quot;marks&quot;  : 86}</span>
<span style="color: #BA2121">  ]</span>
<span style="color: #BA2121">}&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Because we want the fields to be indexed with the field names as they are found in the JSON input, the double wildcard in <code>f=/**</code> will map all fields and their descendants to the same fields in Solr.</p>
</div>
<div class="paragraph">
<p>It is also possible to send all the values to a single field and do a full text search on that. This is a good option to blindly index and query JSON documents without worrying about fields and schema.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl <span style="color: #BA2121">&#39;http://localhost:8983/solr/my_collection/update/json/docs&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
<span style="color: #BA2121">&#39;?split=/&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
<span style="color: #BA2121">&#39;&amp;f=txt:/**&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
 -H <span style="color: #BA2121">&#39;Content-type:application/json&#39;</span> -d <span style="color: #BA2121">&#39;</span>
<span style="color: #BA2121">{</span>
<span style="color: #BA2121">  &quot;first&quot;: &quot;John&quot;,</span>
<span style="color: #BA2121">  &quot;last&quot;: &quot;Doe&quot;,</span>
<span style="color: #BA2121">  &quot;grade&quot;: 8,</span>
<span style="color: #BA2121">  &quot;exams&quot;: [</span>
<span style="color: #BA2121">    {</span>
<span style="color: #BA2121">      &quot;subject&quot;: &quot;Maths&quot;,</span>
<span style="color: #BA2121">      &quot;test&quot;   : &quot;term1&quot;,</span>
<span style="color: #BA2121">      &quot;marks&quot;  : 90},</span>
<span style="color: #BA2121">    {</span>
<span style="color: #BA2121">      &quot;subject&quot;: &quot;Biology&quot;,</span>
<span style="color: #BA2121">      &quot;test&quot;   : &quot;term1&quot;,</span>
<span style="color: #BA2121">      &quot;marks&quot;  : 86}</span>
<span style="color: #BA2121">  ]</span>
<span style="color: #BA2121">}&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, we&#8217;ve said all of the fields should be added to a field in Solr named 'txt'. This will add multiple fields to a single field, so whatever field you choose should be multi-valued.</p>
</div>
<div class="paragraph">
<p>The default behavior is to use the fully qualified name (FQN) of the node. So, if we don&#8217;t define any field mappings, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl <span style="color: #BA2121">&#39;http://localhost:8983/solr/my_collection/update/json/docs?split=/exams&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
    -H <span style="color: #BA2121">&#39;Content-type:application/json&#39;</span> -d <span style="color: #BA2121">&#39;</span>
<span style="color: #BA2121">{</span>
<span style="color: #BA2121">  &quot;first&quot;: &quot;John&quot;,</span>
<span style="color: #BA2121">  &quot;last&quot;: &quot;Doe&quot;,</span>
<span style="color: #BA2121">  &quot;grade&quot;: 8,</span>
<span style="color: #BA2121">  &quot;exams&quot;: [</span>
<span style="color: #BA2121">    {</span>
<span style="color: #BA2121">      &quot;subject&quot;: &quot;Maths&quot;,</span>
<span style="color: #BA2121">      &quot;test&quot;   : &quot;term1&quot;,</span>
<span style="color: #BA2121">      &quot;marks&quot;  : 90},</span>
<span style="color: #BA2121">    {</span>
<span style="color: #BA2121">      &quot;subject&quot;: &quot;Biology&quot;,</span>
<span style="color: #BA2121">      &quot;test&quot;   : &quot;term1&quot;,</span>
<span style="color: #BA2121">      &quot;marks&quot;  : 86}</span>
<span style="color: #BA2121">  ]</span>
<span style="color: #BA2121">}&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The indexed documents would be added to the index with fields that look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span style="color: #666666">{</span>
  <span style="color: #BA2121">&quot;first&quot;</span>:<span style="color: #BA2121">&quot;John&quot;</span>,
  <span style="color: #BA2121">&quot;last&quot;</span>:<span style="color: #BA2121">&quot;Doe&quot;</span>,
  <span style="color: #BA2121">&quot;grade&quot;</span>:8,
  <span style="color: #BA2121">&quot;exams.subject&quot;</span>:<span style="color: #BA2121">&quot;Maths&quot;</span>,
  <span style="color: #BA2121">&quot;exams.test&quot;</span>:<span style="color: #BA2121">&quot;term1&quot;</span>,
  <span style="color: #BA2121">&quot;exams.marks&quot;</span>:90<span style="color: #666666">}</span>,
<span style="color: #666666">{</span>
  <span style="color: #BA2121">&quot;first&quot;</span>:<span style="color: #BA2121">&quot;John&quot;</span>,
  <span style="color: #BA2121">&quot;last&quot;</span>:<span style="color: #BA2121">&quot;Doe&quot;</span>,
  <span style="color: #BA2121">&quot;grade&quot;</span>:8,
  <span style="color: #BA2121">&quot;exams.subject&quot;</span>:<span style="color: #BA2121">&quot;Biology&quot;</span>,
  <span style="color: #BA2121">&quot;exams.test&quot;</span>:<span style="color: #BA2121">&quot;term1&quot;</span>,
  <span style="color: #BA2121">&quot;exams.marks&quot;</span>:86<span style="color: #666666">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="TransformingandIndexingCustomJSON-MultipledocumentsinaSinglePayload">Multiple documents in a Single Payload</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This functionality supports documents in the <a href="http://jsonlines.org/">JSON Lines</a> format (<code>.jsonl</code>), which specifies one document per line.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl <span style="color: #BA2121">&#39;http://localhost:8983/solr/my_collection/update/json/docs&#39;</span> -H <span style="color: #BA2121">&#39;Content-type:application/json&#39;</span> -d <span style="color: #BA2121">&#39;</span>
<span style="color: #BA2121">{ &quot;first&quot;:&quot;Steve&quot;, &quot;last&quot;:&quot;Jobs&quot;, &quot;grade&quot;:1, &quot;subject&quot;: &quot;Social Science&quot;, &quot;test&quot; : &quot;term1&quot;, &quot;marks&quot; : 90}</span>
<span style="color: #BA2121">{ &quot;first&quot;:&quot;Steve&quot;, &quot;last&quot;:&quot;Woz&quot;, &quot;grade&quot;:1, &quot;subject&quot;: &quot;Political Science&quot;, &quot;test&quot; : &quot;term1&quot;, &quot;marks&quot; : 86}&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or even an array of documents, as in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl <span style="color: #BA2121">&#39;http://localhost:8983/solr/my_collection/update/json/docs&#39;</span> -H <span style="color: #BA2121">&#39;Content-type:application/json&#39;</span> -d <span style="color: #BA2121">&#39;[</span>
<span style="color: #BA2121">{ &quot;first&quot;:&quot;Steve&quot;, &quot;last&quot;:&quot;Jobs&quot;, &quot;grade&quot;:1, &quot;subject&quot;: &quot;Computer Science&quot;, &quot;test&quot;   : &quot;term1&quot;, &quot;marks&quot;  : 90},</span>
<span style="color: #BA2121">{ &quot;first&quot;:&quot;Steve&quot;, &quot;last&quot;:&quot;Woz&quot;, &quot;grade&quot;:1, &quot;subject&quot;: &quot;Calculus&quot;, &quot;test&quot;   : &quot;term1&quot;, &quot;marks&quot;  : 86}]&#39;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="TransformingandIndexingCustomJSON-IndexingNestedDocuments">Indexing Nested Documents</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following is an example of indexing nested documents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl <span style="color: #BA2121">&#39;http://localhost:8983/solr/my_collection/update/json/docs?split=/|/orgs&#39;</span><span style="color: #BB6622; font-weight: bold">\</span>
    -H <span style="color: #BA2121">&#39;Content-type:application/json&#39;</span> -d <span style="color: #BA2121">&#39;{</span>
<span style="color: #BA2121">  &quot;name&quot;: &quot;Joe Smith&quot;,</span>
<span style="color: #BA2121">  &quot;phone&quot;: 876876687,</span>
<span style="color: #BA2121">  &quot;orgs&quot;: [</span>
<span style="color: #BA2121">    {</span>
<span style="color: #BA2121">      &quot;name&quot;: &quot;Microsoft&quot;,</span>
<span style="color: #BA2121">      &quot;city&quot;: &quot;Seattle&quot;,</span>
<span style="color: #BA2121">      &quot;zip&quot;: 98052</span>
<span style="color: #BA2121">    },</span>
<span style="color: #BA2121">    {</span>
<span style="color: #BA2121">      &quot;name&quot;: &quot;Apple&quot;,</span>
<span style="color: #BA2121">      &quot;city&quot;: &quot;Cupertino&quot;,</span>
<span style="color: #BA2121">      &quot;zip&quot;: 95014</span>
<span style="color: #BA2121">    }</span>
<span style="color: #BA2121">  ]</span>
<span style="color: #BA2121">}&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With this example, the documents indexed would be, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span style="color: #666666">{</span>
  <span style="color: #BA2121">&quot;name&quot;</span>:<span style="color: #BA2121">&quot;Joe Smith&quot;</span>,
  <span style="color: #BA2121">&quot;phone&quot;</span>:876876687,
  <span style="color: #BA2121">&quot;_childDocuments_&quot;</span>:<span style="color: #666666">[</span>
    <span style="color: #666666">{</span>
      <span style="color: #BA2121">&quot;name&quot;</span>:<span style="color: #BA2121">&quot;Microsoft&quot;</span>,
      <span style="color: #BA2121">&quot;city&quot;</span>:<span style="color: #BA2121">&quot;Seattle&quot;</span>,
      <span style="color: #BA2121">&quot;zip&quot;</span>:98052<span style="color: #666666">}</span>,
    <span style="color: #666666">{</span>
      <span style="color: #BA2121">&quot;name&quot;</span>:<span style="color: #BA2121">&quot;Apple&quot;</span>,
      <span style="color: #BA2121">&quot;city&quot;</span>:<span style="color: #BA2121">&quot;Cupertino&quot;</span>,
      <span style="color: #BA2121">&quot;zip&quot;</span>:95014<span style="color: #666666">}]}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="TransformingandIndexingCustomJSON-TipsforCustomJSONIndexing">Tips for Custom JSON Indexing</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Schemaless mode: This handles field creation automatically. The field guessing may not be exactly as you expect, but it works. The best thing to do is to setup a local server in schemaless mode, index a few sample docs and create those fields in your real setup with proper field types before indexing</p>
</li>
<li>
<p>Pre-created Schema : Post your docs to the <code>/update/`json</code>/docs` endpoint with <code>echo=true</code>. This gives you the list of field names you need to create. Create the fields before you actually index</p>
</li>
<li>
<p>No schema, only full-text search : All you need to do is to do full-text search on your JSON. Set the configuration as given in the Setting JSON Defaults section.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="TransformingandIndexingCustomJSON-SettingJSONDefaults">Setting JSON Defaults</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is possible to send any json to the <code>/update/json/docs</code> endpoint and the default configuration of the component is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;initParams</span> <span style="color: #7D9029">path=</span><span style="color: #BA2121">&quot;/update/json/docs&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;lst</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;defaults&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
    <span style="color: #408080; font-style: italic">&lt;!-- this ensures that the entire json doc will be stored verbatim into one field --&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;str</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;srcField&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>_src_<span style="color: #008000; font-weight: bold">&lt;/str&gt;</span>
    <span style="color: #408080; font-style: italic">&lt;!-- This means a the uniqueKeyField will be extracted from the fields and</span>
<span style="color: #408080; font-style: italic">         all fields go into the &#39;df&#39; field. In this config df is already configured to be &#39;text&#39;</span>
<span style="color: #408080; font-style: italic">     --&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;str</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;mapUniqueKeyOnly&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>true<span style="color: #008000; font-weight: bold">&lt;/str&gt;</span>
    <span style="color: #408080; font-style: italic">&lt;!-- The default search field where all the values are indexed to --&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;str</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;df&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>text<span style="color: #008000; font-weight: bold">&lt;/str&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;/lst&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/initParams&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>So, if no params are passed, the entire json file would get indexed to the <code><em>src</em></code> field and all the values in the input JSON would go to a field named <code>text</code>. If there is a value for the uniqueKey it is stored and if no value could be obtained from the input JSON, a UUID is created and used as the uniqueKey field value.</p>
</div>
<div class="paragraph">
<p>Alternately, use the Request Parameters feature to set these params</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"> curl http://localhost:8983/solr/my_collection/config/params -H <span style="color: #BA2121">&#39;Content-type:application/json&#39;</span> -d <span style="color: #BA2121">&#39;{</span>
<span style="color: #BA2121"> &quot;set&quot;: {</span>
<span style="color: #BA2121"> &quot;full_txt&quot;: {</span>
<span style="color: #BA2121">     &quot;srcField&quot;: &quot;_src_&quot;,</span>
<span style="color: #BA2121">     &quot;mapUniqueKeyOnly&quot; : true,</span>
<span style="color: #BA2121">     &quot;df&quot;: &quot;text&quot;</span>
<span style="color: #BA2121"> }}}&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Send the parameter <code>useParams=full_txt</code> with each request.</p>
</div>
</div>
</div>
</div>

<!-- Adds tags, if any -->
    <div class="tags">
        
    </div>

<!-- Adds nav links on each page -->
    
    
    <div class="scrollnav">
      
      <a class="btn btn-primary prev" href="uploading-data-with-index-handlers.html">Uploading Data with Index Handlers</a>
      
      
      <a class="btn btn-primary next" href="uploading-data-with-solr-cell-using-apache-tika.html">Uploading Data with Solr Cell using Apache Tika</a>
      
    </div>
    

</div>

<!-- Adds comments from Apache's Comment system -->

<div id="comments_thread">
</div>
<script type="text/javascript" src="https://comments.apache.org/show_comments.lua?site=solrcwiki&style=https://home.apache.org/~ctargett/RefGuidePOC/jekyll/css/comments.css&page=transforming-and-indexing-custom-json" async="true">
</script>
<noscript>
<iframe width="100%" height="500" src="https://comments.apache.org/iframe.lua?site=solrcwiki&style=https://home.apache.org/~ctargett/RefGuidePOC/jekyll/css/comments.css&page=transforming-and-indexing-custom-json"></iframe>
</noscript>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2017 Apache Software Foundation. All rights reserved. <br />
 Site last generated: 2017-04-26 <br />
<p><img src="solr-sunOnly-small.png" alt="Apache Solr"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
  </div>
  <!-- /.container -->
</div>

</body>

</html>

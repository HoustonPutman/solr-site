<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Uploading Structured Data Store Data with the Data Import Handler | Apache Solr Reference Guide</title>

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-solr.css">
<link rel="stylesheet" href="css/ref-guide.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="Apache Solr Reference Guide" href="https://home.apache.org/~ctargett/RefGuidePOC/jekyll-full/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // we do *NOT* want cookies used to save the current stage of the sidebar
                             // instead the code in sidebar.html will ensure that the current page
                             // (and it's ancestors) are "active" on page load
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="apache-solr-reference-guide.html">&nbsp;<span class="projectTitle"> Solr Ref Guide 7.0</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- Link to Solr website -->
                <li><a href="https://lucene.apache.org/solr/news" target="_blank">Solr News</a></li>
                <!-- Solr Resources dropdown -->
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Solr Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                       <li><a href="https://lucene.apache.org/solr/7_0_0//solr-core/index.html" target="_blank">Solr Javadocs</a></li>
                       <li><a href="https://git1-us-west.apache.org/repos/asf?p=lucene-solr.git" target="_blank">Lucene/Solr Source Code</a></li>
                       <li><a href="https://lucene.apache.org/solr/resources.html#community" target="_blank">Solr Community Links</a></li>
                    </ul>
                </li>
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Uploading Structured Data Store Data with the Data Import Handler">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div class="col-lg-12">&nbsp;</div>
  <!-- Content Row -->
  <div class="row">
    <!-- Sidebar Column -->
    <div class="col-md-3">
      

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">Apache Solr Reference Guide <!-- TODO: version from site.data --></li>
  
  <li class="sb-level1">
    <a href="about-this-guide.html">About This Guide</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="getting-started.html">Getting Started</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="installing-solr.html">Installing Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="running-solr.html">Running Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="a-quick-overview.html">A Quick Overview</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="a-step-closer.html">A Step Closer</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-control-script-reference.html">Solr Control Script Reference</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="upgrading-solr.html">Upgrading Solr</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="using-the-solr-administration-user-interface.html">Using the Solr Administration User Interface</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="overview-of-the-solr-admin-ui.html">Overview of the Solr Admin UI</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="getting-assistance.html">Getting Assistance</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="logging.html">Logging</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="cloud-screens.html">Cloud Screens</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="collections-core-admin.html">Collections / Core Admin</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="java-properties.html">Java Properties</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="thread-dump.html">Thread Dump</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="collection-specific-tools.html">Collection-Specific Tools</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="analysis-screen.html">Analysis Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="dataimport-screen.html">Dataimport Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="documents-screen.html">Documents Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="files-screen.html">Files Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="query-screen.html">Query Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="stream-screen.html">Stream Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="schema-browser-screen.html">Schema Browser Screen</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="core-specific-tools.html">Core-Specific Tools</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="ping.html">Ping</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="plugins-stats-screen.html">Plugins &amp; Stats Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="replication-screen.html">Replication Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="segments-info.html">Segments Info</a>
            
          </li>
          
        </ul>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="documents-fields-and-schema-design.html">Documents, Fields, and Schema Design</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="overview-of-documents-fields-and-schema-design.html">Overview of Documents, Fields, and Schema Design</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-field-types.html">Solr Field Types</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="field-type-definitions-and-properties.html">Field Type Definitions and Properties</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="field-types-included-with-solr.html">Field Types Included with Solr</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-currencies-and-exchange-rates.html">Working with Currencies and Exchange Rates</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-dates.html">Working with Dates</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-enum-fields.html">Working with Enum Fields</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-external-files-and-processes.html">Working with External Files and Processes</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="field-properties-by-use-case.html">Field Properties by Use Case</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="defining-fields.html">Defining Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="copying-fields.html">Copying Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="dynamic-fields.html">Dynamic Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="other-schema-elements.html">Other Schema Elements</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="schema-api.html">Schema API</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="putting-the-pieces-together.html">Putting the Pieces Together</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="docvalues.html">DocValues</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="schemaless-mode.html">Schemaless Mode</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="understanding-analyzers-tokenizers-and-filters.html">Understanding Analyzers, Tokenizers, and Filters</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="analyzers.html">Analyzers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="about-tokenizers.html">About Tokenizers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="about-filters.html">About Filters</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="tokenizers.html">Tokenizers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="filter-descriptions.html">Filter Descriptions</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="charfilterfactories.html">CharFilterFactories</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="language-analysis.html">Language Analysis</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="phonetic-matching.html">Phonetic Matching</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="running-your-analyzer.html">Running Your Analyzer</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="indexing-and-basic-data-operations.html">Indexing and Basic Data Operations</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="introduction-to-solr-indexing.html">Introduction to Solr Indexing</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="post-tool.html">Post Tool</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="uploading-data-with-index-handlers.html">Uploading Data with Index Handlers</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="transforming-and-indexing-custom-json.html">Transforming and Indexing Custom JSON</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="uploading-data-with-solr-cell-using-apache-tika.html">Uploading Data with Solr Cell using Apache Tika</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="uploading-structured-data-store-data-with-the-data-import-handler.html">Uploading Structured Data Store Data with the Data Import Handler</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="updating-parts-of-documents.html">Updating Parts of Documents</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="detecting-languages-during-indexing.html">Detecting Languages During Indexing</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="de-duplication.html">De-Duplication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="content-streams.html">Content Streams</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="uima-integration.html">UIMA Integration</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="searching.html">Searching</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="overview-of-searching-in-solr.html">Overview of Searching in Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="velocity-search-ui.html">Velocity Search UI</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="relevance.html">Relevance</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="query-syntax-and-parsing.html">Query Syntax and Parsing</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="common-query-parameters.html">Common Query Parameters</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="the-standard-query-parser.html">The Standard Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="the-dismax-query-parser.html">The DisMax Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="the-extended-dismax-query-parser.html">The Extended DisMax Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="function-queries.html">Function Queries</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="local-parameters-in-queries.html">Local Parameters in Queries</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="other-parsers.html">Other Parsers</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="faceting.html">Faceting</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="blockjoin-faceting.html">BlockJoin Faceting</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="highlighting.html">Highlighting</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="spell-checking.html">Spell Checking</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="query-re-ranking.html">Query Re-Ranking</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="learning-to-rank.html">Learning To Rank</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="transforming-result-documents.html">Transforming Result Documents</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="suggester.html">Suggester</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="morelikethis.html">MoreLikeThis</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="pagination-of-results.html">Pagination of Results</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="collapse-and-expand-results.html">Collapse and Expand Results</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="result-grouping.html">Result Grouping</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="result-clustering.html">Result Clustering</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="spatial-search.html">Spatial Search</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-terms-component.html">The Terms Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-term-vector-component.html">The Term Vector Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-stats-component.html">The Stats Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-query-elevation-component.html">The Query Elevation Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="response-writers.html">Response Writers</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="velocity-response-writer.html">Velocity Response Writer</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="near-real-time-searching.html">Near Real Time Searching</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="realtime-get.html">RealTime Get</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="exporting-result-sets.html">Exporting Result Sets</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="streaming-expressions.html">Streaming Expressions</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="graph-traversal.html">Graph Traversal</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="parallel-sql-interface.html">Parallel SQL Interface</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="solr-jdbc-dbvisualizer.html">Solr JDBC - DbVisualizer</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-squirrel-sql.html">Solr JDBC - SQuirreL SQL</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-apache-zeppelin.html">Solr JDBC - Apache Zeppelin</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-python-jython.html">Solr JDBC - Python/Jython</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-r.html">Solr JDBC - R</a>
            
          </li>
          
        </ul>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="the-well-configured-solr-instance.html">The Well-Configured Solr Instance</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="configuring-solrconfig-xml.html">Configuring solrconfig.xml</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="datadir-and-directoryfactory-in-solrconfig.html">DataDir and DirectoryFactory in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="lib-directives-in-solrconfig.html">Lib Directives in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="schema-factory-definition-in-solrconfig.html">Schema Factory Definition in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="indexconfig-in-solrconfig.html">IndexConfig in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="requesthandlers-and-searchcomponents-in-solrconfig.html">RequestHandlers and SearchComponents in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="initparams-in-solrconfig.html">InitParams in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="updatehandlers-in-solrconfig.html">UpdateHandlers in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="query-settings-in-solrconfig.html">Query Settings in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="requestdispatcher-in-solrconfig.html">RequestDispatcher in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="update-request-processors.html">Update Request Processors</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="codec-factory.html">Codec Factory</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-cores-and-solr-xml.html">Solr Cores and solr.xml</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="format-of-solr-xml.html">Format of solr.xml</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="defining-core-properties.html">Defining core.properties</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="coreadmin-api.html">CoreAdmin API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="config-sets.html">Config Sets</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="configuration-apis.html">Configuration APIs</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="blob-store-api.html">Blob Store API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="config-api.html">Config API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="request-parameters-api.html">Request Parameters API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="managed-resources.html">Managed Resources</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="implicit-requesthandlers.html">Implicit RequestHandlers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-plugins.html">Solr Plugins</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="adding-custom-plugins-in-solrcloud-mode.html">Adding Custom Plugins in SolrCloud Mode</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="jvm-settings.html">JVM Settings</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="managing-solr.html">Managing Solr</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="taking-solr-to-production.html">Taking Solr to Production</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="securing-solr.html">Securing Solr</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="authentication-and-authorization-plugins.html">Authentication and Authorization Plugins</a>
            
            <ul>
              
              <li class="sb-level4">
                <a href="basic-authentication-plugin.html">Basic Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="hadoop-authentication-plugin.html">Hadoop Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="kerberos-authentication-plugin.html">Kerberos Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="rule-based-authorization-plugin.html">Rule-Based Authorization Plugin</a>
                
              </li>
              
            </ul>
            
          </li>
          
          <li class="sb-level3">
            <a href="enabling-ssl.html">Enabling SSL</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="running-solr-on-hdfs.html">Running Solr on HDFS</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="making-and-restoring-backups.html">Making and Restoring Backups</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="configuring-logging.html">Configuring Logging</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-jmx-with-solr.html">Using JMX with Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="mbean-request-handler.html">MBean Request Handler</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="performance-statistics-reference.html">Performance Statistics Reference</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="metrics-reporting.html">Metrics Reporting</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="v2-api.html">v2 API</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="solrcloud.html">SolrCloud</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="getting-started-with-solrcloud.html">Getting Started with SolrCloud</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="how-solrcloud-works.html">How SolrCloud Works</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="shards-and-indexing-data-in-solrcloud.html">Shards and Indexing Data in SolrCloud</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="distributed-requests.html">Distributed Requests</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="read-and-write-side-fault-tolerance.html">Read and Write Side Fault Tolerance</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="solrcloud-configuration-and-parameters.html">SolrCloud Configuration and Parameters</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="setting-up-an-external-zookeeper-ensemble.html">Setting Up an External ZooKeeper Ensemble</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="using-zookeeper-to-manage-configuration-files.html">Using ZooKeeper to Manage Configuration Files</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="zookeeper-access-control.html">ZooKeeper Access Control</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="collections-api.html">Collections API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="parameter-reference.html">Parameter Reference</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="command-line-utilities.html">Command Line Utilities</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solrcloud-with-legacy-configuration-files.html">SolrCloud with Legacy Configuration Files</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="configsets-api.html">ConfigSets API</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="rule-based-replica-placement.html">Rule-based Replica Placement</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="cross-data-center-replication-cdcr-.html">Cross Data Center Replication (CDCR)</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="legacy-scaling-and-distribution.html">Legacy Scaling and Distribution</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="introduction-to-scaling-and-distribution.html">Introduction to Scaling and Distribution</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="distributed-search-with-index-sharding.html">Distributed Search with Index Sharding</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="index-replication.html">Index Replication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="combining-distribution-and-replication.html">Combining Distribution and Replication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="merging-indexes.html">Merging Indexes</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="client-apis.html">Client APIs</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="introduction-to-client-apis.html">Introduction to Client APIs</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="choosing-an-output-format.html">Choosing an Output Format</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="client-api-lineup.html">Client API Lineup</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-javascript.html">Using JavaScript</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-python.html">Using Python</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-solrj.html">Using SolrJ</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-solr-from-ruby.html">Using Solr From Ruby</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="major-changes-from-solr-5-to-solr-6.html">Major Changes from Solr 5 to Solr 6</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="upgrading-a-solr-cluster.html">Upgrading a Solr Cluster</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="indexupgrader-tool.html">IndexUpgrader Tool</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="further-assistance.html">Further Assistance</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="solr-glossary.html">Solr Glossary</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="errata.html">Errata</a>
    
  </li>
  
</ul>


<!-- set the 'active' class on the current page and ancestors -->
<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("#mysidebar a[href='uploading-structured-data-store-data-with-the-data-import-handler.html']").parents('li').toggleClass("active", true);</script>
<!-- set the 'current' class on the current page and 'current-tree' on the current page + it's ancestors -->
<!-- this can let us do css highlighting of the current page in the sidebar even if/when the user clicks around in the sidebar causing other sidebar elements to be 'active' -->
<script>
  $("#mysidebar a[href='uploading-structured-data-store-data-with-the-data-import-handler.html']").parent('li').toggleClass("current", true);
  $("#mysidebar a[href='uploading-structured-data-store-data-with-the-data-import-handler.html']").parents('li').toggleClass("current-tree", true);
</script>

    </div>
    <!-- Content Column -->
    <div class="col-md-9">
      <div class="post-header">
   <h1 class="post-title-main">Uploading Structured Data Store Data with the Data Import Handler</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 2, listType: 'ul', showSpeed: 0, headers: 'h2,h3' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    

<div id="main-content">
  <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Many search applications store the content to be indexed in a structured data store, such as a relational database. The Data Import Handler (DIH) provides a mechanism for importing content from a data store and indexing it. In addition to relational databases, DIH can index content from HTTP based data sources such as RSS and ATOM feeds, e-mail repositories, and structured XML where an XPath processor is used to generate fields.</p>
</div>
<div class="paragraph">
<p>The <code>example/example-DIH</code> directory contains several collections many of the features of the data import handler. To run this &#8220;<code>dih</code>&#8221; example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">bin/solr -e dih</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information about the Data Import Handler, see <a href="https://wiki.apache.org/solr/DataImportHandler" class="bare">https://wiki.apache.org/solr/DataImportHandler</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-ConceptsandTerminology">Concepts and Terminology</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Descriptions of the Data Import Handler use several familiar terms, such as entity and processor, in specific ways, as explained in the table below.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Term</th>
<th class="tableblock halign-left valign-top">Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datasource</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As its name suggests, a datasource defines the location of the data of interest. For a database, it&#8217;s a DSN. For an HTTP datasource, it&#8217;s the base URL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conceptually, an entity is processed to generate a set of documents, containing multiple fields, which (after optionally being transformed in various ways) are sent to Solr for indexing. For a RDBMS data source, an entity is a view or table, which would be processed by one or more SQL statements to generate a set of rows (documents) with one or more columns (fields).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Processor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An entity processor does the work of extracting content from a data source, transforming it, and adding it to the index. Custom entity processors can be written to extend or replace the ones supplied.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transformer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Each set of fields fetched by the entity may optionally be transformed. This process can modify the fields, create new fields, or generate multiple rows/documents form a single row. There are several built-in transformers in the DIH, which perform functions such as modifying dates and stripping HTML. It is possible to write custom transformers using the publicly available interface.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-Configuration">Configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-Configuringsolrconfig.xml">Configuring <code>solrconfig.xml</code></h3>
<div class="paragraph">
<p>The Data Import Handler has to be registered in <code>solrconfig.xml</code>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;requestHandler</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;/dataimport&quot;</span> <span style="color: #7D9029">class=</span><span style="color: #BA2121">&quot;org.apache.solr.handler.dataimport.DataImportHandler&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;lst</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;defaults&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;str</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;config&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>/path/to/my/DIHconfigfile.xml<span style="color: #008000; font-weight: bold">&lt;/str&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;/lst&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/requestHandler&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The only required parameter is the <code>config</code> parameter, which specifies the location of the DIH configuration file that contains specifications for the data source, how to fetch data, what data to fetch, and how to process it to generate the Solr documents to be posted to the index.</p>
</div>
<div class="paragraph">
<p>You can have multiple DIH configuration files. Each file would require a separate definition in the <code>solrconfig.xml</code> file, specifying a path to the file.</p>
</div>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-ConfiguringtheDIHConfigurationFile">Configuring the DIH Configuration File</h3>
<div class="paragraph">
<p>An annotated configuration file, based on the &#8220;<code>db</code>&#8221; collection in the <code>dih</code> example server, is shown below (<code>example/example-DIH/solr/db/conf/db-data-config.xml</code>). It extracts fields from the four tables defining a simple product database, with this schema. More information about the parameters and options shown here are described in the sections following.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;dataConfig&gt;</span>
<span style="color: #408080; font-style: italic">&lt;!-- The first element is the dataSource, in this case an HSQLDB database.</span>
<span style="color: #408080; font-style: italic">     The path to the JDBC driver and the JDBC URL and login credentials are all specified here.</span>
<span style="color: #408080; font-style: italic">     Other permissible attributes include whether or not to autocommit to Solr, the batchsize</span>
<span style="color: #408080; font-style: italic">     used in the JDBC connection, a &#39;readOnly&#39; flag.</span>
<span style="color: #408080; font-style: italic">     The password attribute is optional if there is no password set for the DB.</span>
<span style="color: #408080; font-style: italic">--&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;dataSource</span> <span style="color: #7D9029">driver=</span><span style="color: #BA2121">&quot;org.hsqldb.jdbcDriver&quot;</span> <span style="color: #7D9029">url=</span><span style="color: #BA2121">&quot;jdbc:hsqldb:./example-DIH/hsqldb/ex&quot;</span> <span style="color: #7D9029">user=</span><span style="color: #BA2121">&quot;sa&quot;</span> <span style="color: #7D9029">password=</span><span style="color: #BA2121">&quot;secret&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
<span style="color: #408080; font-style: italic">&lt;!--</span>
<span style="color: #408080; font-style: italic">Alternately the password can be encrypted as follows. This is the value obtained as a result of the command</span>
<span style="color: #408080; font-style: italic">openssl enc -aes-128-cbc -a -salt -in pwd.txt</span>
<span style="color: #408080; font-style: italic">password=&quot;U2FsdGVkX18QMjY0yfCqlfBMvAB4d3XkwY96L7gfO2o=&quot;</span>
<span style="color: #408080; font-style: italic">WHen the password is encrypted, you must provide an extra attribute</span>
<span style="color: #408080; font-style: italic">encryptKeyFile=&quot;/location/of/encryptionkey&quot;</span>
<span style="color: #408080; font-style: italic">This file should a text file with a single line containing the encrypt/decrypt password</span>

<span style="color: #408080; font-style: italic">--&gt;</span>
<span style="color: #408080; font-style: italic">&lt;!-- A &#39;document&#39; element follows, containing multiple &#39;entity&#39; elements.</span>
<span style="color: #408080; font-style: italic">     Note that &#39;entity&#39; elements can be nested, and this allows the entity</span>
<span style="color: #408080; font-style: italic">     relationships in the sample database to be mirrored here, so that we can</span>
<span style="color: #408080; font-style: italic">     generate a denormalized Solr record which may include multiple features</span>
<span style="color: #408080; font-style: italic">     for one item, for instance --&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;document&gt;</span>

<span style="color: #408080; font-style: italic">&lt;!-- The possible attributes for the entity element are described below.</span>
<span style="color: #408080; font-style: italic">     Entity elements may contain one or more &#39;field&#39; elements, which map</span>
<span style="color: #408080; font-style: italic">     the data source field names to Solr fields, and optionally specify</span>
<span style="color: #408080; font-style: italic">     per-field transformations --&gt;</span>
<span style="color: #408080; font-style: italic">&lt;!-- this entity is the &#39;root&#39; entity. --&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;item&quot;</span> <span style="color: #7D9029">query=</span><span style="color: #BA2121">&quot;select * from item&quot;</span>
            <span style="color: #7D9029">deltaQuery=</span><span style="color: #BA2121">&quot;select id from item where last_modified &gt; &#39;${dataimporter.last_index_time}&#39;&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;NAME&quot;</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;name&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>

<span style="color: #408080; font-style: italic">&lt;!-- This entity is nested and reflects the one-to-many relationship between an item and its multiple features.</span>
<span style="color: #408080; font-style: italic">     Note the use of variables; ${item.ID} is the value of the column &#39;ID&#39; for the current item</span>
<span style="color: #408080; font-style: italic">     (&#39;item&#39; referring to the entity name)  --&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;feature&quot;</span>
              <span style="color: #7D9029">query=</span><span style="color: #BA2121">&quot;select DESCRIPTION from FEATURE where ITEM_ID=&#39;${item.ID}&#39;&quot;</span>
              <span style="color: #7D9029">deltaQuery=</span><span style="color: #BA2121">&quot;select ITEM_ID from FEATURE where last_modified &gt; &#39;${dataimporter.last_index_time}&#39;&quot;</span>
              <span style="color: #7D9029">parentDeltaQuery=</span><span style="color: #BA2121">&quot;select ID from item where ID=${feature.ITEM_ID}&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
        <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;features&quot;</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;DESCRIPTION&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;item_category&quot;</span>
              <span style="color: #7D9029">query=</span><span style="color: #BA2121">&quot;select CATEGORY_ID from item_category where ITEM_ID=&#39;${item.ID}&#39;&quot;</span>
              <span style="color: #7D9029">deltaQuery=</span><span style="color: #BA2121">&quot;select ITEM_ID, CATEGORY_ID from item_category where last_modified &gt; &#39;${dataimporter.last_index_time}&#39;&quot;</span>
              <span style="color: #7D9029">parentDeltaQuery=</span><span style="color: #BA2121">&quot;select ID from item where ID=${item_category.ITEM_ID}&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
        <span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;category&quot;</span>
                <span style="color: #7D9029">query=</span><span style="color: #BA2121">&quot;select DESCRIPTION from category where ID = &#39;${item_category.CATEGORY_ID}&#39;&quot;</span>
                <span style="color: #7D9029">deltaQuery=</span><span style="color: #BA2121">&quot;select ID from category where last_modified &gt; &#39;${dataimporter.last_index_time}&#39;&quot;</span>
                <span style="color: #7D9029">parentDeltaQuery=</span><span style="color: #BA2121">&quot;select ITEM_ID, CATEGORY_ID from item_category where CATEGORY_ID=${category.ID}&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
          <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;description&quot;</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;cat&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
        <span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;/document&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/dataConfig&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Datasources can still be specified in <code>solrconfig.xml</code>. These must be specified in the defaults section of the handler in <code>solrconfig.xml</code>. However, these are not parsed until the main configuration is loaded.</p>
</div>
<div class="paragraph">
<p>The entire configuration itself can be passed as a request parameter using the <code>dataConfig</code> parameter rather than using a file. When configuration errors are encountered, the error message is returned in XML format.</p>
</div>
<div class="paragraph">
<p>A <code>reload-config</code> command is also supported, which is useful for validating a new configuration file, or if you want to specify a file, load it, and not have it reloaded again on import. If there is an <code>xml</code> mistake in the configuration a user-friendly message is returned in <code>xml</code> format. You can then fix the problem and do a <code>reload-config</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can also view the DIH configuration in the Solr Admin UI and there is an interface to import content.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-RequestParameters">Request Parameters</h4>
<div class="paragraph">
<p>Request parameters can be substituted in configuration with placeholder <code>${dataimporter.request.paramname}</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;dataSource</span> <span style="color: #7D9029">driver=</span><span style="color: #BA2121">&quot;org.hsqldb.jdbcDriver&quot;</span> <span style="color: #7D9029">url=</span><span style="color: #BA2121">&quot;${dataimporter.request.jdbcurl}&quot;</span> <span style="color: #7D9029">user=</span><span style="color: #BA2121">&quot;${dataimporter.request.jdbcuser}&quot;</span> <span style="color: #7D9029">password=</span><span style="color: #BA2121">${dataimporter.request.jdbcpassword}</span> <span style="color: #008000; font-weight: bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, these parameters can be passed to the full-import command or defined in the <code>&lt;defaults&gt;</code> section in <code>solrconfig.xml</code>. This example shows the parameters with the full-import command:</p>
</div>
<div class="paragraph">
<p><code>dataimport?command=full-import&amp;jdbcurl=jdbc:hsqldb:./example-DIH/hsqldb/ex&amp;jdbcuser=sa&amp;jdbcpassword=secret</code></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-DataImportHandlerCommands">Data Import Handler Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>DIH commands are sent to Solr via an HTTP request. The following operations are supported.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Command</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>abort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aborts an ongoing operation. The URL is <code><a href="http://&lt;host&gt;:&lt;port&gt;/" class="bare">http://&lt;host&gt;:&lt;port&gt;/</a></code> <code>solr/</code> <code>&lt;collection_name&gt;/</code> <code>dataimport?</code> <code>command=abort</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>delta-import</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For incremental imports and change detection. The command is of the form <code><a href="http://&lt;host&gt;:&lt;port&gt;/" class="bare">http://&lt;host&gt;:&lt;port&gt;/</a></code> <code>solr/</code> <code>&lt;collection_name&gt;/</code> <code>dataimport?</code> <code>command=delta-import</code>. It supports the same clean, commit, optimize and debug parameters as full-import command. Only the SqlEntityProcessor supports delta imports.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>full-import</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Full Import operation can be started with a URL of the form <code><a href="http://&lt;host&gt;:&lt;port&gt;/" class="bare">http://&lt;host&gt;:&lt;port&gt;/</a></code> <code>solr/</code> <code>&lt;collection_name&gt;/</code> <code>dataimport?</code> <code>command=full-import</code>. The command returns immediately. The operation will be started in a new thread and the <em>status</em> attribute in the response should be shown as <em>busy</em>. The operation may take some time depending on the size of dataset. Queries to Solr are not blocked during full-imports. When a full-import command is executed, it stores the start time of the operation in a file located at <code>conf/dataimport.properties</code>. This stored timestamp is used when a delta-import operation is executed. For a list of parameters that can be passed to this command, see below.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reload-config</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>If the configuration file has been changed and you wish to reload it without restarting Solr, run the command</p>
</div>
<div class="paragraph">
<p><code><a href="http://&lt;host&gt;:&lt;port&gt;/solr/&lt;collection_name&gt;/command=reload-config" class="bare">http://&lt;host&gt;:&lt;port&gt;/solr/&lt;collection_name&gt;/command=reload-config</a></code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>status</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The URL is <code><a href="http://&lt;host&gt;:&lt;port&gt;/" class="bare">http://&lt;host&gt;:&lt;port&gt;/</a></code> <code>solr/</code> <code>&lt;collection_name&gt;/</code> <code>dataimport?</code> <code>command=status</code>. It returns statistics on the number of documents created, deleted, queries run, rows fetched, status, and so on.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>show-config</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">responds with configuration</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-Parametersforthefull-importCommand">Parameters for the <code>full-import</code> Command</h3>
<div class="paragraph">
<p>The <code>full-import</code> command accepts the following parameters:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">clean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default is true. Tells whether to clean up the index before the indexing is started.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">commit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default is true. Tells whether to commit after the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">debug</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default is false Runs the command in debug mode. It is used by the interactive development mode. Note that in debug mode, documents are never committed automatically. If you want to run debug mode and commit the results too, add <code>commit=true</code> as a request parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of an entity directly under the <code>&lt;document&gt;</code> tag in the configuration file. Use this to execute one or more entities selectively. Multiple "entity" parameters can be passed on to run multiple entities at once. If nothing is passed, all entities are executed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">optimize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default is true. Tells Solr whether to optimize after the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">synchronous</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blocks request until import is completed. Default is <code>false</code>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-PropertyWriter">Property Writer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>propertyWriter</code> element defines the date format and locale for use with delta queries. It is an optional configuration. Add the element to the DIH configuration file, directly under the <code>dataConfig</code> element.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;propertyWriter</span> <span style="color: #7D9029">dateFormat=</span><span style="color: #BA2121">&quot;yyyy-MM-dd HH:mm:ss&quot;</span> <span style="color: #7D9029">type=</span><span style="color: #BA2121">&quot;SimplePropertiesWriter&quot;</span> <span style="color: #7D9029">directory=</span><span style="color: #BA2121">&quot;data&quot;</span> <span style="color: #7D9029">filename=</span><span style="color: #BA2121">&quot;my_dih.properties&quot;</span> <span style="color: #7D9029">locale=</span><span style="color: #BA2121">&quot;en-US&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The parameters available are:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dateFormat</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A java.text.SimpleDateFormat to use when converting the date to text. The default is "yyyy-MM-dd HH:mm:ss".</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The implementation class. Use <code>SimplePropertiesWriter</code> for non-SolrCloud installations. If using SolrCloud, use <code>ZKPropertiesWriter</code>. If this is not specified, it will default to the appropriate class depending on if SolrCloud mode is enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">directory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used with the <code>SimplePropertiesWriter</code> only). The directory for the properties file. If not specified, the default is "conf".</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filename</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used with the <code>SimplePropertiesWriter</code> only). The name of the properties file. If not specified, the default is the requestHandler name (as defined in <code>solrconfig.xml</code>, appended by ".properties" (i.e., "dataimport.properties").</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">locale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The locale. If not defined, the ROOT locale is used. It must be specified as language-country (<a href="https://tools.ietf.org/html/bcp47">BCP 47 language tag</a>). For example, <code>en-US</code>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-DataSources">Data Sources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A data source specifies the origin of data and its type. Somewhat confusingly, some data sources are configured within the associated entity processor. Data sources can also be specified in <code>solrconfig.xml</code>, which is useful when you have multiple environments (for example, development, QA, and production) differing only in their data sources.</p>
</div>
<div class="paragraph">
<p>You can create a custom data source by writing a class that extends <code>org.apache.solr.handler.dataimport.DataSource</code>.</p>
</div>
<div class="paragraph">
<p>The mandatory attributes for a data source definition are its name and type. The name identifies the data source to an Entity element.</p>
</div>
<div class="paragraph">
<p>The types of data sources available are described below.</p>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-ContentStreamDataSource">ContentStreamDataSource</h3>
<div class="paragraph">
<p>This takes the POST data as the data source. This can be used with any EntityProcessor that uses a <code>DataSource&lt;Reader&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-FieldReaderDataSource">FieldReaderDataSource</h3>
<div class="paragraph">
<p>This can be used where a database field contains XML which you wish to process using the XPathEntityProcessor. You would set up a configuration with both JDBC and FieldReader data sources, and two entities, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;dataSource</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;a1&quot;</span> <span style="color: #7D9029">driver=</span><span style="color: #BA2121">&quot;org.hsqldb.jdbcDriver&quot;</span> <span style="border: 1px solid #FF0000">...</span>  <span style="color: #008000; font-weight: bold">/&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;dataSource</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;a2&quot;</span> <span style="color: #7D9029">type=</span><span style="color: #BA2121">FieldReaderDataSource&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;document&gt;</span>

  <span style="color: #408080; font-style: italic">&lt;!-- processor for database --&gt;</span>

  <span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name =</span><span style="color: #BA2121">&quot;e1&quot;</span> <span style="color: #7D9029">dataSource=</span><span style="color: #BA2121">&quot;a1&quot;</span> <span style="color: #7D9029">processor=</span><span style="color: #BA2121">&quot;SqlEntityProcessor&quot;</span> <span style="color: #7D9029">pk=</span><span style="color: #BA2121">&quot;docid&quot;</span>
          <span style="color: #7D9029">query=</span><span style="color: #BA2121">&quot;select * from t1 ...&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>

    <span style="color: #408080; font-style: italic">&lt;!-- nested XpathEntity; the field in the parent which is to be used for</span>
<span style="color: #408080; font-style: italic">         Xpath is set in the &quot;datafield&quot; attribute in place of the &quot;url&quot; attribute --&gt;</span>

    <span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;e2&quot;</span> <span style="color: #7D9029">dataSource=</span><span style="color: #BA2121">&quot;a2&quot;</span> <span style="color: #7D9029">processor=</span><span style="color: #BA2121">&quot;XPathEntityProcessor&quot;</span>
            <span style="color: #7D9029">dataField=</span><span style="color: #BA2121">&quot;e1.fieldToUseForXPath&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>

      <span style="color: #408080; font-style: italic">&lt;!-- Xpath configuration follows --&gt;</span>
      ...
    <span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The FieldReaderDataSource can take an <code>encoding</code> parameter, which will default to "UTF-8" if not specified.It must be specified as language-country. For example, <code>en-US</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-FileDataSource">FileDataSource</h3>
<div class="paragraph">
<p>This can be used like an <a href="#UploadingStructuredDataStoreDatawiththeDataImportHandler-URLDataSource">URLDataSource</a>, but is used to fetch content from files on disk. The only difference from URLDataSource, when accessing disk files, is how a pathname is specified.</p>
</div>
<div class="paragraph">
<p>This data source accepts these optional attributes.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Optional Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">basePath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The base path relative to which the value is evaluated if it is not absolute.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">encoding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the character encoding to use. If not defined, UTF-8 is used.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-JdbcDataSource">JdbcDataSource</h3>
<div class="paragraph">
<p>This is the default datasource. It&#8217;s used with the <a href="#UploadingStructuredDataStoreDatawiththeDataImportHandler-TheSQLEntityProcessor">SqlEntityProcessor</a>. See the example in the <a href="#UploadingStructuredDataStoreDatawiththeDataImportHandler-FieldReaderDataSource">FieldReaderDataSource</a> section for details on configuration. <code>JdbcDatasource</code> supports at least the following attributes: .</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attributes</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">driver, url, user, password, encryptKeyFile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usual jdbc connection properties</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="literalblock">
<div class="content">
<pre>batchSize</pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Passed to Statement#setFetchSize, default value 500.</p>
</div>
<div class="paragraph">
<p>For MySQL driver, which doesn&#8217;t honor fetchSize and pulls whole resultSet, which often lead to OutOfMemoryError.</p>
</div>
<div class="paragraph">
<p>In this case, set batchSize=-1 that pass setFetchSize(Integer.MIN_VALUE), and switch result set to pull row by row</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>All of them substitute properties via ${placeholders}.</p>
</div>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-URLDataSource">URLDataSource</h3>
<div class="paragraph">
<p>This data source is often used with XPathEntityProcessor to fetch content from an underlying <code>file://</code> or <code>http://</code> location. Here&#8217;s an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;dataSource</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;a&quot;</span>
            <span style="color: #7D9029">type=</span><span style="color: #BA2121">&quot;URLDataSource&quot;</span>
            <span style="color: #7D9029">baseUrl=</span><span style="color: #BA2121">&quot;http://host:port/&quot;</span>
            <span style="color: #7D9029">encoding=</span><span style="color: #BA2121">&quot;UTF-8&quot;</span>
            <span style="color: #7D9029">connectionTimeout=</span><span style="color: #BA2121">&quot;5000&quot;</span>
            <span style="color: #7D9029">readTimeout=</span><span style="color: #BA2121">&quot;10000&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The URLDataSource type accepts these optional parameters:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Optional Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">baseURL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a new baseURL for pathnames. You can use this to specify host/port changes between Dev/QA/Prod environments. Using this attribute isolates the changes to be made to the <code>solrconfig.xml</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">connectionTimeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the length of time in milliseconds after which the connection should time out. The default value is 5000ms.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">encoding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By default the encoding in the response header is used. You can use this property to override the default encoding.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">readTimeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the length of time in milliseconds after which a read operation should time out. The default value is 10000ms.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-EntityProcessors">Entity Processors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Entity processors extract data, transform it, and add it to a Solr index. Examples of entities include views or tables in a data store.</p>
</div>
<div class="paragraph">
<p>Each processor has its own set of attributes, described in its own section below. In addition, there are non-specific attributes common to all entities which may be specified.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dataSource</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of a data source. If there are multiple data sources defined, use this attribute with the name of the data source for this entity.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required. The unique name used to identify an entity.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The primary key for the entity. It is optional, and required only when using delta-imports. It has no relation to the uniqueKey defined in <code>schema.xml</code> but they can both be the same. It is mandatory if you do delta-imports and then refers to the column name in <code>${dataimporter.delta.&lt;column-name&gt;</code>} which is used as the primary key.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">processor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default is SqlEntityProcessor. Required only if the datasource is not RDBMS.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onError</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Permissible values are (abort</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">skip</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">continue) . The default value is 'abort'. 'Skip' skips the current document. 'Continue' ignores the error and processing continues.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">preImportDeleteQuery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Before a full-import command, use this query this to cleanup the index instead of using '<strong>:</strong>'. This is honored only on an entity that is an immediate sub-child of <code>&lt;document&gt;</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">postImportDeleteQuery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Similar to the above, but executed after the import has completed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rootEntity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By default the entities immediately under the <code>&lt;document&gt;</code> are root entities. If this attribute is set to false, the entity directly falling under that entity will be treated as the root entity (and so on). For every row returned by the root entity, a document is created in Solr.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transformer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. One or more transformers to be applied on this entity.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cacheImpl</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. A class (which must implement <code>DIHCache</code>) to use for caching this entity when doing lookups from an entity which wraps it. Provided implementation is &#8220;<code>SortedMapBackedCache</code>&#8221;.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cacheKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of a property of this entity to use as a cache key if <code>cacheImpl</code> is specified.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cacheLookup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An entity + property name that will be used to lookup cached instances of this entity if <code>cacheImpl</code> is specified.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">where</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">an alternative way to specify <code>cacheKey</code> and <code>cacheLookup</code> concatenated with '='. eg <code>where="CODE=People.COUNTRY_CODE"</code> is equal to <code>cacheKey="CODE" cacheLookup="People.COUNTRY_CODE"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">child="true"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables indexing document blocks aka <a href="uploading-data-with-index-handlers.html#uploading-data-with-index-handlers">Nested Child Documents</a> for searching with <a href="other-parsers.html#other-parsers">Block Join Query Parsers</a>. It can be only specified on <code>&lt;entity&gt;</code> under another root entity. It switches from default behavior (merging field values) to nesting documents as children documents. Note: parent <code>&lt;entity&gt;</code> should add a field which is used as a parent filter in query time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">join="zipper"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables merge join aka "zipper" algorithm for joining parent and child entities without cache. It should be specified at child (nested) <code>&lt;entity&gt;</code>. It implies that parent and child queries return results ordered by keys, otherwise it throws an exception. Keys should be specified either with <code>where</code> attribute or with <code>cacheKey</code> and <code>cacheLookup</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Caching of entities in DIH is provided to avoid repeated lookups for same entities again and again. The default <code>SortedMapBackedCache</code> is a <code>HashMap</code> where a key is a field in the row and the value is a bunch of rows for that same key.</p>
</div>
<div class="paragraph">
<p>In the example below, each <code>manufacturer</code> entity is cached using the &#8216;id&#8217; property as a cache key. Cache lookups will be performed for each <code>product</code> entity based on the product&#8217;s &#8220;<code>manu</code>&#8221; property. When the cache has no data for a particular key, the query is run and the cache is populated</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;product&quot;</span> <span style="color: #7D9029">query=</span><span style="color: #BA2121">&quot;select description,sku, manu from product&quot;</span> <span style="color: #008000; font-weight: bold">&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;manufacturer&quot;</span> <span style="color: #7D9029">query=</span><span style="color: #BA2121">&quot;select id, name from manufacturer&quot;</span> <span style="color: #7D9029">cacheKey=</span><span style="color: #BA2121">&quot;id&quot;</span> <span style="color: #7D9029">cacheLookup=</span><span style="color: #BA2121">&quot;product.manu&quot;</span> <span style="color: #7D9029">cacheImpl=</span><span style="color: #BA2121">&quot;SortedMapBackedCache&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-TheSQLEntityProcessor">The SQL Entity Processor</h3>
<div class="paragraph">
<p>The SqlEntityProcessor is the default processor. The associated <a href="#UploadingStructuredDataStoreDatawiththeDataImportHandler-JdbcDataSource">data source</a> should be a JDBC URL.</p>
</div>
<div class="paragraph">
<p>The entity attributes specific to this processor are shown in the table below.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">query</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required. The SQL query used to select rows.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deltaQuery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQL query used if the operation is delta-import. This query selects the primary keys of the rows which will be parts of the delta-update. The pks will be available to the deltaImportQuery through the variable <code>${dataimporter.delta.&lt;column-name&gt;</code>}.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">parentDeltaQuery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQL query used if the operation is delta-import.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deletedPkQuery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQL query used if the operation is delta-import.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deltaImportQuery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQL query used if the operation is delta-import. If this is not present, DIH tries to construct the import query by(after identifying the delta) modifying the 'query' (this is error prone). There is a namespace <code>${dataimporter.delta.&lt;column-name&gt;</code>} which can be used in this query. For example, <code>select * from tbl where id=${dataimporter.delta.id</code>}.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-TheXPathEntityProcessor">The XPathEntityProcessor</h3>
<div class="paragraph">
<p>This processor is used when indexing XML formatted data. The data source is typically <a href="#UploadingStructuredDataStoreDatawiththeDataImportHandler-URLDataSource">URLDataSource</a> or <a href="#UploadingStructuredDataStoreDatawiththeDataImportHandler-FileDataSource">FileDataSource</a>. Xpath can also be used with the <a href="#UploadingStructuredDataStoreDatawiththeDataImportHandler-TheFileListEntityProcessor">FileListEntityProcessor</a> described below, to generate a document from each file.</p>
</div>
<div class="paragraph">
<p>The entity attributes unique to this processor are shown below.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Processor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required. Must be set to "XpathEntityProcessor".</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required. HTTP URL or file location.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">stream</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional: Set to true for a large file or download.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">forEach</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required unless you define <code>useSolrAddSchema</code>. The Xpath expression which demarcates each record. This will be used to set up the processing loop.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">xsl</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional: Its value (a URL or filesystem path) is the name of a resource used as a preprocessor for applying the XSL transformation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">useSolrAddSchema</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set this to true if the content is in the form of the standard Solr update XML schema.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Each field element in the entity can have the following attributes as well as the default ones.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">xpath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required. The XPath expression which will extract the content from the record for this field. Only a subset of Xpath syntax is supported.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">commonField</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. If true, then when this field is encountered in a record it will be copied to future records when creating a Solr document.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">flatten</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Optional: If set to true, then any children text nodes are collected to form the value of a field. image::images/icons/emoticons/warning.png[(warning)]
 The default value is false, meaning that</p>
</div>
<div class="paragraph">
<p>if there are any sub-elements of the node pointed to by the XPath expression, they will be quietly omitted.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Here is an example from the &#8220;<code>rss</code>&#8221; collection in the <code>dih</code> example (<code>example/example-DIH/solr/rss/conf/rss-data-config.xml</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #408080; font-style: italic">&lt;!-- slashdot RSS Feed ---&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;dataConfig&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;dataSource</span> <span style="color: #7D9029">type=</span><span style="color: #BA2121">&quot;HttpDataSource&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;document&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;slashdot&quot;</span>
              <span style="color: #7D9029">pk=</span><span style="color: #BA2121">&quot;link&quot;</span>
              <span style="color: #7D9029">url=</span><span style="color: #BA2121">&quot;http://rss.slashdot.org/Slashdot/slashdot&quot;</span>
              <span style="color: #7D9029">processor=</span><span style="color: #BA2121">&quot;XPathEntityProcessor&quot;</span>

              <span style="border: 1px solid #FF0000">&lt;!--</span> <span style="border: 1px solid #FF0000">forEach</span> <span style="border: 1px solid #FF0000">sets</span> <span style="border: 1px solid #FF0000">up</span> <span style="border: 1px solid #FF0000">a</span> <span style="border: 1px solid #FF0000">processing</span> <span style="border: 1px solid #FF0000">loop</span> <span style="border: 1px solid #FF0000">;</span> <span style="border: 1px solid #FF0000">here</span> <span style="border: 1px solid #FF0000">there</span> <span style="border: 1px solid #FF0000">are</span> <span style="border: 1px solid #FF0000">two</span> <span style="border: 1px solid #FF0000">expressions--</span><span style="color: #008000; font-weight: bold">&gt;</span>
              forEach=&quot;/RDF/channel | /RDF/item&quot;
              transformer=&quot;DateFormatTransformer&quot;&gt;
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;source&quot;</span> <span style="color: #7D9029">xpath=</span><span style="color: #BA2121">&quot;/RDF/channel/title&quot;</span> <span style="color: #7D9029">commonField=</span><span style="color: #BA2121">&quot;true&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;source-link&quot;</span> <span style="color: #7D9029">xpath=</span><span style="color: #BA2121">&quot;/RDF/channel/link&quot;</span> <span style="color: #7D9029">commonField=</span><span style="color: #BA2121">&quot;true&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;subject&quot;</span> <span style="color: #7D9029">xpath=</span><span style="color: #BA2121">&quot;/RDF/channel/subject&quot;</span> <span style="color: #7D9029">commonField=</span><span style="color: #BA2121">&quot;true&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;title&quot;</span> <span style="color: #7D9029">xpath=</span><span style="color: #BA2121">&quot;/RDF/item/title&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;link&quot;</span> <span style="color: #7D9029">xpath=</span><span style="color: #BA2121">&quot;/RDF/item/link&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;description&quot;</span> <span style="color: #7D9029">xpath=</span><span style="color: #BA2121">&quot;/RDF/item/description&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;creator&quot;</span> <span style="color: #7D9029">xpath=</span><span style="color: #BA2121">&quot;/RDF/item/creator&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;item-subject&quot;</span> <span style="color: #7D9029">xpath=</span><span style="color: #BA2121">&quot;/RDF/item/subject&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;date&quot;</span> <span style="color: #7D9029">xpath=</span><span style="color: #BA2121">&quot;/RDF/item/date&quot;</span>
             <span style="color: #7D9029">dateTimeFormat=</span><span style="color: #BA2121">&quot;yyyy-MM-dd&#39;T&#39;hh:mm:ss&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;slash-department&quot;</span> <span style="color: #7D9029">xpath=</span><span style="color: #BA2121">&quot;/RDF/item/department&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;slash-section&quot;</span> <span style="color: #7D9029">xpath=</span><span style="color: #BA2121">&quot;/RDF/item/section&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;slash-comments&quot;</span> <span style="color: #7D9029">xpath=</span><span style="color: #BA2121">&quot;/RDF/item/comments&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;/document&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/dataConfig&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-TheMailEntityProcessor">The MailEntityProcessor</h3>
<div class="paragraph">
<p>The MailEntityProcessor uses the Java Mail API to index email messages using the IMAP protocol. The MailEntityProcessor works by connecting to a specified mailbox using a username and password, fetching the email headers for each message, and then fetching the full email contents to construct a document (one document for each mail message).</p>
</div>
<div class="paragraph">
<p>Here is an example from the &#8220;<code>mail</code>&#8221; collection of the <code>dih</code> example (<code>example/example-DIH/mail/conf/mail-data-config.xml</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;dataConfig&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;document&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">processor=</span><span style="color: #BA2121">&quot;MailEntityProcessor&quot;</span>
              <span style="color: #7D9029">user=</span><span style="color: #BA2121">&quot;email@gmail.com&quot;</span>
              <span style="color: #7D9029">password=</span><span style="color: #BA2121">&quot;password&quot;</span>
              <span style="color: #7D9029">host=</span><span style="color: #BA2121">&quot;imap.gmail.com&quot;</span>
              <span style="color: #7D9029">protocol=</span><span style="color: #BA2121">&quot;imaps&quot;</span>
              <span style="color: #7D9029">fetchMailsSince=</span><span style="color: #BA2121">&quot;2009-09-20 00:00:00&quot;</span>
              <span style="color: #7D9029">batchSize=</span><span style="color: #BA2121">&quot;20&quot;</span>
              <span style="color: #7D9029">folders=</span><span style="color: #BA2121">&quot;inbox&quot;</span>
              <span style="color: #7D9029">processAttachement=</span><span style="color: #BA2121">&quot;false&quot;</span>
              <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;sample_entity&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;/document&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/dataConfig&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The entity attributes unique to the MailEntityProcessor are shown below.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">processor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required. Must be set to "MailEntityProcessor".</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required. Username for authenticating to the IMAP server; this is typically the email address of the mailbox owner.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required. Password for authenticating to the IMAP server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required. The IMAP server to connect to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">protocol</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required. The IMAP protocol to use, valid values are: imap, imaps, gimap, and gimaps.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fetchMailsSince</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Date/time used to set a filter to import messages that occur after the specified date; expected format is: <code>yyyy-MM-dd HH:mm:ss</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">folders</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required. Comma-delimited list of folder names to pull messages from, such as "inbox".</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">recurse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional (default is true). Flag to indicate if the processor should recurse all child folders when looking for messages to import.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">include</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Comma-delimited list of folder patterns to include when processing folders (can be a literal value or regular expression).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">exclude</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. Comma-delimited list of folder patterns to exclude when processing folders (can be a literal value or regular expression); excluded folder patterns take precedence over include folder patterns.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>processAttachement</p>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="paragraph">
<p>processAttachments</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional (default is true). Use Tika to process message attachments.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeContent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional (default is true). Include the message body when constructing Solr documents for indexing.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-ImportingNewEmailsOnly">Importing New Emails Only</h4>
<div class="paragraph">
<p>After running a full import, the MailEntityProcessor keeps track of the timestamp of the previous import so that subsequent imports can use the fetchMailsSince filter to only pull new messages from the mail server. This occurs automatically using the Data Import Handler dataimport.properties file (stored in conf). For instance, if you set fetchMailsSince=2014-08-22 00:00:00 in your mail-data-config.xml, then all mail messages that occur after this date will be imported on the first run of the importer. Subsequent imports will use the date of the previous import as the fetchMailsSince filter, so that only new emails since the last import are indexed each time.</p>
</div>
</div>
<div class="sect3">
<h4 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-GMailExtensions">GMail Extensions</h4>
<div class="paragraph">
<p>When connecting to a GMail account, you can improve the efficiency of the MailEntityProcessor by setting the protocol to <strong>gimap</strong> or <strong>gimaps</strong>. This allows the processor to send the fetchMailsSince filter to the GMail server to have the date filter applied on the server, which means the processor only receives new messages from the server. However, GMail only supports date granularity, so the server-side filter may return previously seen messages if run more than once a day.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-TheTikaEntityProcessor">The TikaEntityProcessor</h3>
<div class="paragraph">
<p>The TikaEntityProcessor uses Apache Tika to process incoming documents. This is similar to <a href="uploading-data-with-solr-cell-using-apache-tika.html#uploading-data-with-solr-cell-using-apache-tika">Uploading Data with Solr Cell using Apache Tika</a>, but using the DataImportHandler options instead.</p>
</div>
<div class="paragraph">
<p>Here is an example from the &#8220;<code>tika</code>&#8221; collection of the <code>dih</code> example (<code>example/example-DIH/tika/conf/tika-data-config.xml</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;dataConfig&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;dataSource</span> <span style="color: #7D9029">type=</span><span style="color: #BA2121">&quot;BinFileDataSource&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;document&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;tika-test&quot;</span> <span style="color: #7D9029">processor=</span><span style="color: #BA2121">&quot;TikaEntityProcessor&quot;</span>
            <span style="color: #7D9029">url=</span><span style="color: #BA2121">&quot;../contrib/extraction/src/test-files/extraction/solr-word.pdf&quot;</span> <span style="color: #7D9029">format=</span><span style="color: #BA2121">&quot;text&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;Author&quot;</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;author&quot;</span> <span style="color: #7D9029">meta=</span><span style="color: #BA2121">&quot;true&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;title&quot;</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;title&quot;</span> <span style="color: #7D9029">meta=</span><span style="color: #BA2121">&quot;true&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;text&quot;</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;text&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;/document&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/dataConfig&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The parameters for this processor are described in the table below:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dataSource</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>This parameter defines the data source and an optional name which can be referred to in later parts of the configuration if needed. This is the same dataSource explained in the description of general entity processor attributes above. The available data source types for this processor are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>BinURLDataSource: used for HTTP resources, but can also be used for files.</p>
</li>
<li>
<p>BinContentStreamDataSource: used for uploading content as a stream.</p>
</li>
<li>
<p>BinFileDataSource: used for content on the local filesystem.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path to the source file(s), as a file path or a traditional internet URL. This parameter is required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">htmlMapper</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows control of how Tika parses HTML. The "default" mapper strips much of the HTML from documents while the "identity" mapper passes all HTML as-is with no modifications. If this parameter is defined, it must be either <strong>default</strong> or <strong>identity</strong>; if it is absent, "default" is assumed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">format</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The output format. The options are <strong>text</strong>, <strong>xml</strong>, <strong>html</strong> or <strong>none</strong>. The default is "text" if not defined. The format "none" can be used if metadata only should be indexed and not the body of the documents.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">parser</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default parser is <code>org.apache.tika.parser.AutoDetectParser</code>. If a custom or other parser should be used, it should be entered as a fully-qualified name of the class and path.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The list of fields from the input documents and how they should be mapped to Solr fields. If the attribute <code>meta</code> is defined as "true", the field will be obtained from the metadata of the document and not parsed from the body of the main text.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">extractEmbedded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instructs the TikaEntityProcessor to extract embedded documents or attachments when <strong>true</strong>. If false, embedded documents and attachments will be ignored.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onError</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By default, the TikaEntityProcessor will stop processing documents if it finds one that generates an error. If you define <code>onError</code> to "skip", the TikaEntityProcessor will instead skip documents that fail processing and log a message that the document was skipped.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-TheFileListEntityProcessor">The FileListEntityProcessor</h3>
<div class="paragraph">
<p>This processor is basically a wrapper, and is designed to generate a set of files satisfying conditions specified in the attributes which can then be passed to another processor, such as the <a href="#UploadingStructuredDataStoreDatawiththeDataImportHandler-TheXPathEntityProcessor">XPathEntityProcessor</a>. The entity information for this processor would be nested within the FileListEnitity entry. It generates five implicit fields: <code>fileAbsolutePath, <code>fileDir, fileSize, </code>fileLastModified, ``file,</code> which can be used in the nested processor. This processor does not use a data source.</p>
</div>
<div class="paragraph">
<p>The attributes specific to this processor are described in the table below:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fileName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required. A regular expression pattern to identify files to be included.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">basedir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required. The base directory (absolute path).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">recursive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to search directories recursively. Default is 'false'.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">excludes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A regular expression pattern to identify files which will be excluded.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">newerThan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A date in the format <code>yyyy-MM-ddHH:mm:ss</code> or a date math expression (<code>NOW - 2YEARS</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">olderThan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A date, using the same formats as newerThan.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rootEntity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This should be set to false. This ensures that each row (filepath) emitted by this processor is considered to be a document.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dataSource</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must be set to null.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The example below shows the combination of the FileListEntityProcessor with another processor which will generate a set of fields from each file found.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;dataConfig&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;dataSource</span> <span style="color: #7D9029">type=</span><span style="color: #BA2121">&quot;FileDataSource&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;document&gt;</span>
    <span style="color: #408080; font-style: italic">&lt;!-- this outer processor generates a list of files satisfying the conditions</span>
<span style="color: #408080; font-style: italic">         specified in the attributes --&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;f&quot;</span> <span style="color: #7D9029">processor=</span><span style="color: #BA2121">&quot;FileListEntityProcessor&quot;</span>
            <span style="color: #7D9029">fileName=</span><span style="color: #BA2121">&quot;.*xml&quot;</span>
            <span style="color: #7D9029">newerThan=</span><span style="color: #BA2121">&quot;&#39;NOW-30DAYS&#39;&quot;</span>
            <span style="color: #7D9029">recursive=</span><span style="color: #BA2121">&quot;true&quot;</span>
            <span style="color: #7D9029">rootEntity=</span><span style="color: #BA2121">&quot;false&quot;</span>
            <span style="color: #7D9029">dataSource=</span><span style="color: #BA2121">&quot;null&quot;</span>
            <span style="color: #7D9029">baseDir=</span><span style="color: #BA2121">&quot;/my/document/directory&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>

      <span style="color: #408080; font-style: italic">&lt;!-- this processor extracts content using Xpath from each file found --&gt;</span>

      <span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;nested&quot;</span> <span style="color: #7D9029">processor=</span><span style="color: #BA2121">&quot;XPathEntityProcessor&quot;</span>
              <span style="color: #7D9029">forEach=</span><span style="color: #BA2121">&quot;/rootelement&quot;</span> <span style="color: #7D9029">url=</span><span style="color: #BA2121">&quot;${f.fileAbsolutePath}&quot;</span> <span style="color: #008000; font-weight: bold">&gt;</span>
        <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;name&quot;</span> <span style="color: #7D9029">xpath=</span><span style="color: #BA2121">&quot;/rootelement/name&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
        <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;number&quot;</span> <span style="color: #7D9029">xpath=</span><span style="color: #BA2121">&quot;/rootelement/number&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;/document&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/dataConfig&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-LineEntityProcessor">LineEntityProcessor</h3>
<div class="paragraph">
<p>This EntityProcessor reads all content from the data source on a line by line basis and returns a field called <code>rawLine</code> for each line read. The content is not parsed in any way; however, you may add transformers to manipulate the data within the <code>rawLine</code> field, or to create other additional fields.</p>
</div>
<div class="paragraph">
<p>The lines read can be filtered by two regular expressions specified with the <code>acceptLineRegex</code> and <code>omitLineRegex</code> attributes. The table below describes the LineEntityProcessor&#8217;s attributes:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A required attribute that specifies the location of the input file in a way that is compatible with the configured data source. If this value is relative and you are using FileDataSource or URLDataSource, it assumed to be relative to baseLoc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">acceptLineRegex</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An optional attribute that if present discards any line which does not match the regExp.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">omitLineRegex</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An optional attribute that is applied after any acceptLineRegex and that discards any line which matches this regExp.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;jc&quot;</span>
        <span style="color: #7D9029">processor=</span><span style="color: #BA2121">&quot;LineEntityProcessor&quot;</span>
        <span style="color: #7D9029">acceptLineRegex=</span><span style="color: #BA2121">&quot;^.*\.xml$&quot;</span>
        <span style="color: #7D9029">omitLineRegex=</span><span style="color: #BA2121">&quot;/obsolete&quot;</span>
        <span style="color: #7D9029">url=</span><span style="color: #BA2121">&quot;file:///Volumes/ts/files.lis&quot;</span>
        <span style="color: #7D9029">rootEntity=</span><span style="color: #BA2121">&quot;false&quot;</span>
        <span style="color: #7D9029">dataSource=</span><span style="color: #BA2121">&quot;myURIreader1&quot;</span>
        <span style="color: #7D9029">transformer=</span><span style="color: #BA2121">&quot;RegexTransformer,DateFormatTransformer&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
  ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>While there are use cases where you might need to create a Solr document for each line read from a file, it is expected that in most cases that the lines read by this processor will consist of a pathname, which in turn will be consumed by another EntityProcessor, such as XPathEntityProcessor.</p>
</div>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-PlainTextEntityProcessor">PlainTextEntityProcessor</h3>
<div class="paragraph">
<p>This EntityProcessor reads all content from the data source into an single implicit field called <code>plainText</code>. The content is not parsed in any way, however you may add transformers to manipulate the data within the <code>plainText</code> as needed, or to create other additional fields.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">processor=</span><span style="color: #BA2121">&quot;PlainTextEntityProcessor&quot;</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;x&quot;</span> <span style="color: #7D9029">url=</span><span style="color: #BA2121">&quot;http://abc.com/a.txt&quot;</span> <span style="color: #7D9029">dataSource=</span><span style="color: #BA2121">&quot;data-source-name&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
  <span style="color: #408080; font-style: italic">&lt;!-- copies the text to a field called &#39;text&#39; in Solr--&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;plainText&quot;</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;text&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensure that the dataSource is of type <code>DataSource&lt;Reader&gt;</code> (<code>FileDataSource</code>, <code>URLDataSource</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-SolrEntityProcessor">SolrEntityProcessor</h3>
<div class="paragraph">
<p>Uses Solr instance as a datasource, see <a href="https://wiki.apache.org/solr/DataImportHandler#SolrEntityProcessor" class="bare">https://wiki.apache.org/solr/DataImportHandler#SolrEntityProcessor</a>. In addition to that, SolrEntityProcessor also supports the following parameters:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cursorMark="true"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">specify it to enable cursor for efficient result set scrolling</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort="id asc"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in this case it usually needs to specify sort param referencing uniqueKey field. see <a href="pagination-of-results.html#pagination-of-results">Pagination of Results</a> for details.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-Transformers">Transformers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Transformers manipulate the fields in a document returned by an entity. A transformer can create new fields or modify existing ones. You must tell the entity which transformers your import operation will be using, by adding an attribute containing a comma separated list to the <code>&lt;entity&gt;</code> element.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;abcde&quot;</span> <span style="color: #7D9029">transformer=</span><span style="color: #BA2121">&quot;org.apache.solr....,my.own.transformer,...&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Specific transformation rules are then added to the attributes of a <code>&lt;field&gt;</code> element, as shown in the examples below. The transformers are applied in the order in which they are specified in the transformer attribute.</p>
</div>
<div class="paragraph">
<p>The Data Import Handler contains several built-in transformers. You can also write your own custom transformers, as described in the Solr Wiki (see <a href="http://wiki.apache.org/solr/DIHCustomTransformer" class="bare">http://wiki.apache.org/solr/DIHCustomTransformer</a>). The ScriptTransformer (described below) offers an alternative method for writing your own transformers.</p>
</div>
<div class="paragraph">
<p>Solr includes the following built-in transformers:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Transformer Name</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#UploadingStructuredDataStoreDatawiththeDataImportHandler-ClobTransformer">ClobTransformer</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to create a String out of a Clob type in database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#UploadingStructuredDataStoreDatawiththeDataImportHandler-TheDateFormatTransformer">DateFormatTransformer</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parse date/time instances.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#UploadingStructuredDataStoreDatawiththeDataImportHandler-TheHTMLStripTransformer">HTMLStripTransformer</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Strip HTML from a field.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#UploadingStructuredDataStoreDatawiththeDataImportHandler-TheLogTransformer">LogTransformer</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to log data to log files or a console.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#UploadingStructuredDataStoreDatawiththeDataImportHandler-TheNumberFormatTransformer">NumberFormatTransformer</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uses the NumberFormat class in java to parse a string into a number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#UploadingStructuredDataStoreDatawiththeDataImportHandler-TheRegexTransformer">RegexTransformer</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use regular expressions to manipulate fields.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#UploadingStructuredDataStoreDatawiththeDataImportHandler-TheScriptTransformer">ScriptTransformer</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Write transformers in Javascript or any other scripting language supported by Java.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#UploadingStructuredDataStoreDatawiththeDataImportHandler-TheTemplateTransformer">TemplateTransformer</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transform a field using a template.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>These transformers are described below.</p>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-ClobTransformer">ClobTransformer</h3>
<div class="paragraph">
<p>You can use the ClobTransformer to create a string out of a CLOB in a database. A CLOB is a character large object: a collection of character data typically stored in a separate location that is referenced in the database. See <a href="http://en.wikipedia.org/wiki/Character_large_object" class="bare">http://en.wikipedia.org/wiki/Character_large_object</a>. Here&#8217;s an example of invoking the ClobTransformer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;e&quot;</span> <span style="color: #7D9029">transformer=</span><span style="color: #BA2121">&quot;ClobTransformer&quot;</span> <span style="border: 1px solid #FF0000">...</span><span style="color: #008000; font-weight: bold">&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;hugeTextField&quot;</span> <span style="color: #7D9029">clob=</span><span style="color: #BA2121">&quot;true&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
  ...
<span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The ClobTransformer accepts these attributes:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">clob</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean value to signal if ClobTransformer should process this field or not. If this attribute is omitted, then the corresponding field is not transformed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sourceColName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The source column to be used as input. If this is absent source and target are same</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-TheDateFormatTransformer">The DateFormatTransformer</h3>
<div class="paragraph">
<p>This transformer converts dates from one format to another. This would be useful, for example, in a situation where you wanted to convert a field with a fully specified date/time into a less precise date format, for use in faceting.</p>
</div>
<div class="paragraph">
<p>DateFormatTransformer applies only on the fields with an attribute <code>dateTimeFormat</code>. Other fields are not modified.</p>
</div>
<div class="paragraph">
<p>This transformer recognizes the following attributes:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dateTimeFormat</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The format used for parsing this field. This must comply with the syntax of the <a href="http://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html">Java SimpleDateFormat</a> class.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sourceColName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The column on which the dateFormat is to be applied. If this is absent source and target are same.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">locale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The locale to use for date transformations. If not defined, the ROOT locale is used. It must be specified as language-country (<a href="https://tools.ietf.org/html/bcp47">BCP 47 language tag</a>). For example, <code>en-US</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Here is example code that returns the date rounded up to the month "2007-JUL":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;en&quot;</span> <span style="color: #7D9029">pk=</span><span style="color: #BA2121">&quot;id&quot;</span> <span style="color: #7D9029">transformer=</span><span style="color: #BA2121">&quot;DateFormatTransformer&quot;</span> <span style="border: 1px solid #FF0000">...</span> <span style="color: #008000; font-weight: bold">&gt;</span>
  ...
  <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;date&quot;</span> <span style="color: #7D9029">sourceColName=</span><span style="color: #BA2121">&quot;fulldate&quot;</span> <span style="color: #7D9029">dateTimeFormat=</span><span style="color: #BA2121">&quot;yyyy-MMM&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-TheHTMLStripTransformer">The HTMLStripTransformer</h3>
<div class="paragraph">
<p>You can use this transformer to strip HTML out of a field. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;e&quot;</span> <span style="color: #7D9029">transformer=</span><span style="color: #BA2121">&quot;HTMLStripTransformer&quot;</span> <span style="border: 1px solid #FF0000">...</span> <span style="color: #008000; font-weight: bold">&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;htmlText&quot;</span> <span style="color: #7D9029">stripHTML=</span><span style="color: #BA2121">&quot;true&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
  ...
<span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>There is one attribute for this transformer, <code>stripHTML</code>, which is a boolean value (true/false) to signal if the HTMLStripTransformer should process the field or not.</p>
</div>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-TheLogTransformer">The LogTransformer</h3>
<div class="paragraph">
<p>You can use this transformer to log data to the console or log files. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="border: 1px solid #FF0000">...</span>
        <span style="color: #7D9029">transformer=</span><span style="color: #BA2121">&quot;LogTransformer&quot;</span>
        <span style="color: #7D9029">logTemplate=</span><span style="color: #BA2121">&quot;The name is ${e.name}&quot;</span> <span style="color: #7D9029">logLevel=</span><span style="color: #BA2121">&quot;debug&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
  ....
<span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Unlike other transformers, the LogTransformer does not apply to any field, so the attributes are applied on the entity itself.</p>
</div>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-TheNumberFormatTransformer">The NumberFormatTransformer</h3>
<div class="paragraph">
<p>Use this transformer to parse a number from a string, converting it into the specified format, and optionally using a different locale.</p>
</div>
<div class="paragraph">
<p>NumberFormatTransformer will be applied only to fields with an attribute <code>formatStyle</code>.</p>
</div>
<div class="paragraph">
<p>This transformer recognizes the following attributes:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">formatStyle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The format used for parsing this field. The value of the attribute must be one of (`number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">percent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">currency`). This uses the semantics of the Java NumberFormat class.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sourceColName</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The column on which the NumberFormat is to be applied. This is attribute is absent. The source column and the target column are the same.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">locale</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;en&quot;</span> <span style="color: #7D9029">pk=</span><span style="color: #BA2121">&quot;id&quot;</span> <span style="color: #7D9029">transformer=</span><span style="color: #BA2121">&quot;NumberFormatTransformer&quot;</span> <span style="border: 1px solid #FF0000">...</span><span style="color: #008000; font-weight: bold">&gt;</span>
  ...

  <span style="color: #408080; font-style: italic">&lt;!-- treat this field as UK pounds --&gt;</span>

  <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;price_uk&quot;</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;price&quot;</span> <span style="color: #7D9029">formatStyle=</span><span style="color: #BA2121">&quot;currency&quot;</span> <span style="color: #7D9029">locale=</span><span style="color: #BA2121">&quot;en-UK&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-TheRegexTransformer">The RegexTransformer</h3>
<div class="paragraph">
<p>The regex transformer helps in extracting or manipulating values from fields (from the source) using Regular Expressions. The actual class name is <code>org.apache.solr.handler.dataimport.RegexTransformer</code>. But as it belongs to the default package the package-name can be omitted.</p>
</div>
<div class="paragraph">
<p>The table below describes the attributes recognized by the regex transformer.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">regex</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The regular expression that is used to match against the column or sourceColName&#8217;s value(s). If replaceWith is absent, each regex <em>group</em> is taken as a value and a list of values is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sourceColName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The column on which the regex is to be applied. If not present, then the source and target are identical.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">splitBy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to split a string. It returns a list of values. note: this is a regular expression – it may need to be escaped (e.g. via back-slashes)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">groupNames</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma separated list of field column names, used where the regex contains groups and each group is to be saved to a different field. If some groups are not to be named leave a space between commas.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">replaceWith</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used along with regex . It is equivalent to the method <code>new String(&lt;sourceColVal&gt;).replaceAll(&lt;regex&gt;, &lt;replaceWith&gt;)</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Here is an example of configuring the regex transformer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;foo&quot;</span> <span style="color: #7D9029">transformer=</span><span style="color: #BA2121">&quot;RegexTransformer&quot;</span>
        <span style="color: #7D9029">query=</span><span style="color: #BA2121">&quot;select full_name, emailids from foo&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;full_name&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;firstName&quot;</span> <span style="color: #7D9029">regex=</span><span style="color: #BA2121">&quot;Mr(\w*)\b.*&quot;</span> <span style="color: #7D9029">sourceColName=</span><span style="color: #BA2121">&quot;full_name&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;lastName&quot;</span> <span style="color: #7D9029">regex=</span><span style="color: #BA2121">&quot;Mr.*?\b(\w*)&quot;</span> <span style="color: #7D9029">sourceColName=</span><span style="color: #BA2121">&quot;full_name&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>

  <span style="color: #408080; font-style: italic">&lt;!-- another way of doing the same --&gt;</span>

  <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;fullName&quot;</span> <span style="color: #7D9029">regex=</span><span style="color: #BA2121">&quot;Mr(\w*)\b(.*)&quot;</span> <span style="color: #7D9029">groupNames=</span><span style="color: #BA2121">&quot;firstName,lastName&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;mailId&quot;</span> <span style="color: #7D9029">splitBy=</span><span style="color: #BA2121">&quot;,&quot;</span> <span style="color: #7D9029">sourceColName=</span><span style="color: #BA2121">&quot;emailids&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, regex and sourceColName are custom attributes used by the transformer. The transformer reads the field <code>full_name</code> from the resultset and transforms it to two new target fields, <code>firstName</code> and <code>lastName</code>. Even though the query returned only one column, <code>full_name</code>, in the result set, the Solr document gets two extra fields <code>firstName</code> and <code>lastName</code> which are "derived" fields. These new fields are only created if the regexp matches.</p>
</div>
<div class="paragraph">
<p>The emailids field in the table can be a comma-separated value. It ends up producing one or more email IDs, and we expect the <code>mailId</code> to be a multivalued field in Solr.</p>
</div>
<div class="paragraph">
<p>Note that this transformer can either be used to split a string into tokens based on a splitBy pattern, or to perform a string substitution as per replaceWith, or it can assign groups within a pattern to a list of groupNames. It decides what it is to do based upon the above attributes <code>splitBy</code>, <code>replaceWith</code> and <code>groupNames</code> which are looked for in order. This first one found is acted upon and other unrelated attributes are ignored.</p>
</div>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-TheScriptTransformer">The ScriptTransformer</h3>
<div class="paragraph">
<p>The script transformer allows arbitrary transformer functions to be written in any scripting language supported by Java, such as Javascript, JRuby, Jython, Groovy, or BeanShell. Javascript is integrated into Java 8; you&#8217;ll need to integrate other languages yourself.</p>
</div>
<div class="paragraph">
<p>Each function you write must accept a row variable (which corresponds to a <code>Java Map&lt;String,Object&gt;</code>, thus permitting <code>get,put,remove</code> operations). Thus you can modify the value of an existing field or add new fields. The return value of the function is the returned object.</p>
</div>
<div class="paragraph">
<p>The script is inserted into the DIH configuration file at the top level and is called once for each row.</p>
</div>
<div class="paragraph">
<p>Here is a simple example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;dataconfig&gt;</span>

  <span style="color: #408080; font-style: italic">&lt;!-- simple script to generate a new row, converting a temperature from Fahrenheit to Centigrade --&gt;</span>

  <span style="color: #008000; font-weight: bold">&lt;script&gt;</span><span style="color: #BC7A00">&lt;![CDATA[</span>
<span style="color: #BC7A00">    function f2c(row) {</span>
<span style="color: #BC7A00">      var tempf, tempc;</span>
<span style="color: #BC7A00">      tempf = row.get(&#39;temp_f&#39;);</span>
<span style="color: #BC7A00">      if (tempf != null) {</span>
<span style="color: #BC7A00">        tempc = (tempf - 32.0)*5.0/9.0;</span>
<span style="color: #BC7A00">        row.put(&#39;temp_c&#39;, temp_c);</span>
<span style="color: #BC7A00">      }</span>
<span style="color: #BC7A00">      return row;</span>
<span style="color: #BC7A00">    }</span>
<span style="color: #BC7A00">    ]]&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;/script&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;document&gt;</span>

    <span style="color: #408080; font-style: italic">&lt;!-- the function is specified as an entity attribute --&gt;</span>

    <span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;e1&quot;</span> <span style="color: #7D9029">pk=</span><span style="color: #BA2121">&quot;id&quot;</span> <span style="color: #7D9029">transformer=</span><span style="color: #BA2121">&quot;script:f2c&quot;</span> <span style="color: #7D9029">query=</span><span style="color: #BA2121">&quot;select * from X&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
      ....
    <span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;/document&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/dataConfig&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-TheTemplateTransformer">The TemplateTransformer</h3>
<div class="paragraph">
<p>You can use the template transformer to construct or modify a field value, perhaps using the value of other fields. You can insert extra text into the template.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;entity</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;en&quot;</span> <span style="color: #7D9029">pk=</span><span style="color: #BA2121">&quot;id&quot;</span> <span style="color: #7D9029">transformer=</span><span style="color: #BA2121">&quot;TemplateTransformer&quot;</span> <span style="border: 1px solid #FF0000">...</span><span style="color: #008000; font-weight: bold">&gt;</span>
  ...
  <span style="color: #408080; font-style: italic">&lt;!-- generate a full address from fields containing the component parts --&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">column=</span><span style="color: #BA2121">&quot;full_address&quot;</span> <span style="color: #7D9029">template=</span><span style="color: #BA2121">&quot;${en.street},${en.city},${en.zip}&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/entity&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="UploadingStructuredDataStoreDatawiththeDataImportHandler-SpecialCommandsfortheDataImportHandler">Special Commands for the Data Import Handler</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can pass special commands to the DIH by adding any of the variables listed below to any row returned by any component:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$skipDoc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip the current document; that is, do not add it to Solr. The value can be the string `true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">false`.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$skipRow</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip the current row. The document will be added with rows from other entities. The value can be the string `true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false`</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$deleteDocById</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete a document from Solr with this ID. The value has to be the <code>uniqueKey</code> value of the document.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$deleteDocByQuery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete documents from Solr using this query. The value must be a Solr Query.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<!-- Adds tags, if any -->
    <div class="tags">
        
    </div>

<!-- Adds nav links on each page -->
    
    
    <div class="scrollnav">
      
      <a class="btn btn-primary prev" href="uploading-data-with-solr-cell-using-apache-tika.html">Uploading Data with Solr Cell using Apache Tika</a>
      
      
      <a class="btn btn-primary next" href="updating-parts-of-documents.html">Updating Parts of Documents</a>
      
    </div>
    

</div>

<!-- Adds comments from Apache's Comment system -->

<div id="comments_thread">
</div>
<script type="text/javascript" src="https://comments.apache.org/show_comments.lua?site=solrcwiki&style=https://home.apache.org/~ctargett/RefGuidePOC/jekyll/css/comments.css&page=uploading-structured-data-store-data-with-the-data-import-handler" async="true">
</script>
<noscript>
<iframe width="100%" height="500" src="https://comments.apache.org/iframe.lua?site=solrcwiki&style=https://home.apache.org/~ctargett/RefGuidePOC/jekyll/css/comments.css&page=uploading-structured-data-store-data-with-the-data-import-handler"></iframe>
</noscript>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2017 Apache Software Foundation. All rights reserved. <br />
 Site last generated: 2017-04-26 <br />
<p><img src="solr-sunOnly-small.png" alt="Apache Solr"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
  </div>
  <!-- /.container -->
</div>

</body>

</html>

<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Parallel SQL Interface | Apache Solr Reference Guide</title>

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-solr.css">
<link rel="stylesheet" href="css/ref-guide.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="Apache Solr Reference Guide" href="https://home.apache.org/~ctargett/RefGuidePOC/jekyll-full/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // we do *NOT* want cookies used to save the current stage of the sidebar
                             // instead the code in sidebar.html will ensure that the current page
                             // (and it's ancestors) are "active" on page load
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="apache-solr-reference-guide.html">&nbsp;<span class="projectTitle"> Solr Ref Guide 7.0</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- Link to Solr website -->
                <li><a href="https://lucene.apache.org/solr/news" target="_blank">Solr News</a></li>
                <!-- Solr Resources dropdown -->
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Solr Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                       <li><a href="https://lucene.apache.org/solr/7_0_0//solr-core/index.html" target="_blank">Solr Javadocs</a></li>
                       <li><a href="https://git1-us-west.apache.org/repos/asf?p=lucene-solr.git" target="_blank">Lucene/Solr Source Code</a></li>
                       <li><a href="https://lucene.apache.org/solr/resources.html#community" target="_blank">Solr Community Links</a></li>
                    </ul>
                </li>
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Parallel SQL Interface">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div class="col-lg-12">&nbsp;</div>
  <!-- Content Row -->
  <div class="row">
    <!-- Sidebar Column -->
    <div class="col-md-3">
      

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">Apache Solr Reference Guide <!-- TODO: version from site.data --></li>
  
  <li class="sb-level1">
    <a href="about-this-guide.html">About This Guide</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="getting-started.html">Getting Started</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="installing-solr.html">Installing Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="running-solr.html">Running Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="a-quick-overview.html">A Quick Overview</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="a-step-closer.html">A Step Closer</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-control-script-reference.html">Solr Control Script Reference</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="upgrading-solr.html">Upgrading Solr</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="using-the-solr-administration-user-interface.html">Using the Solr Administration User Interface</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="overview-of-the-solr-admin-ui.html">Overview of the Solr Admin UI</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="getting-assistance.html">Getting Assistance</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="logging.html">Logging</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="cloud-screens.html">Cloud Screens</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="collections-core-admin.html">Collections / Core Admin</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="java-properties.html">Java Properties</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="thread-dump.html">Thread Dump</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="collection-specific-tools.html">Collection-Specific Tools</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="analysis-screen.html">Analysis Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="dataimport-screen.html">Dataimport Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="documents-screen.html">Documents Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="files-screen.html">Files Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="query-screen.html">Query Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="stream-screen.html">Stream Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="schema-browser-screen.html">Schema Browser Screen</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="core-specific-tools.html">Core-Specific Tools</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="ping.html">Ping</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="plugins-stats-screen.html">Plugins &amp; Stats Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="replication-screen.html">Replication Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="segments-info.html">Segments Info</a>
            
          </li>
          
        </ul>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="documents-fields-and-schema-design.html">Documents, Fields, and Schema Design</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="overview-of-documents-fields-and-schema-design.html">Overview of Documents, Fields, and Schema Design</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-field-types.html">Solr Field Types</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="field-type-definitions-and-properties.html">Field Type Definitions and Properties</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="field-types-included-with-solr.html">Field Types Included with Solr</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-currencies-and-exchange-rates.html">Working with Currencies and Exchange Rates</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-dates.html">Working with Dates</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-enum-fields.html">Working with Enum Fields</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-external-files-and-processes.html">Working with External Files and Processes</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="field-properties-by-use-case.html">Field Properties by Use Case</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="defining-fields.html">Defining Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="copying-fields.html">Copying Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="dynamic-fields.html">Dynamic Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="other-schema-elements.html">Other Schema Elements</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="schema-api.html">Schema API</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="putting-the-pieces-together.html">Putting the Pieces Together</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="docvalues.html">DocValues</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="schemaless-mode.html">Schemaless Mode</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="understanding-analyzers-tokenizers-and-filters.html">Understanding Analyzers, Tokenizers, and Filters</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="analyzers.html">Analyzers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="about-tokenizers.html">About Tokenizers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="about-filters.html">About Filters</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="tokenizers.html">Tokenizers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="filter-descriptions.html">Filter Descriptions</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="charfilterfactories.html">CharFilterFactories</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="language-analysis.html">Language Analysis</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="phonetic-matching.html">Phonetic Matching</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="running-your-analyzer.html">Running Your Analyzer</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="indexing-and-basic-data-operations.html">Indexing and Basic Data Operations</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="introduction-to-solr-indexing.html">Introduction to Solr Indexing</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="post-tool.html">Post Tool</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="uploading-data-with-index-handlers.html">Uploading Data with Index Handlers</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="transforming-and-indexing-custom-json.html">Transforming and Indexing Custom JSON</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="uploading-data-with-solr-cell-using-apache-tika.html">Uploading Data with Solr Cell using Apache Tika</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="uploading-structured-data-store-data-with-the-data-import-handler.html">Uploading Structured Data Store Data with the Data Import Handler</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="updating-parts-of-documents.html">Updating Parts of Documents</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="detecting-languages-during-indexing.html">Detecting Languages During Indexing</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="de-duplication.html">De-Duplication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="content-streams.html">Content Streams</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="uima-integration.html">UIMA Integration</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="searching.html">Searching</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="overview-of-searching-in-solr.html">Overview of Searching in Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="velocity-search-ui.html">Velocity Search UI</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="relevance.html">Relevance</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="query-syntax-and-parsing.html">Query Syntax and Parsing</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="common-query-parameters.html">Common Query Parameters</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="the-standard-query-parser.html">The Standard Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="the-dismax-query-parser.html">The DisMax Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="the-extended-dismax-query-parser.html">The Extended DisMax Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="function-queries.html">Function Queries</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="local-parameters-in-queries.html">Local Parameters in Queries</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="other-parsers.html">Other Parsers</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="faceting.html">Faceting</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="blockjoin-faceting.html">BlockJoin Faceting</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="highlighting.html">Highlighting</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="spell-checking.html">Spell Checking</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="query-re-ranking.html">Query Re-Ranking</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="learning-to-rank.html">Learning To Rank</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="transforming-result-documents.html">Transforming Result Documents</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="suggester.html">Suggester</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="morelikethis.html">MoreLikeThis</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="pagination-of-results.html">Pagination of Results</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="collapse-and-expand-results.html">Collapse and Expand Results</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="result-grouping.html">Result Grouping</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="result-clustering.html">Result Clustering</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="spatial-search.html">Spatial Search</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-terms-component.html">The Terms Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-term-vector-component.html">The Term Vector Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-stats-component.html">The Stats Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-query-elevation-component.html">The Query Elevation Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="response-writers.html">Response Writers</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="velocity-response-writer.html">Velocity Response Writer</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="near-real-time-searching.html">Near Real Time Searching</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="realtime-get.html">RealTime Get</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="exporting-result-sets.html">Exporting Result Sets</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="streaming-expressions.html">Streaming Expressions</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="graph-traversal.html">Graph Traversal</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="parallel-sql-interface.html">Parallel SQL Interface</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="solr-jdbc-dbvisualizer.html">Solr JDBC - DbVisualizer</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-squirrel-sql.html">Solr JDBC - SQuirreL SQL</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-apache-zeppelin.html">Solr JDBC - Apache Zeppelin</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-python-jython.html">Solr JDBC - Python/Jython</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-r.html">Solr JDBC - R</a>
            
          </li>
          
        </ul>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="the-well-configured-solr-instance.html">The Well-Configured Solr Instance</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="configuring-solrconfig-xml.html">Configuring solrconfig.xml</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="datadir-and-directoryfactory-in-solrconfig.html">DataDir and DirectoryFactory in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="lib-directives-in-solrconfig.html">Lib Directives in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="schema-factory-definition-in-solrconfig.html">Schema Factory Definition in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="indexconfig-in-solrconfig.html">IndexConfig in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="requesthandlers-and-searchcomponents-in-solrconfig.html">RequestHandlers and SearchComponents in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="initparams-in-solrconfig.html">InitParams in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="updatehandlers-in-solrconfig.html">UpdateHandlers in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="query-settings-in-solrconfig.html">Query Settings in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="requestdispatcher-in-solrconfig.html">RequestDispatcher in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="update-request-processors.html">Update Request Processors</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="codec-factory.html">Codec Factory</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-cores-and-solr-xml.html">Solr Cores and solr.xml</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="format-of-solr-xml.html">Format of solr.xml</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="defining-core-properties.html">Defining core.properties</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="coreadmin-api.html">CoreAdmin API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="config-sets.html">Config Sets</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="configuration-apis.html">Configuration APIs</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="blob-store-api.html">Blob Store API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="config-api.html">Config API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="request-parameters-api.html">Request Parameters API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="managed-resources.html">Managed Resources</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="implicit-requesthandlers.html">Implicit RequestHandlers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-plugins.html">Solr Plugins</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="adding-custom-plugins-in-solrcloud-mode.html">Adding Custom Plugins in SolrCloud Mode</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="jvm-settings.html">JVM Settings</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="managing-solr.html">Managing Solr</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="taking-solr-to-production.html">Taking Solr to Production</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="securing-solr.html">Securing Solr</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="authentication-and-authorization-plugins.html">Authentication and Authorization Plugins</a>
            
            <ul>
              
              <li class="sb-level4">
                <a href="basic-authentication-plugin.html">Basic Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="hadoop-authentication-plugin.html">Hadoop Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="kerberos-authentication-plugin.html">Kerberos Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="rule-based-authorization-plugin.html">Rule-Based Authorization Plugin</a>
                
              </li>
              
            </ul>
            
          </li>
          
          <li class="sb-level3">
            <a href="enabling-ssl.html">Enabling SSL</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="running-solr-on-hdfs.html">Running Solr on HDFS</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="making-and-restoring-backups.html">Making and Restoring Backups</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="configuring-logging.html">Configuring Logging</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-jmx-with-solr.html">Using JMX with Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="mbean-request-handler.html">MBean Request Handler</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="performance-statistics-reference.html">Performance Statistics Reference</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="metrics-reporting.html">Metrics Reporting</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="v2-api.html">v2 API</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="solrcloud.html">SolrCloud</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="getting-started-with-solrcloud.html">Getting Started with SolrCloud</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="how-solrcloud-works.html">How SolrCloud Works</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="shards-and-indexing-data-in-solrcloud.html">Shards and Indexing Data in SolrCloud</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="distributed-requests.html">Distributed Requests</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="read-and-write-side-fault-tolerance.html">Read and Write Side Fault Tolerance</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="solrcloud-configuration-and-parameters.html">SolrCloud Configuration and Parameters</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="setting-up-an-external-zookeeper-ensemble.html">Setting Up an External ZooKeeper Ensemble</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="using-zookeeper-to-manage-configuration-files.html">Using ZooKeeper to Manage Configuration Files</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="zookeeper-access-control.html">ZooKeeper Access Control</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="collections-api.html">Collections API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="parameter-reference.html">Parameter Reference</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="command-line-utilities.html">Command Line Utilities</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solrcloud-with-legacy-configuration-files.html">SolrCloud with Legacy Configuration Files</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="configsets-api.html">ConfigSets API</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="rule-based-replica-placement.html">Rule-based Replica Placement</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="cross-data-center-replication-cdcr-.html">Cross Data Center Replication (CDCR)</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="legacy-scaling-and-distribution.html">Legacy Scaling and Distribution</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="introduction-to-scaling-and-distribution.html">Introduction to Scaling and Distribution</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="distributed-search-with-index-sharding.html">Distributed Search with Index Sharding</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="index-replication.html">Index Replication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="combining-distribution-and-replication.html">Combining Distribution and Replication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="merging-indexes.html">Merging Indexes</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="client-apis.html">Client APIs</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="introduction-to-client-apis.html">Introduction to Client APIs</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="choosing-an-output-format.html">Choosing an Output Format</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="client-api-lineup.html">Client API Lineup</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-javascript.html">Using JavaScript</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-python.html">Using Python</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-solrj.html">Using SolrJ</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-solr-from-ruby.html">Using Solr From Ruby</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="major-changes-from-solr-5-to-solr-6.html">Major Changes from Solr 5 to Solr 6</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="upgrading-a-solr-cluster.html">Upgrading a Solr Cluster</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="indexupgrader-tool.html">IndexUpgrader Tool</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="further-assistance.html">Further Assistance</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="solr-glossary.html">Solr Glossary</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="errata.html">Errata</a>
    
  </li>
  
</ul>


<!-- set the 'active' class on the current page and ancestors -->
<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("#mysidebar a[href='parallel-sql-interface.html']").parents('li').toggleClass("active", true);</script>
<!-- set the 'current' class on the current page and 'current-tree' on the current page + it's ancestors -->
<!-- this can let us do css highlighting of the current page in the sidebar even if/when the user clicks around in the sidebar causing other sidebar elements to be 'active' -->
<script>
  $("#mysidebar a[href='parallel-sql-interface.html']").parent('li').toggleClass("current", true);
  $("#mysidebar a[href='parallel-sql-interface.html']").parents('li').toggleClass("current-tree", true);
</script>

    </div>
    <!-- Content Column -->
    <div class="col-md-9">
      <div class="post-header">
   <h1 class="post-title-main">Parallel SQL Interface</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 2, listType: 'ul', showSpeed: 0, headers: 'h2,h3' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    

<div id="main-content">
  <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Solr&#8217;s Parallel SQL Interface brings the power of SQL to SolrCloud. The SQL interface seamlessly combines SQL with Solr&#8217;s full-text search capabilities. Both MapReduce style and JSON Facet API aggregations are supported, which means the SQL interface can be used to support both <strong>high query volume</strong> and <strong>high cardinality</strong> use cases.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ParallelSQLInterface-SQLArchitecture">SQL Architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The SQL interface allows sending a SQL query to Solr and getting documents streamed back in response. Under the covers, Solr&#8217;s SQL interface uses the Apache Calcite SQL engine to translate SQL queries to physical query plans implemented as <a href="streaming-expressions.html#streaming-expressions">Streaming Expressions</a>.</p>
</div>
<div class="sect2">
<h3 id="ParallelSQLInterface-SolrCollectionsandDBTables">Solr Collections and DB Tables</h3>
<div class="paragraph">
<p>In a standard <code>SELECT</code> statement such as &#8220;SELECT &lt;expressions&gt; FROM &lt;table&gt;&#8221;, the table names correspond to Solr collection names. Table names are case insensitive.</p>
</div>
<div class="paragraph">
<p>Column names in the SQL query map directly to fields in the Solr index for the collection being queried. These identifiers are case sensitive. Aliases are supported, and can be referenced in the <code>ORDER BY</code> clause.</p>
</div>
<div class="paragraph">
<p>The * syntax to indicate all fields is not supported in either limited or unlimited queries. The <code>score</code> field can be used only with queries that contain a <code>LIMIT</code> clause.</p>
</div>
<div class="paragraph">
<p>For example, we could index Solr&#8217;s sample documents and then construct an SQL query like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">SELECT manu as mfr<span style="color: #666666">,</span> price as retail FROM techproducts</code></pre>
</div>
</div>
<div class="paragraph">
<p>The collection in Solr we are using is "techproducts", and we&#8217;ve asked for the "manu" and "price" fields to be returned and aliased with new names. While this example does not use those aliases, we could build on this to ORDER BY one or more of those fields.</p>
</div>
<div class="paragraph">
<p>More information about how to structure SQL queries for Solr is included in the section <a href="#ParallelSQLInterface-SolrSQLSyntax">Solr SQL Syntax</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ParallelSQLInterface-AggregationModes">Aggregation Modes</h3>
<div class="paragraph">
<p>The SQL feature of Solr can work with aggregations (grouping of results) in two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>facet</code>: This is the <strong>default</strong> aggregation mode, which uses the JSON Facet API or StatsComponent for aggregations. In this scenario the aggregations logic is pushed down into the search engine and only the aggregates are sent across the network. This is Solr&#8217;s normal mode of operation. This is fast when the cardinality of GROUP BY fields is low to moderate. But it breaks down when you have high cardinality fields in the GROUP BY field.</p>
</li>
<li>
<p><code>map_reduce</code>: This implementation shuffles tuples to worker nodes and performs the aggregation on the worker nodes. It involves sorting and partitioning the entire result set and sending it to worker nodes. In this approach the tuples arrive at the worker nodes sorted by the GROUP BY fields. The worker nodes can then rollup the aggregates one group at a time. This allows for unlimited cardinality aggregation, but you pay the price of sending the entire result set across the network to worker nodes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These modes are defined with the <code>aggregationMode</code> property when sending the request to Solr.</p>
</div>
<div class="paragraph">
<p>As noted, the choice between aggregation modes depends on the cardinality of the fields you are working with. If you have low-to-moderate cardinality in the fields you are grouping by, the 'facet' aggregation mode will give you a higher performance because only the final groups are returned, very similar to how facets work today. If, however, you have high cardinality in the fields, the "map_reduce" aggregation mode with worker nodes provide a much more performant option.</p>
</div>
<div class="paragraph">
<p>More detail on the architecture of the "map_reduce" query is in the section <a href="#ParallelSQLInterface-ParallelQueryArchitecture">Parallel Query Architecture</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ParallelSQLInterface-Configuration">Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The request handlers used for the SQL interface are configured to load implicitly, meaning there is little to do to start using this feature.</p>
</div>
<div class="sect2">
<h3 id="ParallelSQLInterface-_sqlRequestHandler">/sql Request Handler</h3>
<div class="paragraph">
<p>The <code>/sql</code> handler is the front end of the Parallel SQL interface. All SQL queries are sent to the <code>/sql</code> handler to be processed. The handler also coordinates the distributed MapReduce jobs when running <code>GROUP BY</code> and <code>SELECT DISTINCT</code> queries in <code>map_reduce</code> mode. By default the <code>/sql</code> handler will choose worker nodes from its own collection to handle the distributed operations. In this default scenario the collection where the <code>/sql</code> handler resides acts as the default worker collection for MapReduce queries.</p>
</div>
<div class="paragraph">
<p>By default, the <code>/sql</code> request handler is configured as an implicit handler, meaning that it is always enabled in every Solr installation and no further configuration is required.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As described below in the section <a href="#ParallelSQLInterface-BestPractices">Best Practices</a>, you may want to set up a separate collection for parallelized SQL queries. If you have high cardinality fields and a large amount of data, please be sure to review that section and consider using a separate collection.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ParallelSQLInterface-_streamand_exportRequestHandlers">/stream and /export Request Handlers</h3>
<div class="paragraph">
<p>The Streaming API is an extensible parallel computing framework for SolrCloud. <a href="streaming-expressions.html#streaming-expressions">Streaming Expressions</a> provide a query language and a serialization format for the Streaming API. The Streaming API provides support for fast MapReduce allowing it to perform parallel relational algebra on extremely large data sets. Under the covers the SQL interface parses SQL queries using the Apache Calcite SQL Parser. It then translates the queries to the parallel query plan. The parallel query plan is expressed using the Streaming API and Streaming Expressions.</p>
</div>
<div class="paragraph">
<p>Like the <code>/sql</code> request handler, the <code>/stream</code> and <code>/export</code> request handlers are configured as implicit handlers, and no further configuration is required.</p>
</div>
</div>
<div class="sect2">
<h3 id="ParallelSQLInterface-Fields">Fields</h3>
<div class="paragraph">
<p>In some cases, fields used in SQL queries must be configured as DocValue fields. If queries are unlimited, all fields must be DocValue fields. If queries are limited (with the <code>limit</code> clause) then fields do not have to be have DocValues enabled.</p>
</div>
</div>
<div class="sect2">
<h3 id="ParallelSQLInterface-SendingQueries">Sending Queries</h3>
<div class="paragraph">
<p>The SQL Interface provides a basic JDBC driver and an HTTP interface to perform queries.</p>
</div>
</div>
<div class="sect2">
<h3 id="ParallelSQLInterface-JDBCDriver">JDBC Driver</h3>
<div class="paragraph">
<p>The JDBC Driver ships with SolrJ. Below is sample code for creating a connection and executing a query with the JDBC driver:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">Connection con <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">null</span><span style="color: #666666">;</span>
<span style="color: #008000; font-weight: bold">try</span> <span style="color: #666666">{</span>
    con <span style="color: #666666">=</span> DriverManager<span style="color: #666666">.</span><span style="color: #7D9029">getConnection</span><span style="color: #666666">(</span><span style="color: #BA2121">&quot;jdbc:solr://&quot;</span> <span style="color: #666666">+</span> zkHost <span style="color: #666666">+</span> <span style="color: #BA2121">&quot;?collection=collection1&amp;aggregationMode=map_reduce&amp;numWorkers=2&quot;</span><span style="color: #666666">);</span>
    stmt <span style="color: #666666">=</span> con<span style="color: #666666">.</span><span style="color: #7D9029">createStatement</span><span style="color: #666666">();</span>
    rs <span style="color: #666666">=</span> stmt<span style="color: #666666">.</span><span style="color: #7D9029">executeQuery</span><span style="color: #666666">(</span><span style="color: #BA2121">&quot;SELECT a_s, sum(a_f) as sum FROM collection1 GROUP BY a_s ORDER BY sum desc&quot;</span><span style="color: #666666">);</span>

    <span style="color: #008000; font-weight: bold">while</span><span style="color: #666666">(</span>rs<span style="color: #666666">.</span><span style="color: #7D9029">next</span><span style="color: #666666">())</span> <span style="color: #666666">{</span>
        String a_s <span style="color: #666666">=</span> rs<span style="color: #666666">.</span><span style="color: #7D9029">getString</span><span style="color: #666666">(</span><span style="color: #BA2121">&quot;a_s&quot;</span><span style="color: #666666">);</span>
        <span style="color: #B00040">double</span> s <span style="color: #666666">=</span> rs<span style="color: #666666">.</span><span style="color: #7D9029">getDouble</span><span style="color: #666666">(</span><span style="color: #BA2121">&quot;sum&quot;</span><span style="color: #666666">);</span>
    <span style="color: #666666">}</span>
<span style="color: #666666">}</span> <span style="color: #008000; font-weight: bold">finally</span> <span style="color: #666666">{</span>
    rs<span style="color: #666666">.</span><span style="color: #7D9029">close</span><span style="color: #666666">();</span>
    stmt<span style="color: #666666">.</span><span style="color: #7D9029">close</span><span style="color: #666666">();</span>
    con<span style="color: #666666">.</span><span style="color: #7D9029">close</span><span style="color: #666666">();</span>
<span style="color: #666666">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The connection URL must contain the <code>zkHost</code> and the <code>collection</code> parameters. The collection must be a valid SolrCloud collection at the specified ZooKeeper host. The collection must also be configured with the <code>/sql</code> handler. The <code>aggregationMode</code> and <code>numWorkers</code> parameters are optional.</p>
</div>
</div>
<div class="sect2">
<h3 id="ParallelSQLInterface-HTTPInterface">HTTP Interface</h3>
<div class="paragraph">
<p>Solr accepts parallel SQL queries through the <code>/sql</code> handler.</p>
</div>
<div class="paragraph">
<p>Below is a sample curl command performing a SQL aggregate query in facet mode:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl --data-urlencode <span style="color: #BA2121">&#39;stmt=SELECT to, count(*) FROM collection4 GROUP BY to ORDER BY count(*) desc LIMIT 10&#39;</span>
   http://localhost:8983/solr/collection4/sql?aggregationMode<span style="color: #666666">=</span>facet</code></pre>
</div>
</div>
<div class="paragraph">
<p>Below is sample result set:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span style="color: #666666">{</span><span style="color: #BA2121">&quot;result-set&quot;</span><span style="color: #666666">:{</span><span style="color: #BA2121">&quot;docs&quot;</span><span style="color: #666666">:[</span>
   <span style="color: #666666">{</span><span style="color: #BA2121">&quot;count(*)&quot;</span><span style="color: #666666">:9158,</span><span style="color: #BA2121">&quot;to&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;pete.davis@enron.com&quot;</span><span style="color: #666666">},</span>
   <span style="color: #666666">{</span><span style="color: #BA2121">&quot;count(*)&quot;</span><span style="color: #666666">:6244,</span><span style="color: #BA2121">&quot;to&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;tana.jones@enron.com&quot;</span><span style="color: #666666">},</span>
   <span style="color: #666666">{</span><span style="color: #BA2121">&quot;count(*)&quot;</span><span style="color: #666666">:5874,</span><span style="color: #BA2121">&quot;to&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;jeff.dasovich@enron.com&quot;</span><span style="color: #666666">},</span>
   <span style="color: #666666">{</span><span style="color: #BA2121">&quot;count(*)&quot;</span><span style="color: #666666">:5867,</span><span style="color: #BA2121">&quot;to&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;sara.shackleton@enron.com&quot;</span><span style="color: #666666">},</span>
   <span style="color: #666666">{</span><span style="color: #BA2121">&quot;count(*)&quot;</span><span style="color: #666666">:5595,</span><span style="color: #BA2121">&quot;to&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;steven.kean@enron.com&quot;</span><span style="color: #666666">},</span>
   <span style="color: #666666">{</span><span style="color: #BA2121">&quot;count(*)&quot;</span><span style="color: #666666">:4904,</span><span style="color: #BA2121">&quot;to&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;vkaminski@aol.com&quot;</span><span style="color: #666666">},</span>
   <span style="color: #666666">{</span><span style="color: #BA2121">&quot;count(*)&quot;</span><span style="color: #666666">:4622,</span><span style="color: #BA2121">&quot;to&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;mark.taylor@enron.com&quot;</span><span style="color: #666666">},</span>
   <span style="color: #666666">{</span><span style="color: #BA2121">&quot;count(*)&quot;</span><span style="color: #666666">:3819,</span><span style="color: #BA2121">&quot;to&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;kay.mann@enron.com&quot;</span><span style="color: #666666">},</span>
   <span style="color: #666666">{</span><span style="color: #BA2121">&quot;count(*)&quot;</span><span style="color: #666666">:3678,</span><span style="color: #BA2121">&quot;to&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;richard.shapiro@enron.com&quot;</span><span style="color: #666666">},</span>
   <span style="color: #666666">{</span><span style="color: #BA2121">&quot;count(*)&quot;</span><span style="color: #666666">:3653,</span><span style="color: #BA2121">&quot;to&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;kate.symes@enron.com&quot;</span><span style="color: #666666">},</span>
   <span style="color: #666666">{</span><span style="color: #BA2121">&quot;EOF&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;true&quot;</span><span style="color: #666666">,</span><span style="color: #BA2121">&quot;RESPONSE_TIME&quot;</span><span style="color: #666666">:10}]}</span>
<span style="color: #666666">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that the result set is an array of tuples with key/value pairs that match the SQL column list. The final tuple contains the EOF flag which signals the end of the stream.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ParallelSQLInterface-SolrSQLSyntax">Solr SQL Syntax</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Solr supports a broad range of SQL syntax.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">SQL Parser is Case Insensitive</div>
<div class="paragraph">
<p>The SQL parser being used by Solr to translate the SQL statements is case insensitive. However, for ease of reading, all examples on this page use capitalized keywords.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="ParallelSQLInterface-EscapingReservedWords">Escaping Reserved Words</h3>
<div class="paragraph">
<p>The SQL parser will return an error if a reserved word is used in the SQL query. Reserved words can be escaped and included in the query using the back tick. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">select <span style="border: 1px solid #FF0000">`</span>from<span style="border: 1px solid #FF0000">`</span> from emails</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ParallelSQLInterface-SELECTStatements">SELECT Statements</h3>
<div class="paragraph">
<p>Solr supports limited and unlimited select queries. The syntax between the two types of queries are identical except for the <code>LIMIT</code> clause in the SQL statement. However, they have very different execution plans and different requirements for how the data is stored. The sections below explores both types of queries.</p>
</div>
<div class="sect3">
<h4 id="ParallelSQLInterface-BasicSELECTstatementwithLIMIT">Basic SELECT statement with LIMIT</h4>
<div class="paragraph">
<p>A limited select query follows this basic syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">SELECT fieldA as fa<span style="color: #666666">,</span> fieldB as fb<span style="color: #666666">,</span> fieldC as fc FROM tableA WHERE fieldC <span style="color: #666666">=</span> <span style="border: 1px solid #FF0000">&#39;</span>term1 term2<span style="border: 1px solid #FF0000">&#39;</span> ORDER BY fa desc LIMIT <span style="color: #666666">100</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We&#8217;ve covered many syntax options with this example, so let&#8217;s walk through what&#8217;s possible below.</p>
</div>
</div>
<div class="sect3">
<h4 id="ParallelSQLInterface-WHEREClauseandBooleanPredicates"><strong>WHERE</strong> Clause <strong>and Boolean Predicates</strong></h4>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The WHERE clause must have a field on one side of the predicate. Two constants (5 &lt; 10) or two fields (fielda &gt; fieldb) is not supported. Subqueries are also not supported.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>WHERE</code> clause allows Solr&#8217;s search syntax to be injected into the SQL query. In the example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">WHERE fieldC <span style="color: #666666">=</span> <span style="border: 1px solid #FF0000">&#39;</span>term1 term2<span style="border: 1px solid #FF0000">&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The predicate above will execute a full text search for the phrase 'term1 term2' in fieldC.</p>
</div>
<div class="paragraph">
<p>To execute a non-phrase query, simply add parens inside of the single quotes. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">WHERE fieldC <span style="color: #666666">=</span> <span style="border: 1px solid #FF0000">&#39;</span><span style="color: #666666">(</span>term1 term2<span style="color: #666666">)</span><span style="border: 1px solid #FF0000">&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The predicate above searches for <code>term1</code> OR <code>term2</code> in <code>fieldC</code>.</p>
</div>
<div class="paragraph">
<p>The Solr range query syntax can be used as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">WHERE fieldC <span style="color: #666666">=</span> <span style="border: 1px solid #FF0000">&#39;</span><span style="color: #666666">[0</span> TO <span style="color: #666666">100]</span><span style="border: 1px solid #FF0000">&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Complex boolean queries can be specified as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">WHERE <span style="color: #666666">((</span>fieldC <span style="color: #666666">=</span> <span style="border: 1px solid #FF0000">&#39;</span>term1<span style="border: 1px solid #FF0000">&#39;</span> AND fieldA <span style="color: #666666">=</span> <span style="border: 1px solid #FF0000">&#39;</span>term2<span style="border: 1px solid #FF0000">&#39;</span><span style="color: #666666">)</span> OR <span style="color: #666666">(</span>fieldB <span style="color: #666666">=</span> <span style="border: 1px solid #FF0000">&#39;</span>term3<span style="border: 1px solid #FF0000">&#39;</span><span style="color: #666666">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To specify NOT queries, you use the <code>AND NOT</code> syntax as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">WHERE <span style="color: #666666">(</span>fieldA <span style="color: #666666">=</span> <span style="border: 1px solid #FF0000">&#39;</span>term1<span style="border: 1px solid #FF0000">&#39;</span><span style="color: #666666">)</span> AND <span style="color: #0000FF">NOT</span> <span style="color: #666666">(</span>fieldB <span style="color: #666666">=</span> <span style="border: 1px solid #FF0000">&#39;</span>term2<span style="border: 1px solid #FF0000">&#39;</span><span style="color: #666666">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ParallelSQLInterface-SupportedWHEREOperators">Supported WHERE <strong>Operators</strong></h4>
<div class="paragraph">
<p>The parallel SQL interface supports and pushes down most common SQL operators, specifically:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
<th class="tableblock halign-left valign-top">Solr Query</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equals</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fielda = 10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fielda:10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Does not equal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fielda &lt;&gt; 10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-fielda:10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Does not equal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fielda != 10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-fielda:10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Greater than</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fielda &gt; 10</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="literalblock">
<div class="content">
<pre>fielda:{10 TO *]</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;=</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Greater than or equals</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fielda &gt;= 10</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="literalblock">
<div class="content">
<pre>fielda:[10 TO *]</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Less than</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fielda &lt; 10</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="literalblock">
<div class="content">
<pre>fielda:[* TO 10}</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8656;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Less than or equals</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fielda &#8656; 10</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="literalblock">
<div class="content">
<pre>fielda:[* TO 10]</pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Some operators that are not supported are BETWEEN, LIKE and IN. However, there are workarounds for BETWEEN and LIKE.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>BETWEEN can be supported with a range query, such as <code>field = [50 TO 100]</code>.</p>
</li>
<li>
<p>A simplistic LIKE can be used with a wildcard, such as <code>field = 'sam*'</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="ParallelSQLInterface-ORDERBYClause"><strong>ORDER</strong> BY <strong>Clause</strong></h4>
<div class="paragraph">
<p>The <code>ORDER BY</code> clause maps directly to Solr fields. Multiple <code>ORDER BY</code> fields and directions are supported.</p>
</div>
<div class="paragraph">
<p>The <code>score</code> field is accepted in the <code>ORDER BY</code> clause in queries where a limit is specified.</p>
</div>
<div class="paragraph">
<p>Order by fields are case sensitive.</p>
</div>
</div>
<div class="sect3">
<h4 id="ParallelSQLInterface-LIMITClause"><strong>LIMIT Clause</strong></h4>
<div class="paragraph">
<p>Limits the result set to the specified size. In the example above the clause <code>LIMIT 100</code> will limit the result set to 100 records.</p>
</div>
<div class="paragraph">
<p>There are a few differences to note between limited and unlimited queries:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Limited queries support <code>score</code> in the field list and <code>ORDER BY</code>. Unlimited queries do not.</p>
</li>
<li>
<p>Limited queries allow any stored field in the field list. Unlimited queries require the fields to be stored as a DocValues field.</p>
</li>
<li>
<p>Limited queries allow any indexed field in the <code>ORDER BY</code> list. Unlimited queries require the fields to be stored as a DocValues field.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="ParallelSQLInterface-SELECTDISTINCTQueries">SELECT DISTINCT Queries</h4>
<div class="paragraph">
<p>The SQL interface supports both MapReduce and Facet implementations for <code>SELECT DISTINCT</code> queries.</p>
</div>
<div class="paragraph">
<p>The MapReduce implementation shuffles tuples to worker nodes where the Distinct operation is performed. This implementation can perform the Distinct operation over extremely high cardinality fields.</p>
</div>
<div class="paragraph">
<p>The Facet implementation pushes down the Distinct operation into the search engine using the JSON Facet API. This implementation is designed for high performance, high QPS scenarios on low-to-moderate cardinality fields.</p>
</div>
<div class="paragraph">
<p>The <code>aggregationMode</code> parameter is available in the both the JDBC driver and HTTP interface to choose the underlying implementation (<code>map_reduce</code> or <code>facet</code>). The SQL syntax is identical for both implementations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">SELECT distinct fieldA as fa<span style="color: #666666">,</span> fieldB as fb FROM tableA ORDER BY fa desc<span style="color: #666666">,</span> fb desc</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ParallelSQLInterface-Statistics">Statistics</h3>
<div class="paragraph">
<p>The SQL interface supports simple statistics calculated on numeric fields. The supported functions are <code>count(*)</code>, <code>min</code>, <code>max</code>, <code>sum</code>, and <code>avg</code>.</p>
</div>
<div class="paragraph">
<p>Because these functions never require data to be shuffled, the aggregations are pushed down into the search engine and are generated by the <a href="the-stats-component.html#the-stats-component">StatsComponent</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">SELECT <span style="color: #0000FF">count</span><span style="color: #666666">(*)</span> as count<span style="color: #666666">,</span> sum<span style="color: #666666">(</span>fieldB<span style="color: #666666">)</span> as sum FROM tableA WHERE fieldC <span style="color: #666666">=</span> <span style="border: 1px solid #FF0000">&#39;</span>Hello<span style="border: 1px solid #FF0000">&#39;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ParallelSQLInterface-GROUPBYAggregations">GROUP BY Aggregations</h3>
<div class="paragraph">
<p>The SQL interface also supports <code>GROUP BY</code> aggregate queries.</p>
</div>
<div class="paragraph">
<p>As with <code>SELECT DISTINCT</code> queries, the SQL interface supports both a MapReduce implementation and a Facet implementation. The MapReduce implementation can build aggregations over extremely high cardinality fields. The Facet implementations provides high performance aggregation over fields with moderate levels of cardinality.</p>
</div>
<div class="sect3">
<h4 id="ParallelSQLInterface-BasicGROUPBYwithAggregates"><strong>Basic <code>GROUP BY</code> with Aggregates</strong></h4>
<div class="paragraph">
<p>Here is a basic example of a GROUP BY query that requests aggregations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">SELECT fieldA as fa<span style="color: #666666">,</span> fieldB as fb<span style="color: #666666">,</span> count<span style="color: #666666">(*)</span> as count<span style="color: #666666">,</span> sum<span style="color: #666666">(</span>fieldC<span style="color: #666666">)</span> as sum<span style="color: #666666">,</span> avg<span style="color: #666666">(</span>fieldY<span style="color: #666666">)</span> as avg FROM tableA WHERE fieldC <span style="color: #666666">=</span> <span style="border: 1px solid #FF0000">&#39;</span>term1 term2<span style="border: 1px solid #FF0000">&#39;</span>
GROUP BY fa<span style="color: #666666">,</span> fb HAVING sum <span style="color: #666666">&gt;</span> <span style="color: #666666">1000</span> ORDER BY sum asc LIMIT <span style="color: #666666">100</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s break this down into pieces:</p>
</div>
</div>
<div class="sect3">
<h4 id="ParallelSQLInterface-TheColumnIdentifiersandAliases"><strong>The Column Identifiers and Aliases</strong></h4>
<div class="paragraph">
<p>The Column Identifiers can contain both fields in the Solr index and aggregate functions. The supported aggregate functions are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>count(*)</code>: Counts the number of records over a set of buckets.</p>
</li>
<li>
<p><code>sum(field)</code>: Sums a numeric field over over a set of buckets.</p>
</li>
<li>
<p><code>avg(field)</code>: Averages a numeric field over a set of buckets.</p>
</li>
<li>
<p><code>min(field)</code>: Returns the min value of a numeric field over a set of buckets.</p>
</li>
<li>
<p><code>max:(field)</code>: Returns the max value of a numerics over a set of buckets.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The non-function fields in the field list determine the fields to calculate the aggregations over.</p>
</div>
<div class="paragraph">
<p><strong>GROUP BY Clause</strong></p>
</div>
<div class="paragraph">
<p>The <code>GROUP BY</code> clause can contain up to 4 fields in the Solr index. These fields should correspond with the non-function fields in the field list.</p>
</div>
</div>
<div class="sect3">
<h4 id="ParallelSQLInterface-HAVINGClause"><strong>HAVING Clause</strong></h4>
<div class="paragraph">
<p>The <code>HAVING</code> clause may contain any function listed in the field list. Complex <code>HAVING</code> clauses such as this are supported:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">SELECT fieldA<span style="color: #666666">,</span> fieldB<span style="color: #666666">,</span> count<span style="color: #666666">(*),</span> sum<span style="color: #666666">(</span>fieldC<span style="color: #666666">),</span> avg<span style="color: #666666">(</span>fieldY<span style="color: #666666">)</span>
FROM tableA
WHERE fieldC <span style="color: #666666">=</span> <span style="border: 1px solid #FF0000">&#39;</span>term1 term2<span style="border: 1px solid #FF0000">&#39;</span>
GROUP BY fieldA<span style="color: #666666">,</span> fieldB
<span style="color: #0000FF">HAVING</span> <span style="color: #666666">((</span>sum<span style="color: #666666">(</span>fieldC<span style="color: #666666">)</span> <span style="color: #666666">&gt;</span> <span style="color: #666666">1000)</span> AND <span style="color: #666666">(</span>avg<span style="color: #666666">(</span>fieldY<span style="color: #666666">)</span> <span style="color: #666666">&lt;=</span> <span style="color: #666666">10))</span>
ORDER BY <span style="color: #0000FF">sum</span><span style="color: #666666">(</span>fieldC<span style="color: #666666">)</span> asc
LIMIT <span style="color: #666666">100</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ParallelSQLInterface-ORDERBYClause.1"><strong>ORDER BY Clause</strong></h4>
<div class="paragraph">
<p>The <code>ORDER BY</code> clause contains any field or function in the field list.</p>
</div>
<div class="paragraph">
<p>If the <code>ORDER BY</code> clause contains the exact fields in the <code>GROUP BY</code> clause, then there is no-limit placed on the returned results. If the <code>ORDER BY</code> clause contains different fields than the <code>GROUP BY</code> clause, a limit of 100 is automatically applied. To increase this limit you must specify a value in the <code>LIMIT</code> clause.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ParallelSQLInterface-BestPractices">Best Practices</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="ParallelSQLInterface-SeparateCollections">Separate Collections</h3>
<div class="paragraph">
<p>It makes sense to create a separate SolrCloud collection just for the <code>/sql</code> handler. This collection can be created using SolrCloud&#8217;s standard collection API. Since this collection only exists to handle <code>/sql</code> requests and provide a pool of worker nodes, this collection does not need to hold any data. Worker nodes are selected randomly from the entire pool of available nodes in the <code>/sql</code> handler&#8217;s collection. So to grow this collection dynamically replicas can be added to existing shards. New replicas will automatically be put to work after they&#8217;ve been added.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ParallelSQLInterface-ParallelSQLQueries">Parallel SQL Queries</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An earlier section describes how the SQL interface translates the SQL statement to a streaming expression. One of the parameters of the request is the <code>aggregationMode</code>, which defines if the query should use a MapReduce-like shuffling technique or push the operation down into the search engine.</p>
</div>
<div class="sect2">
<h3 id="ParallelSQLInterface-ParallelizedQueries">Parallelized Queries</h3>
<div class="paragraph">
<p>The Parallel SQL architecture consists of three logical tiers: a <strong>SQL</strong> tier, a <strong>Worker</strong> tier, and a <strong>Data Table</strong> tier. By default the SQL and Worker tiers are collapsed into the same physical SolrCloud collection.</p>
</div>
<div class="sect3">
<h4 id="ParallelSQLInterface-SQLTier">SQL Tier</h4>
<div class="paragraph">
<p>The SQL tier is where the <code>/sql</code> handler resides. The <code>/sql</code> handler takes the SQL query and translates it to a parallel query plan. It then selects worker nodes to execute the plan and sends the query plan to each worker node to be run in parallel.</p>
</div>
<div class="paragraph">
<p>Once the query plan has been executed by the worker nodes, the <code>/sql</code> handler then performs the final merge of the tuples returned by the worker nodes.</p>
</div>
</div>
<div class="sect3">
<h4 id="ParallelSQLInterface-WorkerTier">Worker Tier</h4>
<div class="paragraph">
<p>The workers in the worker tier receive the query plan from the <code>/sql</code> handler and execute the parallel query plan. The parallel execution plan includes the queries that need to be made on the Data Table tier and the relational algebra needed to satisfy the query. Each worker node assigned to the query is shuffled 1/N of the tuples from the Data Tables. The worker nodes execute the query plan and stream tuples back to the worker nodes.</p>
</div>
</div>
<div class="sect3">
<h4 id="ParallelSQLInterface-DataTableTier">Data Table Tier</h4>
<div class="paragraph">
<p>The Data Table tier is where the tables reside. Each table is its own SolrCloud collection. The Data Table layer receives queries from the worker nodes and emits tuples (search results). The Data Table tier also handles the initial sorting and partitioning of tuples sent to the workers. This means the tuples are always sorted and partitioned before they hit the network. The partitioned tuples are sent directly to the correct worker nodes in the proper sort order, ready to be reduced.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/parallel-sql-interface/cluster.png" alt="image" width="492" height="250">
</div>
</div>
<div class="paragraph">
<p>The image above shows the three tiers broken out into different SolrCloud collections for clarity. In practice the <code>/sql</code> handler and worker collection by default share the same collection.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The image shows the network flow for a single Parallel SQL Query (SQL over MapReduce). This network flow is used when <code>map_reduce</code> aggregation mode is used for <code>GROUP BY</code> aggregations or the <code>SELECT DISTINCT</code> query. The traditional SolrCloud network flow (without workers) is used when the <code>facet</code> aggregation mode is used.</p>
</div>
<div class="paragraph">
<p>Below is a description of the flow:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The client sends a SQL query to the <code>/sql</code> handler. The request is handled by a single <code>/sql</code> handler instance.</p>
</li>
<li>
<p>The <code>/sql</code> handler parses the SQL query and creates the parallel query plan.</p>
</li>
<li>
<p>The query plan is sent to worker nodes (in green).</p>
</li>
<li>
<p>The worker nodes execute the plan in parallel. The diagram shows each worker node contacting a collection in the Data Table tier (in blue).</p>
</li>
<li>
<p>The collection in the Data Table tier is the table from the SQL query. Notice that the collection has five shards each with 3 replicas.</p>
</li>
<li>
<p>Notice that each worker contacts one replica from each shard. Because there are 5 workers, each worker is returned 1/5 of the search results from each shard. The partitioning is done inside of the Data Table tier so there is no duplication of data across the network.</p>
</li>
<li>
<p>Also notice with this design ALL replicas in the data layer are shuffling (sorting &amp; partitioning) data simultaneously. As the number of shards, replicas and workers grows this design allows for a massive amount of computing power to be applied to a single query.</p>
</li>
<li>
<p>The worker nodes process the tuples returned from the Data Table tier in parallel. The worker nodes perform the relational algebra needed to satisfy the query plan.</p>
</li>
<li>
<p>The worker nodes stream tuples back to the <code>/sql</code> handler where the final merge is done, and finally the tuples are streamed back to the client.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ParallelSQLInterface-SQLClientsandDatabaseVisualizationTools">SQL Clients and Database Visualization Tools</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The SQL interface supports queries sent from SQL clients and database visualization tools such as DbVisualizer and Apache Zeppelin.</p>
</div>
<div class="sect2">
<h3 id="ParallelSQLInterface-Generic">Generic</h3>
<div class="paragraph">
<p>For most Java based clients, the following jars will need to be placed on the client classpath:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>all .jars found in <code>$SOLR_HOME/dist/solrj-libs</code></p>
</li>
<li>
<p>the SolrJ .jar found at <code>$SOLR_HOME/dist/solr-solrj-&lt;version&gt;.jar</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you are using Maven, the <code>org.apache.solr.solr-solrj</code> artifact contains the required jars.</p>
</div>
<div class="paragraph">
<p>Once the jars are available on the classpath, the Solr JDBC driver name is <code>org.apache.solr.client.solrj.io.sql.DriverImpl</code> and a connection can be made with the following connection string format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span style="color: #A0A000">jdbc:</span>solr<span style="color: #666666">:</span><span style="color: #408080; font-style: italic">//SOLR_ZK_CONNECTION_STRING?collection=COLLECTION_NAME</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>There are other parameters that can be optionally added to the connection string like <code>aggregationMode</code> and <code>numWorkers</code>. An example of a Java connection is available in the section <a href="#ParallelSQLInterface-JDBCDriver">JDBC Driver</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ParallelSQLInterface-DbVisualizer">DbVisualizer</h3>
<div class="paragraph">
<p>A step-by-step guide for setting up <a href="https://www.dbvis.com/">DbVisualizer</a> is in the section <a href="solr-jdbc-dbvisualizer.html#solr-jdbc-dbvisualizer">Solr JDBC - DbVisualizer</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ParallelSQLInterface-SQuirreLSQL">SQuirreL SQL</h3>
<div class="paragraph">
<p>A step-by-step guide for setting up <a href="http://squirrel-sql.sourceforge.net">SQuirreL SQL</a> is in the section <a href="solr-jdbc-squirrel-sql.html#solr-jdbc-squirrel-sql">Solr JDBC - SQuirreL SQL</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ParallelSQLInterface-ApacheZeppelin_incubating_">Apache Zeppelin (incubating)</h3>
<div class="paragraph">
<p>A step-by-step guide for setting up <a href="http://zeppelin.apache.org/">Apache Zeppelin</a> is in the section <a href="solr-jdbc-apache-zeppelin.html#solr-jdbc-apache-zeppelin">Solr JDBC - Apache Zeppelin</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ParallelSQLInterface-Python_Jython">Python/Jython</h3>
<div class="paragraph">
<p>Examples of using Python and Jython for connecting to Solr with the Solr JDBC driver are available in the section <a href="solr-jdbc-python-jython.html#solr-jdbc-python-jython">Solr JDBC - Python/Jython</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ParallelSQLInterface-R">R</h3>
<div class="paragraph">
<p>Examples of using R for connecting to Solr with the Solr JDBC driver are available in the section <a href="solr-jdbc-r.html#solr-jdbc-r">Solr JDBC - R</a> .</p>
</div>
</div>
</div>
</div>
</div>

<!-- Adds tags, if any -->
    <div class="tags">
        
    </div>

<!-- Adds nav links on each page -->
    
    
    <div class="scrollnav">
      
      <a class="btn btn-primary prev" href="graph-traversal.html">Graph Traversal</a>
      
      
      <a class="btn btn-primary next" href="solr-jdbc-dbvisualizer.html">Solr JDBC - DbVisualizer</a>
      
    </div>
    

</div>

<!-- Adds comments from Apache's Comment system -->

<div id="comments_thread">
</div>
<script type="text/javascript" src="https://comments.apache.org/show_comments.lua?site=solrcwiki&style=https://home.apache.org/~ctargett/RefGuidePOC/jekyll/css/comments.css&page=parallel-sql-interface" async="true">
</script>
<noscript>
<iframe width="100%" height="500" src="https://comments.apache.org/iframe.lua?site=solrcwiki&style=https://home.apache.org/~ctargett/RefGuidePOC/jekyll/css/comments.css&page=parallel-sql-interface"></iframe>
</noscript>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2017 Apache Software Foundation. All rights reserved. <br />
 Site last generated: 2017-04-26 <br />
<p><img src="solr-sunOnly-small.png" alt="Apache Solr"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
  </div>
  <!-- /.container -->
</div>

</body>

</html>

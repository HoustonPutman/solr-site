<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Pagination of Results | Apache Solr Reference Guide</title>

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-solr.css">
<link rel="stylesheet" href="css/ref-guide.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="Apache Solr Reference Guide" href="https://home.apache.org/~ctargett/RefGuidePOC/jekyll-full/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // we do *NOT* want cookies used to save the current stage of the sidebar
                             // instead the code in sidebar.html will ensure that the current page
                             // (and it's ancestors) are "active" on page load
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="apache-solr-reference-guide.html">&nbsp;<span class="projectTitle"> Solr Ref Guide 7.0</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- Link to Solr website -->
                <li><a href="https://lucene.apache.org/solr/news" target="_blank">Solr News</a></li>
                <!-- Solr Resources dropdown -->
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Solr Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                       <li><a href="https://lucene.apache.org/solr/7_0_0//solr-core/index.html" target="_blank">Solr Javadocs</a></li>
                       <li><a href="https://git1-us-west.apache.org/repos/asf?p=lucene-solr.git" target="_blank">Lucene/Solr Source Code</a></li>
                       <li><a href="https://lucene.apache.org/solr/resources.html#community" target="_blank">Solr Community Links</a></li>
                    </ul>
                </li>
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Pagination of Results">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div class="col-lg-12">&nbsp;</div>
  <!-- Content Row -->
  <div class="row">
    <!-- Sidebar Column -->
    <div class="col-md-3">
      

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">Apache Solr Reference Guide <!-- TODO: version from site.data --></li>
  
  <li class="sb-level1">
    <a href="about-this-guide.html">About This Guide</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="getting-started.html">Getting Started</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="installing-solr.html">Installing Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="running-solr.html">Running Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="a-quick-overview.html">A Quick Overview</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="a-step-closer.html">A Step Closer</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-control-script-reference.html">Solr Control Script Reference</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="upgrading-solr.html">Upgrading Solr</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="using-the-solr-administration-user-interface.html">Using the Solr Administration User Interface</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="overview-of-the-solr-admin-ui.html">Overview of the Solr Admin UI</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="getting-assistance.html">Getting Assistance</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="logging.html">Logging</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="cloud-screens.html">Cloud Screens</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="collections-core-admin.html">Collections / Core Admin</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="java-properties.html">Java Properties</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="thread-dump.html">Thread Dump</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="collection-specific-tools.html">Collection-Specific Tools</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="analysis-screen.html">Analysis Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="dataimport-screen.html">Dataimport Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="documents-screen.html">Documents Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="files-screen.html">Files Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="query-screen.html">Query Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="stream-screen.html">Stream Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="schema-browser-screen.html">Schema Browser Screen</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="core-specific-tools.html">Core-Specific Tools</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="ping.html">Ping</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="plugins-stats-screen.html">Plugins &amp; Stats Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="replication-screen.html">Replication Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="segments-info.html">Segments Info</a>
            
          </li>
          
        </ul>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="documents-fields-and-schema-design.html">Documents, Fields, and Schema Design</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="overview-of-documents-fields-and-schema-design.html">Overview of Documents, Fields, and Schema Design</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-field-types.html">Solr Field Types</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="field-type-definitions-and-properties.html">Field Type Definitions and Properties</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="field-types-included-with-solr.html">Field Types Included with Solr</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-currencies-and-exchange-rates.html">Working with Currencies and Exchange Rates</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-dates.html">Working with Dates</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-enum-fields.html">Working with Enum Fields</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-external-files-and-processes.html">Working with External Files and Processes</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="field-properties-by-use-case.html">Field Properties by Use Case</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="defining-fields.html">Defining Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="copying-fields.html">Copying Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="dynamic-fields.html">Dynamic Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="other-schema-elements.html">Other Schema Elements</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="schema-api.html">Schema API</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="putting-the-pieces-together.html">Putting the Pieces Together</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="docvalues.html">DocValues</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="schemaless-mode.html">Schemaless Mode</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="understanding-analyzers-tokenizers-and-filters.html">Understanding Analyzers, Tokenizers, and Filters</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="analyzers.html">Analyzers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="about-tokenizers.html">About Tokenizers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="about-filters.html">About Filters</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="tokenizers.html">Tokenizers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="filter-descriptions.html">Filter Descriptions</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="charfilterfactories.html">CharFilterFactories</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="language-analysis.html">Language Analysis</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="phonetic-matching.html">Phonetic Matching</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="running-your-analyzer.html">Running Your Analyzer</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="indexing-and-basic-data-operations.html">Indexing and Basic Data Operations</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="introduction-to-solr-indexing.html">Introduction to Solr Indexing</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="post-tool.html">Post Tool</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="uploading-data-with-index-handlers.html">Uploading Data with Index Handlers</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="transforming-and-indexing-custom-json.html">Transforming and Indexing Custom JSON</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="uploading-data-with-solr-cell-using-apache-tika.html">Uploading Data with Solr Cell using Apache Tika</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="uploading-structured-data-store-data-with-the-data-import-handler.html">Uploading Structured Data Store Data with the Data Import Handler</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="updating-parts-of-documents.html">Updating Parts of Documents</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="detecting-languages-during-indexing.html">Detecting Languages During Indexing</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="de-duplication.html">De-Duplication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="content-streams.html">Content Streams</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="uima-integration.html">UIMA Integration</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="searching.html">Searching</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="overview-of-searching-in-solr.html">Overview of Searching in Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="velocity-search-ui.html">Velocity Search UI</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="relevance.html">Relevance</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="query-syntax-and-parsing.html">Query Syntax and Parsing</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="common-query-parameters.html">Common Query Parameters</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="the-standard-query-parser.html">The Standard Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="the-dismax-query-parser.html">The DisMax Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="the-extended-dismax-query-parser.html">The Extended DisMax Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="function-queries.html">Function Queries</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="local-parameters-in-queries.html">Local Parameters in Queries</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="other-parsers.html">Other Parsers</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="faceting.html">Faceting</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="blockjoin-faceting.html">BlockJoin Faceting</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="highlighting.html">Highlighting</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="spell-checking.html">Spell Checking</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="query-re-ranking.html">Query Re-Ranking</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="learning-to-rank.html">Learning To Rank</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="transforming-result-documents.html">Transforming Result Documents</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="suggester.html">Suggester</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="morelikethis.html">MoreLikeThis</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="pagination-of-results.html">Pagination of Results</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="collapse-and-expand-results.html">Collapse and Expand Results</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="result-grouping.html">Result Grouping</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="result-clustering.html">Result Clustering</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="spatial-search.html">Spatial Search</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-terms-component.html">The Terms Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-term-vector-component.html">The Term Vector Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-stats-component.html">The Stats Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-query-elevation-component.html">The Query Elevation Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="response-writers.html">Response Writers</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="velocity-response-writer.html">Velocity Response Writer</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="near-real-time-searching.html">Near Real Time Searching</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="realtime-get.html">RealTime Get</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="exporting-result-sets.html">Exporting Result Sets</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="streaming-expressions.html">Streaming Expressions</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="graph-traversal.html">Graph Traversal</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="parallel-sql-interface.html">Parallel SQL Interface</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="solr-jdbc-dbvisualizer.html">Solr JDBC - DbVisualizer</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-squirrel-sql.html">Solr JDBC - SQuirreL SQL</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-apache-zeppelin.html">Solr JDBC - Apache Zeppelin</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-python-jython.html">Solr JDBC - Python/Jython</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-r.html">Solr JDBC - R</a>
            
          </li>
          
        </ul>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="the-well-configured-solr-instance.html">The Well-Configured Solr Instance</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="configuring-solrconfig-xml.html">Configuring solrconfig.xml</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="datadir-and-directoryfactory-in-solrconfig.html">DataDir and DirectoryFactory in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="lib-directives-in-solrconfig.html">Lib Directives in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="schema-factory-definition-in-solrconfig.html">Schema Factory Definition in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="indexconfig-in-solrconfig.html">IndexConfig in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="requesthandlers-and-searchcomponents-in-solrconfig.html">RequestHandlers and SearchComponents in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="initparams-in-solrconfig.html">InitParams in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="updatehandlers-in-solrconfig.html">UpdateHandlers in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="query-settings-in-solrconfig.html">Query Settings in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="requestdispatcher-in-solrconfig.html">RequestDispatcher in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="update-request-processors.html">Update Request Processors</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="codec-factory.html">Codec Factory</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-cores-and-solr-xml.html">Solr Cores and solr.xml</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="format-of-solr-xml.html">Format of solr.xml</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="defining-core-properties.html">Defining core.properties</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="coreadmin-api.html">CoreAdmin API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="config-sets.html">Config Sets</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="configuration-apis.html">Configuration APIs</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="blob-store-api.html">Blob Store API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="config-api.html">Config API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="request-parameters-api.html">Request Parameters API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="managed-resources.html">Managed Resources</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="implicit-requesthandlers.html">Implicit RequestHandlers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-plugins.html">Solr Plugins</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="adding-custom-plugins-in-solrcloud-mode.html">Adding Custom Plugins in SolrCloud Mode</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="jvm-settings.html">JVM Settings</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="managing-solr.html">Managing Solr</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="taking-solr-to-production.html">Taking Solr to Production</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="securing-solr.html">Securing Solr</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="authentication-and-authorization-plugins.html">Authentication and Authorization Plugins</a>
            
            <ul>
              
              <li class="sb-level4">
                <a href="basic-authentication-plugin.html">Basic Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="hadoop-authentication-plugin.html">Hadoop Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="kerberos-authentication-plugin.html">Kerberos Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="rule-based-authorization-plugin.html">Rule-Based Authorization Plugin</a>
                
              </li>
              
            </ul>
            
          </li>
          
          <li class="sb-level3">
            <a href="enabling-ssl.html">Enabling SSL</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="running-solr-on-hdfs.html">Running Solr on HDFS</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="making-and-restoring-backups.html">Making and Restoring Backups</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="configuring-logging.html">Configuring Logging</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-jmx-with-solr.html">Using JMX with Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="mbean-request-handler.html">MBean Request Handler</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="performance-statistics-reference.html">Performance Statistics Reference</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="metrics-reporting.html">Metrics Reporting</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="v2-api.html">v2 API</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="solrcloud.html">SolrCloud</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="getting-started-with-solrcloud.html">Getting Started with SolrCloud</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="how-solrcloud-works.html">How SolrCloud Works</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="shards-and-indexing-data-in-solrcloud.html">Shards and Indexing Data in SolrCloud</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="distributed-requests.html">Distributed Requests</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="read-and-write-side-fault-tolerance.html">Read and Write Side Fault Tolerance</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="solrcloud-configuration-and-parameters.html">SolrCloud Configuration and Parameters</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="setting-up-an-external-zookeeper-ensemble.html">Setting Up an External ZooKeeper Ensemble</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="using-zookeeper-to-manage-configuration-files.html">Using ZooKeeper to Manage Configuration Files</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="zookeeper-access-control.html">ZooKeeper Access Control</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="collections-api.html">Collections API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="parameter-reference.html">Parameter Reference</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="command-line-utilities.html">Command Line Utilities</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solrcloud-with-legacy-configuration-files.html">SolrCloud with Legacy Configuration Files</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="configsets-api.html">ConfigSets API</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="rule-based-replica-placement.html">Rule-based Replica Placement</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="cross-data-center-replication-cdcr-.html">Cross Data Center Replication (CDCR)</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="legacy-scaling-and-distribution.html">Legacy Scaling and Distribution</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="introduction-to-scaling-and-distribution.html">Introduction to Scaling and Distribution</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="distributed-search-with-index-sharding.html">Distributed Search with Index Sharding</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="index-replication.html">Index Replication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="combining-distribution-and-replication.html">Combining Distribution and Replication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="merging-indexes.html">Merging Indexes</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="client-apis.html">Client APIs</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="introduction-to-client-apis.html">Introduction to Client APIs</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="choosing-an-output-format.html">Choosing an Output Format</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="client-api-lineup.html">Client API Lineup</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-javascript.html">Using JavaScript</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-python.html">Using Python</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-solrj.html">Using SolrJ</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-solr-from-ruby.html">Using Solr From Ruby</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="major-changes-from-solr-5-to-solr-6.html">Major Changes from Solr 5 to Solr 6</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="upgrading-a-solr-cluster.html">Upgrading a Solr Cluster</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="indexupgrader-tool.html">IndexUpgrader Tool</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="further-assistance.html">Further Assistance</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="solr-glossary.html">Solr Glossary</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="errata.html">Errata</a>
    
  </li>
  
</ul>


<!-- set the 'active' class on the current page and ancestors -->
<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("#mysidebar a[href='pagination-of-results.html']").parents('li').toggleClass("active", true);</script>
<!-- set the 'current' class on the current page and 'current-tree' on the current page + it's ancestors -->
<!-- this can let us do css highlighting of the current page in the sidebar even if/when the user clicks around in the sidebar causing other sidebar elements to be 'active' -->
<script>
  $("#mysidebar a[href='pagination-of-results.html']").parent('li').toggleClass("current", true);
  $("#mysidebar a[href='pagination-of-results.html']").parents('li').toggleClass("current-tree", true);
</script>

    </div>
    <!-- Content Column -->
    <div class="col-md-9">
      <div class="post-header">
   <h1 class="post-title-main">Pagination of Results</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 2, listType: 'ul', showSpeed: 0, headers: 'h2,h3' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    

<div id="main-content">
  <div class="sect1">
<h2 id="PaginationofResults-BasicPagination">Basic Pagination</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In most search application usage, the "top" matching results (sorted by score, or some other criteria) are then displayed to some human user. In many applications the UI for these sorted results are displayed to the user in "pages" containing a fixed number of matching results, and users don&#8217;t typically look at results past the first few pages worth of results. In Solr, this basic paginated searching is supported using the <strong><code>start</code></strong> and <strong><code>rows</code></strong> parameters, and performance of this common behaviour can be tuned by utilizing the <a href="query-settings-in-solrconfig.html#QuerySettingsinSolrConfig-queryResultCache"><code>queryResultCache</code></a> and adjusting the <a href="query-settings-in-solrconfig.html#QuerySettingsinSolrConfig-queryResultWindowSize"><code>queryResultWindowSize</code></a> configuration options based on your expected page sizes.</p>
</div>
<div class="sect2">
<h3 id="PaginationofResults-BasicPaginationExamples">Basic Pagination Examples</h3>
<div class="paragraph">
<p>The easiest way to think about simple pagination, is to simply multiply the page number you want (treating the "first" page number as "0") by the number of rows per page; such as in the following psuedo-code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="plain">function fetch_solr_page($page_number, $rows_per_page) {
  $start = $page_number * $rows_per_page
  $params = [ q = $some_query, rows = $rows_per_page, start = $start ]
  return fetch_solr($params)
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="PaginationofResults-HowBasicPaginationisAffectedbyIndexUpdates">How Basic Pagination is Affected by Index Updates</h3>
<div class="paragraph">
<p>The <code>start</code> param specified in a request to Solr indicates an <strong>absolute</strong> "offset" in the complete sorted list of matches that the client wants Solr to use as the beginning of the current "page". If an index modification (such as adding or removing documents) which affects the sequence of ordered documents matching a query occurs in between two requests from a client for subsequent pages of results, then it is possible that these modifications can result in the same document being returned on multiple pages, or documents being "skipped" as the result set shrinks or grows. For example: consider an index containing 26 documents like so:</p>
</div>
<div class="paragraph">
<p>id</p>
</div>
<div class="paragraph">
<p>name</p>
</div>
<div class="paragraph">
<p>1</p>
</div>
<div class="paragraph">
<p>A</p>
</div>
<div class="paragraph">
<p>2</p>
</div>
<div class="paragraph">
<p>B</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>26</p>
</div>
<div class="paragraph">
<p>Z</p>
</div>
<div class="paragraph">
<p>Followed by the following requests &amp; index modifications interleaved:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A client requests <code>q=<strong>:</strong>&amp;rows=5&amp;start=0&amp;sort=name asc</code></p>
<div class="ulist">
<ul>
<li>
<p>documents with the ids <code>1-5</code> will be returned to the client</p>
</li>
</ul>
</div>
</li>
<li>
<p>Document id <code>3</code> is deleted</p>
</li>
<li>
<p>The client requests "page #2" using <code>q=<strong>:</strong>&amp;rows=5&amp;start=5&amp;sort=name asc</code></p>
<div class="ulist">
<ul>
<li>
<p>Documents <code>7-11</code> will be returned</p>
</li>
<li>
<p>Document <code>6</code> has been skipped, since it is now the 5th document in the sorted set of all matching results – it would be returned on a new request for "page #1"</p>
</li>
</ul>
</div>
</li>
<li>
<p>3 new documents are now added with the ids <code>90</code>, <code>91</code>, and <code>92</code>; All three documents have a name of <code>A</code></p>
</li>
<li>
<p>The client requests "page #3" using <code>q=<strong>:</strong>&amp;rows=5&amp;start=10&amp;sort=name asc</code></p>
<div class="ulist">
<ul>
<li>
<p>Documents <code>9-13</code> will be returned</p>
</li>
<li>
<p>Documents <code>9</code>, <code>10</code>, and <code>11</code> have now been returned on both page #2 and page #3 since they moved farther back in the list of sorted results</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>In typical situations these impacts from index changes on paginated searching don&#8217;t significantly affect user experience&#8201;&#8212;&#8201;either because they happen extremely infrequently in fairly static collections, or because the users recognize that the collection of data is constantly evolving and expect to see documents shift up and down in the result sets.</p>
</div>
</div>
<div class="sect2">
<h3 id="PaginationofResults-PerformanceProblemswith_DeepPaging_">Performance Problems with "Deep Paging"</h3>
<div class="paragraph">
<p>In some situations, the results of a Solr search are not destined for a simple paginated user interface. When you wish to fetch a very large number of sorted results from Solr to feed into an external system, using very large values for the <code>start</code> or <code>rows</code> parameters can be very inefficient. Pagination using <code>start</code> and <code>rows</code> not only require Solr to compute (and sort) in memory all of the matching documents that should be fetched for the current page, but also all of the documents that would have appeared on previous pages. So while a request for <code>start=0&amp;rows=1000000</code> may be obviously inefficient because it requires Solr to maintain &amp; sort in memory a set of 1 million documents, likewise a request for <code>start=999000&amp;rows=1000</code> is equally inefficient for the same reasons. Solr can&#8217;t compute which matching document is the 999001st result in sorted order, without first determining what the first 999000 matching sorted results are. If the index is distributed, which is common when running in SolrCloud mode, then 1 million documents are retrieved from <strong>each shard</strong>. For a ten shard index, ten million entries must be retrieved and sorted to figure out the 1000 documents that match those query parameters.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="PaginationofResults-FetchingALargeNumberofSortedResults_Cursors">Fetching A Large Number of Sorted Results: Cursors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As an alternative to increasing the "start" parameter to request subsequent pages of sorted results, Solr supports using a "Cursor" to scan through results. Cursors in Solr are a logical concept, that doesn&#8217;t involve caching any state information on the server. Instead the sort values of the last document returned to the client are used to compute a "mark" representing a logical point in the ordered space of sort values. That "mark" can be specified in the parameters of subsequent requests to tell Solr where to continue.</p>
</div>
<div class="sect2">
<h3 id="PaginationofResults-UsingCursors">Using Cursors</h3>
<div class="paragraph">
<p>To use a cursor with Solr, specify a <strong><code>cursorMark</code></strong> parameter with the value of <code>" * "</code>. You can think of this being analogous to <code>start=0</code> as a way to tell Solr "start at the beginning of my sorted results" except that it also informs Solr that you want to use a Cursor. So in addition to returning the top N sorted results (where you can control N using the <code>rows</code> parameter) the Solr response will also include an encoded String named <strong><code>nextCursorMark</code></strong> . You then take the <code>nextCursorMark</code> String value from the response, and pass it back to Solr as the <code>cursorMark</code> parameter for your next request. You can repeat this process until you&#8217;ve fetched as many docs as you want, or until the <code>nextCursorMark</code> returned matches the <code>cursorMark</code> you&#8217;ve already specified&#8201;&#8212;&#8201;indicating that there are no more results.</p>
</div>
</div>
<div class="sect2">
<h3 id="PaginationofResults-ConstraintswhenusingCursors">Constraints when using Cursors</h3>
<div class="paragraph">
<p>There are a few important constraints to be aware of when using <code>cursorMark</code> parameter in a Solr request</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>cursorMark</code> and <code>start</code> are mutually exclusive parameters</p>
<div class="ulist">
<ul>
<li>
<p>Your requests must either not include a <code>start</code> parameter, or it must be specified with a value of &#8220;<code>0</code>&#8221;.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>sort</code> clauses must include the uniqueKey field (either &#8220;<code>asc</code>&#8221; or `"desc`")</p>
<div class="ulist">
<ul>
<li>
<p>If <code>id</code> is your uniqueKey field, then sort params like <code>id asc</code> and <code>name asc, id desc</code> would both work fine, but <code>name asc</code> by itself would not</p>
</li>
</ul>
</div>
</li>
<li>
<p>Sorts including <a href="working-with-dates.html#working-with-dates">Date Math</a> based functions that involve calculations relative to <code>NOW</code> will cause confusing results, since every document will get a new sort value on every subsequent request. This can easily result in cursors that never end, and constantly return the same documents over and over – even if the documents are never updated. In this situation, choose &amp; re-use a fixed value for the <a href="working-with-dates.html#WorkingwithDates-NOW"><code>NOW</code> request param</a> in all of your cursor requests.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Cursor mark values are computed based on the sort values of each document in the result, which means multiple documents with identical sort values will produce identical Cursor mark values if one of them is the last document on a page of results. In that situation, the subsequent request using that <code>cursorMark</code> would not know which of the documents with the identical mark values should be skipped. Requiring that the uniqueKey field be used as a clause in the sort criteria guarantees that a deterministic ordering will be returned, and that every <code>cursorMark</code> value will identify a unique point in the sequence of documents.</p>
</div>
</div>
<div class="sect2">
<h3 id="PaginationofResults-CursorExamples">Cursor Examples</h3>
<div class="sect3">
<h4 id="PaginationofResults-FetchAllDocs">Fetch All Docs</h4>
<div class="paragraph">
<p>The psuedo-code shown here shows the basic logic involved in fetching all documents matching a query using a cursor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="plain">// when fetching all docs, you might as well use a simple id sort
// unless you really need the docs to come back in a specific order
$params = [ q =&gt; $some_query, sort =&gt; &#39;id asc&#39;, rows =&gt; $r, cursorMark =&gt; &#39;*&#39; ]
$done = false
while (not $done) {
  $results = fetch_solr($params)
  // do something with $results
  if ($params[cursorMark] == $results[nextCursorMark]) {
    $done = true
  }
  $params[cursorMark] = $results[nextCursorMark]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using SolrJ, this psuedo-code would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">SolrQuery q <span style="color: #666666">=</span> <span style="color: #666666">(</span><span style="color: #008000; font-weight: bold">new</span> SolrQuery<span style="color: #666666">(</span>some_query<span style="color: #666666">)).</span><span style="color: #7D9029">setRows</span><span style="color: #666666">(</span>r<span style="color: #666666">).</span><span style="color: #7D9029">setSort</span><span style="color: #666666">(</span>SortClause<span style="color: #666666">.</span><span style="color: #7D9029">asc</span><span style="color: #666666">(</span><span style="color: #BA2121">&quot;id&quot;</span><span style="color: #666666">));</span>
String cursorMark <span style="color: #666666">=</span> CursorMarkParams<span style="color: #666666">.</span><span style="color: #7D9029">CURSOR_MARK_START</span><span style="color: #666666">;</span>
<span style="color: #B00040">boolean</span> done <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">false</span><span style="color: #666666">;</span>
<span style="color: #008000; font-weight: bold">while</span> <span style="color: #666666">(!</span> done<span style="color: #666666">)</span> <span style="color: #666666">{</span>
  q<span style="color: #666666">.</span><span style="color: #7D9029">set</span><span style="color: #666666">(</span>CursorMarkParams<span style="color: #666666">.</span><span style="color: #7D9029">CURSOR_MARK_PARAM</span><span style="color: #666666">,</span> cursorMark<span style="color: #666666">);</span>
  QueryResponse rsp <span style="color: #666666">=</span> solrServer<span style="color: #666666">.</span><span style="color: #7D9029">query</span><span style="color: #666666">(</span>q<span style="color: #666666">);</span>
  String nextCursorMark <span style="color: #666666">=</span> rsp<span style="color: #666666">.</span><span style="color: #7D9029">getNextCursorMark</span><span style="color: #666666">();</span>
  doCustomProcessingOfResults<span style="color: #666666">(</span>rsp<span style="color: #666666">);</span>
  <span style="color: #008000; font-weight: bold">if</span> <span style="color: #666666">(</span>cursorMark<span style="color: #666666">.</span><span style="color: #7D9029">equals</span><span style="color: #666666">(</span>nextCursorMark<span style="color: #666666">))</span> <span style="color: #666666">{</span>
    done <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">true</span><span style="color: #666666">;</span>
  <span style="color: #666666">}</span>
  cursorMark <span style="color: #666666">=</span> nextCursorMark<span style="color: #666666">;</span>
<span style="color: #666666">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you wanted to do this by hand using curl, the sequence of requests would look something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">$ curl <span style="border: 1px solid #FF0000">&#39;</span><span style="color: #666666">...&amp;</span>rows<span style="color: #666666">=10&amp;</span>sort<span style="color: #666666">=</span>id<span style="color: #666666">+</span>asc<span style="color: #666666">&amp;</span>cursorMark<span style="color: #666666">=*</span><span style="border: 1px solid #FF0000">&#39;</span>
<span style="color: #666666">{</span>
  <span style="color: #BA2121">&quot;response&quot;</span><span style="color: #666666">:{</span><span style="color: #BA2121">&quot;numFound&quot;</span><span style="color: #666666">:32,</span><span style="color: #BA2121">&quot;start&quot;</span><span style="color: #666666">:0,</span><span style="color: #BA2121">&quot;docs&quot;</span><span style="color: #666666">:[</span>
    <span style="color: #408080; font-style: italic">// ... 10 docs here ...</span>
  <span style="color: #666666">]},</span>
  <span style="color: #BA2121">&quot;nextCursorMark&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;AoEjR0JQ&quot;</span><span style="color: #666666">}</span>
$ curl <span style="border: 1px solid #FF0000">&#39;</span><span style="color: #666666">...&amp;</span>rows<span style="color: #666666">=10&amp;</span>sort<span style="color: #666666">=</span>id<span style="color: #666666">+</span>asc<span style="color: #666666">&amp;</span>cursorMark<span style="color: #666666">=</span>AoEjR0JQ<span style="border: 1px solid #FF0000">&#39;</span>
<span style="color: #666666">{</span>
  <span style="color: #BA2121">&quot;response&quot;</span><span style="color: #666666">:{</span><span style="color: #BA2121">&quot;numFound&quot;</span><span style="color: #666666">:32,</span><span style="color: #BA2121">&quot;start&quot;</span><span style="color: #666666">:0,</span><span style="color: #BA2121">&quot;docs&quot;</span><span style="color: #666666">:[</span>
    <span style="color: #408080; font-style: italic">// ... 10 more docs here ...</span>
  <span style="color: #666666">]},</span>
  <span style="color: #BA2121">&quot;nextCursorMark&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;AoEpVkRCREIxQTE2&quot;</span><span style="color: #666666">}</span>
$ curl <span style="border: 1px solid #FF0000">&#39;</span><span style="color: #666666">...&amp;</span>rows<span style="color: #666666">=10&amp;</span>sort<span style="color: #666666">=</span>id<span style="color: #666666">+</span>asc<span style="color: #666666">&amp;</span>cursorMark<span style="color: #666666">=</span>AoEpVkRCREIxQTE2<span style="border: 1px solid #FF0000">&#39;</span>
<span style="color: #666666">{</span>
  <span style="color: #BA2121">&quot;response&quot;</span><span style="color: #666666">:{</span><span style="color: #BA2121">&quot;numFound&quot;</span><span style="color: #666666">:32,</span><span style="color: #BA2121">&quot;start&quot;</span><span style="color: #666666">:0,</span><span style="color: #BA2121">&quot;docs&quot;</span><span style="color: #666666">:[</span>
    <span style="color: #408080; font-style: italic">// ... 10 more docs here ...</span>
  <span style="color: #666666">]},</span>
  <span style="color: #BA2121">&quot;nextCursorMark&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;AoEmbWF4dG9y&quot;</span><span style="color: #666666">}</span>
$ curl <span style="border: 1px solid #FF0000">&#39;</span><span style="color: #666666">...&amp;</span>rows<span style="color: #666666">=10&amp;</span>sort<span style="color: #666666">=</span>id<span style="color: #666666">+</span>asc<span style="color: #666666">&amp;</span>cursorMark<span style="color: #666666">=</span>AoEmbWF4dG9y<span style="border: 1px solid #FF0000">&#39;</span>
<span style="color: #666666">{</span>
  <span style="color: #BA2121">&quot;response&quot;</span><span style="color: #666666">:{</span><span style="color: #BA2121">&quot;numFound&quot;</span><span style="color: #666666">:32,</span><span style="color: #BA2121">&quot;start&quot;</span><span style="color: #666666">:0,</span><span style="color: #BA2121">&quot;docs&quot;</span><span style="color: #666666">:[</span>
    <span style="color: #408080; font-style: italic">// ... 2 docs here because we&#39;ve reached the end.</span>
  <span style="color: #666666">]},</span>
  <span style="color: #BA2121">&quot;nextCursorMark&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;AoEpdmlld3Nvbmlj&quot;</span><span style="color: #666666">}</span>
$ curl <span style="border: 1px solid #FF0000">&#39;</span><span style="color: #666666">...&amp;</span>rows<span style="color: #666666">=10&amp;</span>sort<span style="color: #666666">=</span>id<span style="color: #666666">+</span>asc<span style="color: #666666">&amp;</span>cursorMark<span style="color: #666666">=</span>AoEpdmlld3Nvbmlj<span style="border: 1px solid #FF0000">&#39;</span>
<span style="color: #666666">{</span>
  <span style="color: #BA2121">&quot;response&quot;</span><span style="color: #666666">:{</span><span style="color: #BA2121">&quot;numFound&quot;</span><span style="color: #666666">:32,</span><span style="color: #BA2121">&quot;start&quot;</span><span style="color: #666666">:0,</span><span style="color: #BA2121">&quot;docs&quot;</span><span style="color: #666666">:[</span>
    <span style="color: #408080; font-style: italic">// no more docs here, and note that the nextCursorMark</span>
    <span style="color: #408080; font-style: italic">// matches the cursorMark param we used</span>
  <span style="color: #666666">]},</span>
  <span style="color: #BA2121">&quot;nextCursorMark&quot;</span><span style="color: #666666">:</span><span style="color: #BA2121">&quot;AoEpdmlld3Nvbmlj&quot;</span><span style="color: #666666">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="PaginationofResults-FetchfirstNdocs_BasedonPostProcessing">Fetch first N docs, Based on Post Processing</h4>
<div class="paragraph">
<p>Since the cursor is stateless from Solr&#8217;s perspective, your client code can stop fetching additional results as soon as you have decided you have enough information:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span style="color: #008000; font-weight: bold">while</span> <span style="color: #666666">(!</span> done<span style="color: #666666">)</span> <span style="color: #666666">{</span>
  q<span style="color: #666666">.</span><span style="color: #7D9029">set</span><span style="color: #666666">(</span>CursorMarkParams<span style="color: #666666">.</span><span style="color: #7D9029">CURSOR_MARK_PARAM</span><span style="color: #666666">,</span> cursorMark<span style="color: #666666">);</span>
  QueryResponse rsp <span style="color: #666666">=</span> solrServer<span style="color: #666666">.</span><span style="color: #7D9029">query</span><span style="color: #666666">(</span>q<span style="color: #666666">);</span>
  String nextCursorMark <span style="color: #666666">=</span> rsp<span style="color: #666666">.</span><span style="color: #7D9029">getNextCursorMark</span><span style="color: #666666">();</span>
  <span style="color: #B00040">boolean</span> hadEnough <span style="color: #666666">=</span> doCustomProcessingOfResults<span style="color: #666666">(</span>rsp<span style="color: #666666">);</span>
  <span style="color: #008000; font-weight: bold">if</span> <span style="color: #666666">(</span>hadEnough <span style="color: #666666">||</span> cursorMark<span style="color: #666666">.</span><span style="color: #7D9029">equals</span><span style="color: #666666">(</span>nextCursorMark<span style="color: #666666">))</span> <span style="color: #666666">{</span>
    done <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">true</span><span style="color: #666666">;</span>
  <span style="color: #666666">}</span>
  cursorMark <span style="color: #666666">=</span> nextCursorMark<span style="color: #666666">;</span>
<span style="color: #666666">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="PaginationofResults-HowcursorsareAffectedbyIndexUpdates">How cursors are Affected by Index Updates</h3>
<div class="paragraph">
<p>Unlike basic pagination, Cursor pagination does not rely on using an absolute "offset" into the completed sorted list of matching documents. Instead, the <code>cursorMark</code> specified in a request encapsulates information about the <strong>relative</strong> position of the last document returned, based on the <strong>absolute</strong> sort values of that document. This means that the impact of index modifications is much smaller when using a cursor compared to basic pagination. Consider the same example index described when discussing basic pagination:</p>
</div>
<div class="paragraph">
<p>id</p>
</div>
<div class="paragraph">
<p>name</p>
</div>
<div class="paragraph">
<p>1</p>
</div>
<div class="paragraph">
<p>A</p>
</div>
<div class="paragraph">
<p>2</p>
</div>
<div class="paragraph">
<p>B</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>26</p>
</div>
<div class="paragraph">
<p>Z</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A client requests <code>q=<strong>:</strong>&amp;rows=5&amp;start=0&amp;sort=name asc, id asc&amp;cursorMark=*</code></p>
<div class="ulist">
<ul>
<li>
<p>Documents with the ids <code>1-5</code> will be returned to the client in order</p>
</li>
</ul>
</div>
</li>
<li>
<p>Document id <code>3</code> is deleted</p>
</li>
<li>
<p>The client requests 5 more documents using the <code>nextCursorMark</code> from the previous response</p>
<div class="ulist">
<ul>
<li>
<p>Documents <code>6-10</code> will be returned&#8201;&#8212;&#8201;the deletion of a document that&#8217;s already been returned doesn&#8217;t affect the relative position of the cursor</p>
</li>
</ul>
</div>
</li>
<li>
<p>3 new documents are now added with the ids <code>90</code>, <code>91</code>, and <code>92</code>; All three documents have a name of <code>A</code></p>
</li>
<li>
<p>The client requests 5 more documents using the <code>nextCursorMark</code> from the previous response</p>
<div class="ulist">
<ul>
<li>
<p>Documents <code>11-15</code> will be returned&#8201;&#8212;&#8201;the addition of new documents with sort values already past does not affect the relative position of the cursor</p>
</li>
</ul>
</div>
</li>
<li>
<p>Document id <code>1</code> is updated to change its 'name' to <code>Q</code></p>
</li>
<li>
<p>Document id 17 is updated to change its 'name' to <code>A</code></p>
</li>
<li>
<p>The client requests 5 more documents using the <code>nextCursorMark</code> from the previous response</p>
<div class="ulist">
<ul>
<li>
<p>The resulting documents are <code>16,1,18,19,20</code> in that order</p>
</li>
<li>
<p>Because the sort value of document <code>1</code> changed so that it is <em>after</em> the cursor position, the document is returned to the client twice</p>
</li>
<li>
<p>Because the sort value of document <code>17</code> changed so that it is <em>before</em> the cursor position, the document has been "skipped" and will not be returned to the client as the cursor continues to progress</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>In a nutshell: When fetching all results matching a query using <code>cursorMark</code>, the only way index modifications can result in a document being skipped, or returned twice, is if the sort value of the document changes.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>One way to ensure that a document will never be returned more then once, is to use the uniqueKey field as the primary (and therefore: only significant) sort criterion.</p>
</div>
<div class="paragraph">
<p>In this situation, you will be guaranteed that each document is only returned once, no matter how it may be be modified during the use of the cursor.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="PaginationofResults-_Tailing_aCursor">"Tailing" a Cursor</h3>
<div class="paragraph">
<p>Because Cursor requests are stateless, and the <code>cursorMark</code> values encapsulate the <strong>absolute</strong> sort values of the last document returned from a search, it&#8217;s possible to "continue" fetching additional results from a cursor that has already reached its end&#8201;&#8212;&#8201;if new documents are added (or existing documents are updated) to the end of the results. You can think of this as similar to using something like "`tail -f"` in Unix. The most common examples of how this can be useful is when you have a "timestamp" field recording when a document has been added/updated in your index. Client applications can continuously poll a cursor using a <code>sort=timestamp asc, id asc</code> for documents matching a query, and always be notified when a document is added or updated matching the request criteria. Another common example is when you have uniqueKey values that always increase as new documents are created, and you can continuously poll a cursor using <code>sort=id asc</code> to be notified about new documents. The psuedo-code for tailing a cursor is only a slight modification from our early example for processing all docs matching a query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span style="color: #008000; font-weight: bold">while</span> <span style="color: #666666">(</span><span style="color: #008000; font-weight: bold">true</span><span style="color: #666666">)</span> <span style="color: #666666">{</span>
  $doneForNow <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">false</span>
  <span style="color: #0000FF">while</span> <span style="color: #666666">(</span>not $doneForNow<span style="color: #666666">)</span> <span style="color: #666666">{</span>
    $results <span style="color: #666666">=</span> fetch_solr<span style="color: #666666">(</span>$params<span style="color: #666666">)</span>
    <span style="color: #408080; font-style: italic">// do something with $results</span>
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #666666">(</span>$params<span style="color: #666666">[</span>cursorMark<span style="color: #666666">]</span> <span style="color: #666666">==</span> $results<span style="color: #666666">[</span>nextCursorMark<span style="color: #666666">])</span> <span style="color: #666666">{</span>
      $doneForNow <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">true</span>
    <span style="color: #666666">}</span>
    $params<span style="color: #666666">[</span>cursorMark<span style="color: #666666">]</span> <span style="color: #666666">=</span> $results<span style="color: #666666">[</span>nextCursorMark<span style="color: #666666">]</span>
  <span style="color: #666666">}</span>
  sleep<span style="color: #666666">(</span>$some_configured_delay<span style="color: #666666">)</span>
<span style="color: #666666">}</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For certain specialized cases, the <a href="exporting-result-sets.html#exporting-result-sets">/export handler</a> may be an option.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>

<!-- Adds tags, if any -->
    <div class="tags">
        
    </div>

<!-- Adds nav links on each page -->
    
    
    <div class="scrollnav">
      
      <a class="btn btn-primary prev" href="morelikethis.html">MoreLikeThis</a>
      
      
      <a class="btn btn-primary next" href="collapse-and-expand-results.html">Collapse and Expand Results</a>
      
    </div>
    

</div>

<!-- Adds comments from Apache's Comment system -->

<div id="comments_thread">
</div>
<script type="text/javascript" src="https://comments.apache.org/show_comments.lua?site=solrcwiki&style=https://home.apache.org/~ctargett/RefGuidePOC/jekyll/css/comments.css&page=pagination-of-results" async="true">
</script>
<noscript>
<iframe width="100%" height="500" src="https://comments.apache.org/iframe.lua?site=solrcwiki&style=https://home.apache.org/~ctargett/RefGuidePOC/jekyll/css/comments.css&page=pagination-of-results"></iframe>
</noscript>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2017 Apache Software Foundation. All rights reserved. <br />
 Site last generated: 2017-04-26 <br />
<p><img src="solr-sunOnly-small.png" alt="Apache Solr"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
  </div>
  <!-- /.container -->
</div>

</body>

</html>

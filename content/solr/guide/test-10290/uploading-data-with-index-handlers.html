<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Uploading Data with Index Handlers | Apache Solr Reference Guide</title>

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-solr.css">
<link rel="stylesheet" href="css/ref-guide.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="Apache Solr Reference Guide" href="https://home.apache.org/~ctargett/RefGuidePOC/jekyll-full/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // we do *NOT* want cookies used to save the current stage of the sidebar
                             // instead the code in sidebar.html will ensure that the current page
                             // (and it's ancestors) are "active" on page load
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="apache-solr-reference-guide.html">&nbsp;<span class="projectTitle"> Solr Ref Guide 7.0</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- Link to Solr website -->
                <li><a href="https://lucene.apache.org/solr/news" target="_blank">Solr News</a></li>
                <!-- Solr Resources dropdown -->
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Solr Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                       <li><a href="https://lucene.apache.org/solr/7_0_0//solr-core/index.html" target="_blank">Solr Javadocs</a></li>
                       <li><a href="https://git1-us-west.apache.org/repos/asf?p=lucene-solr.git" target="_blank">Lucene/Solr Source Code</a></li>
                       <li><a href="https://lucene.apache.org/solr/resources.html#community" target="_blank">Solr Community Links</a></li>
                    </ul>
                </li>
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Uploading Data with Index Handlers">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div class="col-lg-12">&nbsp;</div>
  <!-- Content Row -->
  <div class="row">
    <!-- Sidebar Column -->
    <div class="col-md-3">
      

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">Apache Solr Reference Guide <!-- TODO: version from site.data --></li>
  
  <li class="sb-level1">
    <a href="about-this-guide.html">About This Guide</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="getting-started.html">Getting Started</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="installing-solr.html">Installing Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="running-solr.html">Running Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="a-quick-overview.html">A Quick Overview</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="a-step-closer.html">A Step Closer</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-control-script-reference.html">Solr Control Script Reference</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="upgrading-solr.html">Upgrading Solr</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="using-the-solr-administration-user-interface.html">Using the Solr Administration User Interface</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="overview-of-the-solr-admin-ui.html">Overview of the Solr Admin UI</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="getting-assistance.html">Getting Assistance</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="logging.html">Logging</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="cloud-screens.html">Cloud Screens</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="collections-core-admin.html">Collections / Core Admin</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="java-properties.html">Java Properties</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="thread-dump.html">Thread Dump</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="collection-specific-tools.html">Collection-Specific Tools</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="analysis-screen.html">Analysis Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="dataimport-screen.html">Dataimport Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="documents-screen.html">Documents Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="files-screen.html">Files Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="query-screen.html">Query Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="stream-screen.html">Stream Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="schema-browser-screen.html">Schema Browser Screen</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="core-specific-tools.html">Core-Specific Tools</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="ping.html">Ping</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="plugins-stats-screen.html">Plugins &amp; Stats Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="replication-screen.html">Replication Screen</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="segments-info.html">Segments Info</a>
            
          </li>
          
        </ul>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="documents-fields-and-schema-design.html">Documents, Fields, and Schema Design</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="overview-of-documents-fields-and-schema-design.html">Overview of Documents, Fields, and Schema Design</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-field-types.html">Solr Field Types</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="field-type-definitions-and-properties.html">Field Type Definitions and Properties</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="field-types-included-with-solr.html">Field Types Included with Solr</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-currencies-and-exchange-rates.html">Working with Currencies and Exchange Rates</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-dates.html">Working with Dates</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-enum-fields.html">Working with Enum Fields</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="working-with-external-files-and-processes.html">Working with External Files and Processes</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="field-properties-by-use-case.html">Field Properties by Use Case</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="defining-fields.html">Defining Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="copying-fields.html">Copying Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="dynamic-fields.html">Dynamic Fields</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="other-schema-elements.html">Other Schema Elements</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="schema-api.html">Schema API</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="putting-the-pieces-together.html">Putting the Pieces Together</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="docvalues.html">DocValues</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="schemaless-mode.html">Schemaless Mode</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="understanding-analyzers-tokenizers-and-filters.html">Understanding Analyzers, Tokenizers, and Filters</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="analyzers.html">Analyzers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="about-tokenizers.html">About Tokenizers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="about-filters.html">About Filters</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="tokenizers.html">Tokenizers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="filter-descriptions.html">Filter Descriptions</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="charfilterfactories.html">CharFilterFactories</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="language-analysis.html">Language Analysis</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="phonetic-matching.html">Phonetic Matching</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="running-your-analyzer.html">Running Your Analyzer</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="indexing-and-basic-data-operations.html">Indexing and Basic Data Operations</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="introduction-to-solr-indexing.html">Introduction to Solr Indexing</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="post-tool.html">Post Tool</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="uploading-data-with-index-handlers.html">Uploading Data with Index Handlers</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="transforming-and-indexing-custom-json.html">Transforming and Indexing Custom JSON</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="uploading-data-with-solr-cell-using-apache-tika.html">Uploading Data with Solr Cell using Apache Tika</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="uploading-structured-data-store-data-with-the-data-import-handler.html">Uploading Structured Data Store Data with the Data Import Handler</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="updating-parts-of-documents.html">Updating Parts of Documents</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="detecting-languages-during-indexing.html">Detecting Languages During Indexing</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="de-duplication.html">De-Duplication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="content-streams.html">Content Streams</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="uima-integration.html">UIMA Integration</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="searching.html">Searching</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="overview-of-searching-in-solr.html">Overview of Searching in Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="velocity-search-ui.html">Velocity Search UI</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="relevance.html">Relevance</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="query-syntax-and-parsing.html">Query Syntax and Parsing</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="common-query-parameters.html">Common Query Parameters</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="the-standard-query-parser.html">The Standard Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="the-dismax-query-parser.html">The DisMax Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="the-extended-dismax-query-parser.html">The Extended DisMax Query Parser</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="function-queries.html">Function Queries</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="local-parameters-in-queries.html">Local Parameters in Queries</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="other-parsers.html">Other Parsers</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="faceting.html">Faceting</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="blockjoin-faceting.html">BlockJoin Faceting</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="highlighting.html">Highlighting</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="spell-checking.html">Spell Checking</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="query-re-ranking.html">Query Re-Ranking</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="learning-to-rank.html">Learning To Rank</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="transforming-result-documents.html">Transforming Result Documents</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="suggester.html">Suggester</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="morelikethis.html">MoreLikeThis</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="pagination-of-results.html">Pagination of Results</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="collapse-and-expand-results.html">Collapse and Expand Results</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="result-grouping.html">Result Grouping</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="result-clustering.html">Result Clustering</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="spatial-search.html">Spatial Search</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-terms-component.html">The Terms Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-term-vector-component.html">The Term Vector Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-stats-component.html">The Stats Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="the-query-elevation-component.html">The Query Elevation Component</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="response-writers.html">Response Writers</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="velocity-response-writer.html">Velocity Response Writer</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="near-real-time-searching.html">Near Real Time Searching</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="realtime-get.html">RealTime Get</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="exporting-result-sets.html">Exporting Result Sets</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="streaming-expressions.html">Streaming Expressions</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="graph-traversal.html">Graph Traversal</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="parallel-sql-interface.html">Parallel SQL Interface</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="solr-jdbc-dbvisualizer.html">Solr JDBC - DbVisualizer</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-squirrel-sql.html">Solr JDBC - SQuirreL SQL</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-apache-zeppelin.html">Solr JDBC - Apache Zeppelin</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-python-jython.html">Solr JDBC - Python/Jython</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solr-jdbc-r.html">Solr JDBC - R</a>
            
          </li>
          
        </ul>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="the-well-configured-solr-instance.html">The Well-Configured Solr Instance</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="configuring-solrconfig-xml.html">Configuring solrconfig.xml</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="datadir-and-directoryfactory-in-solrconfig.html">DataDir and DirectoryFactory in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="lib-directives-in-solrconfig.html">Lib Directives in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="schema-factory-definition-in-solrconfig.html">Schema Factory Definition in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="indexconfig-in-solrconfig.html">IndexConfig in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="requesthandlers-and-searchcomponents-in-solrconfig.html">RequestHandlers and SearchComponents in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="initparams-in-solrconfig.html">InitParams in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="updatehandlers-in-solrconfig.html">UpdateHandlers in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="query-settings-in-solrconfig.html">Query Settings in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="requestdispatcher-in-solrconfig.html">RequestDispatcher in SolrConfig</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="update-request-processors.html">Update Request Processors</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="codec-factory.html">Codec Factory</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-cores-and-solr-xml.html">Solr Cores and solr.xml</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="format-of-solr-xml.html">Format of solr.xml</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="defining-core-properties.html">Defining core.properties</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="coreadmin-api.html">CoreAdmin API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="config-sets.html">Config Sets</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="configuration-apis.html">Configuration APIs</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="blob-store-api.html">Blob Store API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="config-api.html">Config API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="request-parameters-api.html">Request Parameters API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="managed-resources.html">Managed Resources</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="implicit-requesthandlers.html">Implicit RequestHandlers</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="solr-plugins.html">Solr Plugins</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="adding-custom-plugins-in-solrcloud-mode.html">Adding Custom Plugins in SolrCloud Mode</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="jvm-settings.html">JVM Settings</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="managing-solr.html">Managing Solr</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="taking-solr-to-production.html">Taking Solr to Production</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="securing-solr.html">Securing Solr</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="authentication-and-authorization-plugins.html">Authentication and Authorization Plugins</a>
            
            <ul>
              
              <li class="sb-level4">
                <a href="basic-authentication-plugin.html">Basic Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="hadoop-authentication-plugin.html">Hadoop Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="kerberos-authentication-plugin.html">Kerberos Authentication Plugin</a>
                
              </li>
              
              <li class="sb-level4">
                <a href="rule-based-authorization-plugin.html">Rule-Based Authorization Plugin</a>
                
              </li>
              
            </ul>
            
          </li>
          
          <li class="sb-level3">
            <a href="enabling-ssl.html">Enabling SSL</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="running-solr-on-hdfs.html">Running Solr on HDFS</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="making-and-restoring-backups.html">Making and Restoring Backups</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="configuring-logging.html">Configuring Logging</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-jmx-with-solr.html">Using JMX with Solr</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="mbean-request-handler.html">MBean Request Handler</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="performance-statistics-reference.html">Performance Statistics Reference</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="metrics-reporting.html">Metrics Reporting</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="v2-api.html">v2 API</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="solrcloud.html">SolrCloud</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="getting-started-with-solrcloud.html">Getting Started with SolrCloud</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="how-solrcloud-works.html">How SolrCloud Works</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="shards-and-indexing-data-in-solrcloud.html">Shards and Indexing Data in SolrCloud</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="distributed-requests.html">Distributed Requests</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="read-and-write-side-fault-tolerance.html">Read and Write Side Fault Tolerance</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="solrcloud-configuration-and-parameters.html">SolrCloud Configuration and Parameters</a>
        
        <ul>
          
          <li class="sb-level3">
            <a href="setting-up-an-external-zookeeper-ensemble.html">Setting Up an External ZooKeeper Ensemble</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="using-zookeeper-to-manage-configuration-files.html">Using ZooKeeper to Manage Configuration Files</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="zookeeper-access-control.html">ZooKeeper Access Control</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="collections-api.html">Collections API</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="parameter-reference.html">Parameter Reference</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="command-line-utilities.html">Command Line Utilities</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="solrcloud-with-legacy-configuration-files.html">SolrCloud with Legacy Configuration Files</a>
            
          </li>
          
          <li class="sb-level3">
            <a href="configsets-api.html">ConfigSets API</a>
            
          </li>
          
        </ul>
        
      </li>
      
      <li class="sb-level2">
        <a href="rule-based-replica-placement.html">Rule-based Replica Placement</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="cross-data-center-replication-cdcr-.html">Cross Data Center Replication (CDCR)</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="legacy-scaling-and-distribution.html">Legacy Scaling and Distribution</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="introduction-to-scaling-and-distribution.html">Introduction to Scaling and Distribution</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="distributed-search-with-index-sharding.html">Distributed Search with Index Sharding</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="index-replication.html">Index Replication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="combining-distribution-and-replication.html">Combining Distribution and Replication</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="merging-indexes.html">Merging Indexes</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="client-apis.html">Client APIs</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="introduction-to-client-apis.html">Introduction to Client APIs</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="choosing-an-output-format.html">Choosing an Output Format</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="client-api-lineup.html">Client API Lineup</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-javascript.html">Using JavaScript</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-python.html">Using Python</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-solrj.html">Using SolrJ</a>
        
      </li>
      
      <li class="sb-level2">
        <a href="using-solr-from-ruby.html">Using Solr From Ruby</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="major-changes-from-solr-5-to-solr-6.html">Major Changes from Solr 5 to Solr 6</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="upgrading-a-solr-cluster.html">Upgrading a Solr Cluster</a>
    
    <ul>
      
      <li class="sb-level2">
        <a href="indexupgrader-tool.html">IndexUpgrader Tool</a>
        
      </li>
      
    </ul>
    
  </li>
  
  <li class="sb-level1">
    <a href="further-assistance.html">Further Assistance</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="solr-glossary.html">Solr Glossary</a>
    
  </li>
  
  <li class="sb-level1">
    <a href="errata.html">Errata</a>
    
  </li>
  
</ul>


<!-- set the 'active' class on the current page and ancestors -->
<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("#mysidebar a[href='uploading-data-with-index-handlers.html']").parents('li').toggleClass("active", true);</script>
<!-- set the 'current' class on the current page and 'current-tree' on the current page + it's ancestors -->
<!-- this can let us do css highlighting of the current page in the sidebar even if/when the user clicks around in the sidebar causing other sidebar elements to be 'active' -->
<script>
  $("#mysidebar a[href='uploading-data-with-index-handlers.html']").parent('li').toggleClass("current", true);
  $("#mysidebar a[href='uploading-data-with-index-handlers.html']").parents('li').toggleClass("current-tree", true);
</script>

    </div>
    <!-- Content Column -->
    <div class="col-md-9">
      <div class="post-header">
   <h1 class="post-title-main">Uploading Data with Index Handlers</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 2, listType: 'ul', showSpeed: 0, headers: 'h2,h3' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    

<div id="main-content">
  <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Index Handlers are Request Handlers designed to add, delete and update documents to the index. In addition to having plugins for importing rich documents <a href="uploading-data-with-solr-cell-using-apache-tika.html#uploading-data-with-solr-cell-using-apache-tika">using Tika</a> or from structured data sources using the <a href="uploading-structured-data-store-data-with-the-data-import-handler.html#uploading-structured-data-store-data-with-the-data-import-handler">Data Import Handler</a>, Solr natively supports indexing structured documents in XML, CSV and JSON.</p>
</div>
<div class="paragraph">
<p>The recommended way to configure and use request handlers is with path based names that map to paths in the request url. However, request handlers can also be specified with the <code>qt</code> (query type) parameter if the <a href="requestdispatcher-in-solrconfig.html#requestdispatcher-in-solrconfig"><code>requestDispatcher</code></a> is appropriately configured. It is possible to access the same handler using more than one name, which can be useful if you wish to specify different sets of default options.</p>
</div>
<div class="paragraph">
<p>A single unified update request handler supports XML, CSV, JSON, and javabin update requests, delegating to the appropriate <code>ContentStreamLoader</code> based on the <code>Content-Type</code> of the <a href="content-streams.html#content-streams">ContentStream</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="UploadingDatawithIndexHandlers-UpdateRequestHandlerConfiguration">UpdateRequestHandler Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The default configuration file has the update request handler configured by default.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;requestHandler</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;/update&quot;</span> <span style="color: #7D9029">class=</span><span style="color: #BA2121">&quot;solr.UpdateRequestHandler&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#main">Back to Top</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="UploadingDatawithIndexHandlers-XMLFormattedIndexUpdates">XML Formatted Index Updates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Index update commands can be sent as XML message to the update handler using <code>Content-type: application/xml</code> or <code>Content-type: text/xml</code>.</p>
</div>
<div class="sect2">
<h3 id="UploadingDatawithIndexHandlers-AddingDocuments">Adding Documents</h3>
<div class="paragraph">
<p>The XML schema recognized by the update handler for adding documents is very straightforward:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>&lt;add&gt;</code> element introduces one more documents to be added.</p>
</li>
<li>
<p>The <code>&lt;doc&gt;</code> element introduces the fields making up a document.</p>
</li>
<li>
<p>The <code>&lt;field&gt;</code> element presents the content for a specific field.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;add&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;doc&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;authors&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>Patrick Eagar<span style="color: #008000; font-weight: bold">&lt;/field&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;subject&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>Sports<span style="color: #008000; font-weight: bold">&lt;/field&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;dd&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>796.35<span style="color: #008000; font-weight: bold">&lt;/field&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;numpages&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>128<span style="color: #008000; font-weight: bold">&lt;/field&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;desc&quot;</span><span style="color: #008000; font-weight: bold">&gt;&lt;/field&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;price&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>12.40<span style="color: #008000; font-weight: bold">&lt;/field&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;title&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>Summer of the all-rounder: Test and championship cricket in England 1982<span style="color: #008000; font-weight: bold">&lt;/field&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;isbn&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>0002166313<span style="color: #008000; font-weight: bold">&lt;/field&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;yearpub&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>1982<span style="color: #008000; font-weight: bold">&lt;/field&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;publisher&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>Collins<span style="color: #008000; font-weight: bold">&lt;/field&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;/doc&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;doc&gt;</span>
  ...
  <span style="color: #008000; font-weight: bold">&lt;/doc&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/add&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The add command supports some optional attributes which may be specified.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Optional Parameter</th>
<th class="tableblock halign-left valign-top">Parameter Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">commitWithin=<em>number</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add the document within the specified number of milliseconds</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">overwrite=<em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default is true. Indicates if the unique key constraints should be checked to overwrite previous versions of the same document (see below)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If the document schema defines a unique key, then by default an <code>/update</code> operation to add a document will overwrite (ie: replace) any document in the index with the same unique key. If no unique key has been defined, indexing performance is somewhat faster, as no check has to be made for an existing documents to replace.</p>
</div>
<div class="paragraph">
<p>If you have a unique key field, but you feel confident that you can safely bypass the uniqueness check (eg: you build your indexes in batch, and your indexing code guarantees it never adds the same document more then once) you can specify the <code>overwrite="false"</code> option when adding your documents.</p>
</div>
</div>
<div class="sect2">
<h3 id="UploadingDatawithIndexHandlers-XMLUpdateCommands">XML Update Commands</h3>
<div class="sect3">
<h4 id="UploadingDatawithIndexHandlers-CommitandOptimizeOperations">Commit and Optimize Operations</h4>
<div class="paragraph">
<p>The <code>&lt;commit&gt;</code> operation writes all documents loaded since the last commit to one or more segment files on the disk. Before a commit has been issued, newly indexed content is not visible to searches. The commit operation opens a new searcher, and triggers any event listeners that have been configured.</p>
</div>
<div class="paragraph">
<p>Commits may be issued explicitly with a <code>&lt;commit/&gt;</code> message, and can also be triggered from <code>&lt;autocommit&gt;</code> parameters in <code>solrconfig.xml</code>.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;optimize&gt;</code> operation requests Solr to merge internal data structures in order to improve search performance. For a large index, optimization will take some time to complete, but by merging many small segment files into a larger one, search performance will improve. If you are using Solr&#8217;s replication mechanism to distribute searches across many systems, be aware that after an optimize, a complete index will need to be transferred. In contrast, post-commit transfers are usually much smaller.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;commit&gt;</code> and <code>&lt;optimize&gt;</code> elements accept these optional attributes:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Optional Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">waitSearcher</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default is true. Blocks until a new searcher is opened and registered as the main query searcher, making the changes visible.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">expungeDeletes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(commit only) Default is false. Merges segments that have more than 10% deleted docs, expunging them in the process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">maxSegments</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optimize only) Default is 1. Merges the segments down to no more than this number of segments.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Here are examples of &lt;commit&gt; and &lt;optimize&gt; using optional attributes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;commit</span> <span style="color: #7D9029">waitSearcher=</span><span style="color: #BA2121">&quot;false&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;commit</span> <span style="color: #7D9029">waitSearcher=</span><span style="color: #BA2121">&quot;false&quot;</span> <span style="color: #7D9029">expungeDeletes=</span><span style="color: #BA2121">&quot;true&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;optimize</span> <span style="color: #7D9029">waitSearcher=</span><span style="color: #BA2121">&quot;false&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="UploadingDatawithIndexHandlers-DeleteOperations">Delete Operations</h4>
<div class="paragraph">
<p>Documents can be deleted from the index in two ways. "Delete by ID" deletes the document with the specified ID, and can be used only if a UniqueID field has been defined in the schema. "Delete by Query" deletes all documents matching a specified query, although <code>commitWithin</code> is ignored for a Delete by Query. A single delete message can contain multiple delete operations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;delete&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;id&gt;</span>0002166313<span style="color: #008000; font-weight: bold">&lt;/id&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;id&gt;</span>0031745983<span style="color: #008000; font-weight: bold">&lt;/id&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;query&gt;</span>subject:sport<span style="color: #008000; font-weight: bold">&lt;/query&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;query&gt;</span>publisher:penguin<span style="color: #008000; font-weight: bold">&lt;/query&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/delete&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When using the Join query parser in a Delete By Query, you should use the <code>score</code> parameter with a value of " <code>none`" to avoid a `ClassCastException</code>. See the section on the <a href="other-parsers.html#other-parsers">Join Query Parser</a> for more details on the <code>score</code> parameter.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="UploadingDatawithIndexHandlers-RollbackOperations">Rollback Operations</h4>
<div class="paragraph">
<p>The rollback command rolls back all add and deletes made to the index since the last commit. It neither calls any event listeners nor creates a new searcher. Its syntax is simple: <code>&lt;rollback/&gt;</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="UploadingDatawithIndexHandlers-UsingcurltoPerformUpdates">Using <code>curl</code> to Perform Updates</h3>
<div class="paragraph">
<p>You can use the <code>curl</code> utility to perform any of the above commands, using its <code>--data-binary</code> option to append the XML message to the <code>curl</code> command, and generating a HTTP POST request. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl http://localhost:8983/solr/my_collection/update -H <span style="color: #BA2121">&quot;Content-Type: text/xml&quot;</span> --data-binary <span style="color: #BA2121">&#39;</span>
<span style="color: #BA2121">&lt;add&gt;</span>
<span style="color: #BA2121">  &lt;doc&gt;</span>
<span style="color: #BA2121">    &lt;field name=&quot;authors&quot;&gt;Patrick Eagar&lt;/field&gt;</span>
<span style="color: #BA2121">    &lt;field name=&quot;subject&quot;&gt;Sports&lt;/field&gt;</span>
<span style="color: #BA2121">    &lt;field name=&quot;dd&quot;&gt;796.35&lt;/field&gt;</span>
<span style="color: #BA2121">    &lt;field name=&quot;isbn&quot;&gt;0002166313&lt;/field&gt;</span>
<span style="color: #BA2121">    &lt;field name=&quot;yearpub&quot;&gt;1982&lt;/field&gt;</span>
<span style="color: #BA2121">    &lt;field name=&quot;publisher&quot;&gt;Collins&lt;/field&gt;</span>
<span style="color: #BA2121">  &lt;/doc&gt;</span>
<span style="color: #BA2121">&lt;/add&gt;&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For posting XML messages contained in a file, you can use the alternative form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl http://localhost:8983/solr/my_collection/update -H <span style="color: #BA2121">&quot;Content-Type: text/xml&quot;</span> --data-binary @myfile.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Short requests can also be sent using a HTTP GET command, URL-encoding the request, as in the following. Note the escaping of "&lt;" and "&gt;":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl http://localhost:8983/solr/my_collection/update?stream.body<span style="color: #666666">=</span>%3Ccommit/%3E</code></pre>
</div>
</div>
<div class="paragraph">
<p>Responses from Solr take the form shown here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;response&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;lst</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;responseHeader&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;int</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;status&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>0<span style="color: #008000; font-weight: bold">&lt;/int&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;int</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;QTime&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>127<span style="color: #008000; font-weight: bold">&lt;/int&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;/lst&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/response&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The status field will be non-zero in case of failure.</p>
</div>
</div>
<div class="sect2">
<h3 id="UploadingDatawithIndexHandlers-UsingXSLTtoTransformXMLIndexUpdates">Using XSLT to Transform XML Index Updates</h3>
<div class="paragraph">
<p>The UpdateRequestHandler allows you to index any arbitrary XML using the <code>&lt;tr&gt;</code> parameter to apply an <a href="https://en.wikipedia.org/wiki/XSLT">XSL transformation</a>. You must have an XSLT stylesheet in the <code>conf/xslt</code> directory of your <a href="config-sets.html#config-sets">config set</a> that can transform the incoming data to the expected <code>&lt;add&gt;&lt;doc/&gt;&lt;/add&gt;</code> format, and use the <code>tr</code> parameter to specify the name of that stylesheet.</p>
</div>
<div class="paragraph">
<p>Here is an example XSLT stylesheet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;xsl:stylesheet</span> <span style="color: #7D9029">version=</span><span style="color: #BA2121">&#39;1.0&#39;</span> <span style="color: #7D9029">xmlns:xsl=</span><span style="color: #BA2121">&#39;http://www.w3.org/1999/XSL/Transform&#39;</span><span style="color: #008000; font-weight: bold">&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;xsl:output</span> <span style="color: #7D9029">media-type=</span><span style="color: #BA2121">&quot;text/xml&quot;</span> <span style="color: #7D9029">method=</span><span style="color: #BA2121">&quot;xml&quot;</span> <span style="color: #7D9029">indent=</span><span style="color: #BA2121">&quot;yes&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;xsl:template</span> <span style="color: #7D9029">match=</span><span style="color: #BA2121">&#39;/&#39;</span><span style="color: #008000; font-weight: bold">&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;add&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;xsl:apply-templates</span> <span style="color: #7D9029">select=</span><span style="color: #BA2121">&quot;response/result/doc&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;/add&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;/xsl:template&gt;</span>
  <span style="color: #408080; font-style: italic">&lt;!-- Ignore score (makes no sense to index) --&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;xsl:template</span> <span style="color: #7D9029">match=</span><span style="color: #BA2121">&quot;doc/*[@name=&#39;score&#39;]&quot;</span> <span style="color: #7D9029">priority=</span><span style="color: #BA2121">&quot;100&quot;</span><span style="color: #008000; font-weight: bold">&gt;&lt;/xsl:template&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;xsl:template</span> <span style="color: #7D9029">match=</span><span style="color: #BA2121">&quot;doc&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;xsl:variable</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;pos&quot;</span> <span style="color: #7D9029">select=</span><span style="color: #BA2121">&quot;position()&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;doc&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;xsl:apply-templates&gt;</span>
        <span style="color: #008000; font-weight: bold">&lt;xsl:with-param</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;pos&quot;</span><span style="color: #008000; font-weight: bold">&gt;&lt;xsl:value-of</span> <span style="color: #7D9029">select=</span><span style="color: #BA2121">&quot;$pos&quot;</span><span style="color: #008000; font-weight: bold">/&gt;&lt;/xsl:with-param&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;/xsl:apply-templates&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;/doc&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;/xsl:template&gt;</span>
  <span style="color: #408080; font-style: italic">&lt;!-- Flatten arrays to duplicate field lines --&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;xsl:template</span> <span style="color: #7D9029">match=</span><span style="color: #BA2121">&quot;doc/arr&quot;</span> <span style="color: #7D9029">priority=</span><span style="color: #BA2121">&quot;100&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;xsl:variable</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;fn&quot;</span> <span style="color: #7D9029">select=</span><span style="color: #BA2121">&quot;@name&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;xsl:for-each</span> <span style="color: #7D9029">select=</span><span style="color: #BA2121">&quot;*&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;xsl:element</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;field&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
        <span style="color: #008000; font-weight: bold">&lt;xsl:attribute</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;name&quot;</span><span style="color: #008000; font-weight: bold">&gt;&lt;xsl:value-of</span> <span style="color: #7D9029">select=</span><span style="color: #BA2121">&quot;$fn&quot;</span><span style="color: #008000; font-weight: bold">/&gt;&lt;/xsl:attribute&gt;</span>
        <span style="color: #008000; font-weight: bold">&lt;xsl:value-of</span> <span style="color: #7D9029">select=</span><span style="color: #BA2121">&quot;.&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;/xsl:element&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;/xsl:for-each&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;/xsl:template&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;xsl:template</span> <span style="color: #7D9029">match=</span><span style="color: #BA2121">&quot;doc/*&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;xsl:variable</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;fn&quot;</span> <span style="color: #7D9029">select=</span><span style="color: #BA2121">&quot;@name&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;xsl:element</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;field&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
        <span style="color: #008000; font-weight: bold">&lt;xsl:attribute</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;name&quot;</span><span style="color: #008000; font-weight: bold">&gt;&lt;xsl:value-of</span> <span style="color: #7D9029">select=</span><span style="color: #BA2121">&quot;$fn&quot;</span><span style="color: #008000; font-weight: bold">/&gt;&lt;/xsl:attribute&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;xsl:value-of</span> <span style="color: #7D9029">select=</span><span style="color: #BA2121">&quot;.&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;/xsl:element&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;/xsl:template&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;xsl:template</span> <span style="color: #7D9029">match=</span><span style="color: #BA2121">&quot;*&quot;</span><span style="color: #008000; font-weight: bold">/&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/xsl:stylesheet&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This stylesheet transforms Solr&#8217;s XML search result format into Solr&#8217;s Update XML syntax. One example usage would be to copy a Solr 1.3 index (which does not have CSV response writer) into a format which can be indexed into another Solr file (provided that all fields are stored):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="plain">http://localhost:8983/solr/my_collection/select?q=*:*&amp;wt=xslt&amp;tr=updateXml.xsl&amp;rows=1000</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use the stylesheet in <code>XsltUpdateRequestHandler</code> to transform an index when updating:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl <span style="color: #BA2121">&quot;http://localhost:8983/solr/my_collection/update?commit=true&amp;tr=updateXml.xsl&quot;</span> -H <span style="color: #BA2121">&quot;Content-Type: text/xml&quot;</span> --data-binary @myexporteddata.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#main">Back to Top</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="UploadingDatawithIndexHandlers-JSONFormattedIndexUpdates">JSON Formatted Index Updates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Solr can accept JSON that conforms to a defined structure, or can accept arbitrary JSON-formatted documents. If sending arbitrarily formatted JSON, there are some additional parameters that need to be sent with the update request, described below in the section <a href="transforming-and-indexing-custom-json.html#transforming-and-indexing-custom-json">Transforming and Indexing Custom JSON</a>.</p>
</div>
<div class="sect2">
<h3 id="UploadingDatawithIndexHandlers-Solr-StyleJSON">Solr-Style JSON</h3>
<div class="paragraph">
<p>JSON formatted update requests may be sent to Solr&#8217;s <code>/update</code> handler using <code>Content-Type: application/json</code> or <code>Content-Type: text/json</code>.</p>
</div>
<div class="paragraph">
<p>JSON formatted updates can take 3 basic forms, described in depth below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#UploadingDatawithIndexHandlers-AddingaSingleJSONDocument">A single document to add</a>, expressed as a top level JSON Object. To differentiate this from a set of commands, the <code>json.command=false</code> request parameter is required.</p>
</li>
<li>
<p><a href="#UploadingDatawithIndexHandlers-AddingMultipleJSONDocuments">A list of documents to add</a>, expressed as a top level JSON Array containing a JSON Object per document.</p>
</li>
<li>
<p><a href="#UploadingDatawithIndexHandlers-SendingJSONUpdateCommands">A sequence of update commands</a>, expressed as a top level JSON Object (aka: Map).</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="UploadingDatawithIndexHandlers-AddingaSingleJSONDocument">Adding a Single JSON Document</h4>
<div class="paragraph">
<p>The simplest way to add Documents via JSON is to send each document individually as a JSON Object, using the <code>/update/json/docs</code> path:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl -X POST -H <span style="color: #BA2121">&#39;Content-Type: application/json&#39;</span> <span style="color: #BA2121">&#39;http://localhost:8983/solr/my_collection/update/json/docs&#39;</span> --data-binary <span style="color: #BA2121">&#39;</span>
<span style="color: #BA2121">{</span>
<span style="color: #BA2121">  &quot;id&quot;: &quot;1&quot;,</span>
<span style="color: #BA2121">  &quot;title&quot;: &quot;Doc 1&quot;</span>
<span style="color: #BA2121">}&#39;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="UploadingDatawithIndexHandlers-AddingMultipleJSONDocuments">Adding Multiple JSON Documents</h4>
<div class="paragraph">
<p>Adding multiple documents at one time via JSON can be done via a JSON Array of JSON Objects, where each object represents a document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl -X POST -H <span style="color: #BA2121">&#39;Content-Type: application/json&#39;</span> <span style="color: #BA2121">&#39;http://localhost:8983/solr/my_collection/update&#39;</span> --data-binary <span style="color: #BA2121">&#39;</span>
<span style="color: #BA2121">[</span>
<span style="color: #BA2121">  {</span>
<span style="color: #BA2121">    &quot;id&quot;: &quot;1&quot;,</span>
<span style="color: #BA2121">    &quot;title&quot;: &quot;Doc 1&quot;</span>
<span style="color: #BA2121">  },</span>
<span style="color: #BA2121">  {</span>
<span style="color: #BA2121">    &quot;id&quot;: &quot;2&quot;,</span>
<span style="color: #BA2121">    &quot;title&quot;: &quot;Doc 2&quot;</span>
<span style="color: #BA2121">  }</span>
<span style="color: #BA2121">]&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A sample JSON file is provided at <code>example/exampledocs/books.json</code> and contains an array of objects that you can add to the Solr <code>techproducts</code> example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl <span style="color: #BA2121">&#39;http://localhost:8983/solr/techproducts/update?commit=true&#39;</span> --data-binary @example/exampledocs/books.json -H <span style="color: #BA2121">&#39;Content-type:application/json&#39;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="UploadingDatawithIndexHandlers-SendingJSONUpdateCommands">Sending JSON Update Commands</h4>
<div class="paragraph">
<p>In general, the JSON update syntax supports all of the update commands that the XML update handler supports, through a straightforward mapping. Multiple commands, adding and deleting documents, may be contained in one message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl -X POST -H <span style="color: #BA2121">&#39;Content-Type: application/json&#39;</span> <span style="color: #BA2121">&#39;http://localhost:8983/solr/my_collection/update&#39;</span> --data-binary <span style="color: #BA2121">&#39;</span>
<span style="color: #BA2121">{</span>
<span style="color: #BA2121">  &quot;add&quot;: {</span>
<span style="color: #BA2121">    &quot;doc&quot;: {</span>
<span style="color: #BA2121">      &quot;id&quot;: &quot;DOC1&quot;,</span>
<span style="color: #BA2121">      &quot;my_field&quot;: 2.3,</span>
<span style="color: #BA2121">      &quot;my_multivalued_field&quot;: [ &quot;aaa&quot;, &quot;bbb&quot; ]   /* Can use an array for a multi-valued field */</span>
<span style="color: #BA2121">    }</span>
<span style="color: #BA2121">  },</span>
<span style="color: #BA2121">  &quot;add&quot;: {</span>
<span style="color: #BA2121">    &quot;commitWithin&quot;: 5000,          /* commit this document within 5 seconds */</span>
<span style="color: #BA2121">    &quot;overwrite&quot;: false,            /* don&#39;</span>t check <span style="color: #008000; font-weight: bold">for</span> existing documents with the same uniqueKey */
    <span style="color: #BA2121">&quot;doc&quot;</span>: <span style="color: #666666">{</span>
      <span style="color: #BA2121">&quot;f1&quot;</span>: <span style="color: #BA2121">&quot;v1&quot;</span>,                  /* Can use repeated keys <span style="color: #008000; font-weight: bold">for</span> a multi-valued field */
      <span style="color: #BA2121">&quot;f1&quot;</span>: <span style="color: #BA2121">&quot;v2&quot;</span>
    <span style="color: #666666">}</span>
  <span style="color: #666666">}</span>,

  <span style="color: #BA2121">&quot;commit&quot;</span>: <span style="color: #666666">{}</span>,
  <span style="color: #BA2121">&quot;optimize&quot;</span>: <span style="color: #666666">{</span> <span style="color: #BA2121">&quot;waitSearcher&quot;</span>:false <span style="color: #666666">}</span>,

  <span style="color: #BA2121">&quot;delete&quot;</span>: <span style="color: #666666">{</span> <span style="color: #BA2121">&quot;id&quot;</span>:<span style="color: #BA2121">&quot;ID&quot;</span> <span style="color: #666666">}</span>,         /* delete by ID */
  <span style="color: #BA2121">&quot;delete&quot;</span>: <span style="color: #666666">{</span> <span style="color: #BA2121">&quot;query&quot;</span>:<span style="color: #BA2121">&quot;QUERY&quot;</span> <span style="color: #666666">}</span>    /* delete by query */
<span style="color: #666666">}</span><span style="border: 1px solid #FF0000">&#39;</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Comments are not allowed in JSON, but duplicate names are.</p>
</div>
<div class="paragraph">
<p>The comments in the above example are for illustrative purposes only, and can not be included in actual commands sent to Solr.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As with other update handlers, parameters such as <code>commit</code>, <code>commitWithin</code>, <code>optimize</code>, and <code>overwrite</code> may be specified in the URL instead of in the body of the message.</p>
</div>
<div class="paragraph">
<p>The JSON update format allows for a simple delete-by-id. The value of a <code>delete</code> can be an array which contains a list of zero or more specific document id&#8217;s (not a range) to be deleted. For example, a single document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="plain">{ &quot;delete&quot;:&quot;myid&quot; }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or a list of document IDs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span style="color: #666666">{</span> <span style="color: #BA2121">&quot;delete&quot;</span><span style="color: #666666">:[</span><span style="color: #BA2121">&quot;id1&quot;</span><span style="color: #666666">,</span><span style="color: #BA2121">&quot;id2&quot;</span><span style="color: #666666">]</span> <span style="color: #666666">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of a "delete" can be an array which contains a list of zero or more id&#8217;s to be deleted. It is not a range (start and end).</p>
</div>
<div class="paragraph">
<p>You can also specify <code><em>version</em></code> with each "delete":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="plain">{
  &quot;delete&quot;:&quot;id&quot;:50,
  &quot;_version_&quot;:12345
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can specify the version of deletes in the body of the update request as well.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="UploadingDatawithIndexHandlers-JSONUpdateConveniencePaths">JSON Update Convenience Paths</h3>
<div class="paragraph">
<p>In addition to the <code>/update</code> handler, there are a few additional JSON specific request handler paths available by default in Solr, that implicitly override the behavior of some request parameters:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Default Parameters</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/update/json</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stream.contentType=application/json</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/update/json/docs</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>stream.contentType=application/json</code></p>
</div>
<div class="paragraph">
<p><code>json.command=false</code></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <code>/update/json</code> path may be useful for clients sending in JSON formatted update commands from applications where setting the Content-Type proves difficult, while the <code>/update/json/docs</code> path can be particularly convenient for clients that always want to send in documents – either individually or as a list – without needing to worry about the full JSON command syntax.</p>
</div>
<div class="paragraph">
<p><a href="#main">Back to Top</a></p>
</div>
</div>
<div class="sect2">
<h3 id="UploadingDatawithIndexHandlers-CustomJSONDocuments">Custom JSON Documents</h3>
<div class="paragraph">
<p>Solr can support custom JSON. This is covered in the section <a href="transforming-and-indexing-custom-json.html#transforming-and-indexing-custom-json">Transforming and Indexing Custom JSON</a>.</p>
</div>
<div class="paragraph">
<p><a href="#main">Back to Top</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="UploadingDatawithIndexHandlers-CSVFormattedIndexUpdates">CSV Formatted Index Updates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>CSV formatted update requests may be sent to Solr&#8217;s <code>/update</code> handler using <code>Content-Type: application/csv</code> or <code>Content-Type: text/csv</code>.</p>
</div>
<div class="paragraph">
<p>A sample CSV file is provided at <code>example/exampledocs/books.csv</code> that you can use to add some documents to the Solr <code>techproducts</code> example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl <span style="color: #BA2121">&#39;http://localhost:8983/solr/my_collection/update?commit=true&#39;</span> --data-binary @example/exampledocs/books.csv -H <span style="color: #BA2121">&#39;Content-type:application/csv&#39;</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="UploadingDatawithIndexHandlers-CSVUpdateParameters">CSV Update Parameters</h3>
<div class="paragraph">
<p>The CSV handler allows the specification of many parameters in the URL in the form: <code>f.<em>parameter</em>.<em>optional_fieldname</em>=<em>value</em></code> .</p>
</div>
<div class="paragraph">
<p>The table below describes the parameters for the update handler.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Usage</th>
<th class="tableblock halign-left valign-top">Global (g) or Per Field (f)</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">separator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Character used as field separator; default is ","</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">g,(f: see split)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">separator=%09</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">trim</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, remove leading and trailing whitespace from values. Default=false.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">g,f</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">f.isbn.trim=true trim=false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">header</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set to true if first line of input contains field names. These will be used if the <strong>fieldnames</strong> parameter is absent.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">g</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fieldnames</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma separated list of field names to use when adding documents.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">g</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fieldnames=isbn,price,title</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">literal.&lt;field_name&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A literal value for a specified field name.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">g</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">literal.color=red</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">skip</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma separated list of field names to skip.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">g</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">skip=uninteresting,shoesize</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">skipLines</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of lines to discard in the input stream before the CSV data starts, including the header, if present. Default=0.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">g</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">skipLines=5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">encapsulator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The character optionally used to surround values to preserve characters such as the CSV separator or whitespace. This standard CSV format handles the encapsulator itself appearing in an encapsulated value by doubling the encapsulator.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">g,(f: see split)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">encapsulator="</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">escape</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The character used for escaping CSV separators or other reserved characters. If an escape is specified, the encapsulator is not used unless also explicitly specified since most formats use either encapsulation or escaping, not both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">g</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">escape=\</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">keepEmpty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keep and index zero length (empty) fields. Default=false.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">g,f</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">f.price.keepEmpty=true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">map</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map one value to another. Format is value:replacement (which can be empty.)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">g,f</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">map=left:right f.subject.map=history:bunk</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">split</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, split a field into multiple values by a separate parser.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">f</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">overwrite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true (the default), check for and overwrite duplicate documents, based on the uniqueKey field declared in the Solr schema. If you know the documents you are indexing do not contain any duplicates then you may see a considerable speed up setting this to false.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">g</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">commit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues a commit after the data has been ingested.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">g</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">commitWithin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add the document within the specified number of milliseconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">g</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">commitWithin=10000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rowid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map the rowid (line number) to a field specified by the value of the parameter, for instance if your CSV doesn&#8217;t have a unique key and you want to use the row id as such.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">g</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rowid=id</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rowidOffset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add the given offset (as an int) to the rowid before adding it to the document. Default is 0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">g</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rowidOffset=10</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="UploadingDatawithIndexHandlers-IndexingTab-Delimitedfiles">Indexing Tab-Delimited files</h3>
<div class="paragraph">
<p>The same feature used to index CSV documents can also be easily used to index tab-delimited files (TSV files) and even handle backslash escaping rather than CSV encapsulation.</p>
</div>
<div class="paragraph">
<p>For example, one can dump a MySQL table to a tab delimited file with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">SELECT * INTO OUTFILE <span style="color: #BA2121">&#39;/tmp/result.txt&#39;</span> FROM mytable;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This file could then be imported into Solr by setting the <code>separator</code> to tab (%09) and the <code>escape</code> to backslash (%5c).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl <span style="color: #BA2121">&#39;http://localhost:8983/solr/my_collection/update/csv?commit=true&amp;separator=%09&amp;escape=%5c&#39;</span> --data-binary @/tmp/result.txt</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="UploadingDatawithIndexHandlers-CSVUpdateConveniencePaths">CSV Update Convenience Paths</h3>
<div class="paragraph">
<p>In addition to the <code>/update</code> handler, there is an additional CSV specific request handler path available by default in Solr, that implicitly override the behavior of some request parameters:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Default Parameters</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/update/csv</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stream.contentType=application/csv</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <code>/update/csv</code> path may be useful for clients sending in CSV formatted update commands from applications where setting the Content-Type proves difficult.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="UploadingDatawithIndexHandlers-NestedChildDocuments">Nested Child Documents</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Solr indexes nested documents in blocks as a way to model documents containing other documents, such as a blog post parent document and comments as child documents&#8201;&#8212;&#8201;or products as parent documents and sizes, colors, or other variations as child documents. At query time, the <a href="other-parsers.html#OtherParsers-BlockJoinQueryParsers">Block Join Query Parsers</a> can search these relationships. In terms of performance, indexing the relationships between documents may be more efficient than attempting to do joins only at query time, since the relationships are already stored in the index and do not need to be computed.</p>
</div>
<div class="paragraph">
<p>Nested documents may be indexed via either the XML or JSON data syntax (or using <a href="using-solrj.html#using-solrj">SolrJ)</a> - but regardless of syntax, you must include a field that identifies the parent document as a parent; it can be any field that suits this purpose, and it will be used as input for the <a href="other-parsers.html#OtherParsers-BlockJoinQueryParsers">block join query parsers</a>.</p>
</div>
<div class="paragraph">
<p>To support nested documents, the schema must include an indexed/non-stored field <em>_root</em> _ . The value of that field is populated automatically and is the same for all documents in the block, regardless of the inheritance depth.</p>
</div>
<div class="sect3">
<h4 id="UploadingDatawithIndexHandlers-XMLExamples">XML Examples</h4>
<div class="paragraph">
<p>For example, here are two documents and their child documents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span style="color: #008000; font-weight: bold">&lt;add&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;doc&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;id&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>1<span style="color: #008000; font-weight: bold">&lt;/field&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;title&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>Solr adds block join support<span style="color: #008000; font-weight: bold">&lt;/field&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;content_type&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>parentDocument<span style="color: #008000; font-weight: bold">&lt;/field&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;doc&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;id&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>2<span style="color: #008000; font-weight: bold">&lt;/field&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;comments&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>SolrCloud supports it too!<span style="color: #008000; font-weight: bold">&lt;/field&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;/doc&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;/doc&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;doc&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;id&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>3<span style="color: #008000; font-weight: bold">&lt;/field&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;title&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>New Lucene and Solr release is out<span style="color: #008000; font-weight: bold">&lt;/field&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;content_type&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>parentDocument<span style="color: #008000; font-weight: bold">&lt;/field&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;doc&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;id&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>4<span style="color: #008000; font-weight: bold">&lt;/field&gt;</span>
      <span style="color: #008000; font-weight: bold">&lt;field</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;comments&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>Lots of new features<span style="color: #008000; font-weight: bold">&lt;/field&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;/doc&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;/doc&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/add&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, we have indexed the parent documents with the field <code>content_type</code>, which has the value "parentDocument". We could have also used a boolean field, such as <code>isParent</code>, with a value of "true", or any other similar approach.</p>
</div>
</div>
<div class="sect3">
<h4 id="UploadingDatawithIndexHandlers-JSONExamples">JSON Examples</h4>
<div class="paragraph">
<p>This example is equivalent to the XML example above, note the special <code><em>childDocuments</em></code> key need to indicate the nested documents in JSON.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">[
  {
    <span style="color: #008000; font-weight: bold">&quot;id&quot;</span>: <span style="color: #BA2121">&quot;1&quot;</span>,
    <span style="color: #008000; font-weight: bold">&quot;title&quot;</span>: <span style="color: #BA2121">&quot;Solr adds block join support&quot;</span>,
    <span style="color: #008000; font-weight: bold">&quot;content_type&quot;</span>: <span style="color: #BA2121">&quot;parentDocument&quot;</span>,
    <span style="color: #008000; font-weight: bold">&quot;_childDocuments_&quot;</span>: [
      {
        <span style="color: #008000; font-weight: bold">&quot;id&quot;</span>: <span style="color: #BA2121">&quot;2&quot;</span>,
        <span style="color: #008000; font-weight: bold">&quot;comments&quot;</span>: <span style="color: #BA2121">&quot;SolrCloud supports it too!&quot;</span>
      }
    ]
  },
  {
    <span style="color: #008000; font-weight: bold">&quot;id&quot;</span>: <span style="color: #BA2121">&quot;3&quot;</span>,
    <span style="color: #008000; font-weight: bold">&quot;title&quot;</span>: <span style="color: #BA2121">&quot;New Lucene and Solr release is out&quot;</span>,
    <span style="color: #008000; font-weight: bold">&quot;content_type&quot;</span>: <span style="color: #BA2121">&quot;parentDocument&quot;</span>,
    <span style="color: #008000; font-weight: bold">&quot;_childDocuments_&quot;</span>: [
      {
        <span style="color: #008000; font-weight: bold">&quot;id&quot;</span>: <span style="color: #BA2121">&quot;4&quot;</span>,
        <span style="color: #008000; font-weight: bold">&quot;comments&quot;</span>: <span style="color: #BA2121">&quot;Lots of new features&quot;</span>
      }
    ]
  }
]</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>One limitation of indexing nested documents is that the whole block of parent-children documents must be updated together whenever any changes are required. In other words, even if a single child document or the parent document is changed, the whole block of parent-child documents must be indexed together.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="#main">Back to Top</a></p>
</div>
</div>
</div>
</div>
</div>

<!-- Adds tags, if any -->
    <div class="tags">
        
    </div>

<!-- Adds nav links on each page -->
    
    
    <div class="scrollnav">
      
      <a class="btn btn-primary prev" href="post-tool.html">Post Tool</a>
      
      
      <a class="btn btn-primary next" href="transforming-and-indexing-custom-json.html">Transforming and Indexing Custom JSON</a>
      
    </div>
    

</div>

<!-- Adds comments from Apache's Comment system -->

<div id="comments_thread">
</div>
<script type="text/javascript" src="https://comments.apache.org/show_comments.lua?site=solrcwiki&style=https://home.apache.org/~ctargett/RefGuidePOC/jekyll/css/comments.css&page=uploading-data-with-index-handlers" async="true">
</script>
<noscript>
<iframe width="100%" height="500" src="https://comments.apache.org/iframe.lua?site=solrcwiki&style=https://home.apache.org/~ctargett/RefGuidePOC/jekyll/css/comments.css&page=uploading-data-with-index-handlers"></iframe>
</noscript>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2017 Apache Software Foundation. All rights reserved. <br />
 Site last generated: 2017-04-26 <br />
<p><img src="solr-sunOnly-small.png" alt="Apache Solr"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
  </div>
  <!-- /.container -->
</div>

</body>

</html>
